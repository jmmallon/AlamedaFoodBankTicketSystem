{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import*as React from'react';import{useRef,useState}from'react';var MIN_SWIPE_DISTANCE=0.1;var STOP_SWIPE_DISTANCE=0.01;var REFRESH_INTERVAL=20;var SPEED_OFF_MULTIPLE=Math.pow(0.995,REFRESH_INTERVAL);// ================================= Hook =================================\nexport default function useTouchMove(ref,onOffset){var _useState=useState(),_useState2=_slicedToArray(_useState,2),touchPosition=_useState2[0],setTouchPosition=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),lastTimestamp=_useState4[0],setLastTimestamp=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),lastTimeDiff=_useState6[0],setLastTimeDiff=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),lastOffset=_useState8[0],setLastOffset=_useState8[1];var motionRef=useRef();// ========================= Events =========================\n// >>> Touch events\nfunction onTouchStart(e){var _e$touches$=e.touches[0],screenX=_e$touches$.screenX,screenY=_e$touches$.screenY;setTouchPosition({x:screenX,y:screenY});window.clearInterval(motionRef.current);}function onTouchMove(e){if(!touchPosition)return;e.preventDefault();var _e$touches$2=e.touches[0],screenX=_e$touches$2.screenX,screenY=_e$touches$2.screenY;setTouchPosition({x:screenX,y:screenY});var offsetX=screenX-touchPosition.x;var offsetY=screenY-touchPosition.y;onOffset(offsetX,offsetY);var now=Date.now();setLastTimestamp(now);setLastTimeDiff(now-lastTimestamp);setLastOffset({x:offsetX,y:offsetY});}function onTouchEnd(){if(!touchPosition)return;setTouchPosition(null);setLastOffset(null);// Swipe if needed\nif(lastOffset){var distanceX=lastOffset.x/lastTimeDiff;var distanceY=lastOffset.y/lastTimeDiff;var absX=Math.abs(distanceX);var absY=Math.abs(distanceY);// Skip swipe if low distance\nif(Math.max(absX,absY)<MIN_SWIPE_DISTANCE)return;var currentX=distanceX;var currentY=distanceY;motionRef.current=window.setInterval(function(){if(Math.abs(currentX)<STOP_SWIPE_DISTANCE&&Math.abs(currentY)<STOP_SWIPE_DISTANCE){window.clearInterval(motionRef.current);return;}currentX*=SPEED_OFF_MULTIPLE;currentY*=SPEED_OFF_MULTIPLE;onOffset(currentX*REFRESH_INTERVAL,currentY*REFRESH_INTERVAL);},REFRESH_INTERVAL);}}// >>> Wheel event\nvar lastWheelDirectionRef=useRef();function onWheel(e){var deltaX=e.deltaX,deltaY=e.deltaY;// Convert both to x & y since wheel only happened on PC\nvar mixed=0;var absX=Math.abs(deltaX);var absY=Math.abs(deltaY);if(absX===absY){mixed=lastWheelDirectionRef.current==='x'?deltaX:deltaY;}else if(absX>absY){mixed=deltaX;lastWheelDirectionRef.current='x';}else{mixed=deltaY;lastWheelDirectionRef.current='y';}if(onOffset(-mixed,-mixed)){e.preventDefault();}}// ========================= Effect =========================\nvar touchEventsRef=useRef(null);touchEventsRef.current={onTouchStart:onTouchStart,onTouchMove:onTouchMove,onTouchEnd:onTouchEnd,onWheel:onWheel};React.useEffect(function(){function onProxyTouchStart(e){touchEventsRef.current.onTouchStart(e);}function onProxyTouchMove(e){touchEventsRef.current.onTouchMove(e);}function onProxyTouchEnd(e){touchEventsRef.current.onTouchEnd(e);}function onProxyWheel(e){touchEventsRef.current.onWheel(e);}document.addEventListener('touchmove',onProxyTouchMove,{passive:false});document.addEventListener('touchend',onProxyTouchEnd,{passive:false});// No need to clean up since element removed\nref.current.addEventListener('touchstart',onProxyTouchStart,{passive:false});ref.current.addEventListener('wheel',onProxyWheel);return function(){document.removeEventListener('touchmove',onProxyTouchMove);document.removeEventListener('touchend',onProxyTouchEnd);};},[]);}","map":{"version":3,"names":["_slicedToArray","React","useRef","useState","MIN_SWIPE_DISTANCE","STOP_SWIPE_DISTANCE","REFRESH_INTERVAL","SPEED_OFF_MULTIPLE","Math","pow","useTouchMove","ref","onOffset","_useState","_useState2","touchPosition","setTouchPosition","_useState3","_useState4","lastTimestamp","setLastTimestamp","_useState5","_useState6","lastTimeDiff","setLastTimeDiff","_useState7","_useState8","lastOffset","setLastOffset","motionRef","onTouchStart","e","_e$touches$","touches","screenX","screenY","x","y","window","clearInterval","current","onTouchMove","preventDefault","_e$touches$2","offsetX","offsetY","now","Date","onTouchEnd","distanceX","distanceY","absX","abs","absY","max","currentX","currentY","setInterval","lastWheelDirectionRef","onWheel","deltaX","deltaY","mixed","touchEventsRef","useEffect","onProxyTouchStart","onProxyTouchMove","onProxyTouchEnd","onProxyWheel","document","addEventListener","passive","removeEventListener"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-tabs/es/hooks/useTouchMove.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useRef, useState } from 'react';\nvar MIN_SWIPE_DISTANCE = 0.1;\nvar STOP_SWIPE_DISTANCE = 0.01;\nvar REFRESH_INTERVAL = 20;\nvar SPEED_OFF_MULTIPLE = Math.pow(0.995, REFRESH_INTERVAL);\n\n// ================================= Hook =================================\nexport default function useTouchMove(ref, onOffset) {\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    touchPosition = _useState2[0],\n    setTouchPosition = _useState2[1];\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2),\n    lastTimestamp = _useState4[0],\n    setLastTimestamp = _useState4[1];\n  var _useState5 = useState(0),\n    _useState6 = _slicedToArray(_useState5, 2),\n    lastTimeDiff = _useState6[0],\n    setLastTimeDiff = _useState6[1];\n  var _useState7 = useState(),\n    _useState8 = _slicedToArray(_useState7, 2),\n    lastOffset = _useState8[0],\n    setLastOffset = _useState8[1];\n  var motionRef = useRef();\n\n  // ========================= Events =========================\n  // >>> Touch events\n  function onTouchStart(e) {\n    var _e$touches$ = e.touches[0],\n      screenX = _e$touches$.screenX,\n      screenY = _e$touches$.screenY;\n    setTouchPosition({\n      x: screenX,\n      y: screenY\n    });\n    window.clearInterval(motionRef.current);\n  }\n  function onTouchMove(e) {\n    if (!touchPosition) return;\n    e.preventDefault();\n    var _e$touches$2 = e.touches[0],\n      screenX = _e$touches$2.screenX,\n      screenY = _e$touches$2.screenY;\n    setTouchPosition({\n      x: screenX,\n      y: screenY\n    });\n    var offsetX = screenX - touchPosition.x;\n    var offsetY = screenY - touchPosition.y;\n    onOffset(offsetX, offsetY);\n    var now = Date.now();\n    setLastTimestamp(now);\n    setLastTimeDiff(now - lastTimestamp);\n    setLastOffset({\n      x: offsetX,\n      y: offsetY\n    });\n  }\n  function onTouchEnd() {\n    if (!touchPosition) return;\n    setTouchPosition(null);\n    setLastOffset(null);\n\n    // Swipe if needed\n    if (lastOffset) {\n      var distanceX = lastOffset.x / lastTimeDiff;\n      var distanceY = lastOffset.y / lastTimeDiff;\n      var absX = Math.abs(distanceX);\n      var absY = Math.abs(distanceY);\n\n      // Skip swipe if low distance\n      if (Math.max(absX, absY) < MIN_SWIPE_DISTANCE) return;\n      var currentX = distanceX;\n      var currentY = distanceY;\n      motionRef.current = window.setInterval(function () {\n        if (Math.abs(currentX) < STOP_SWIPE_DISTANCE && Math.abs(currentY) < STOP_SWIPE_DISTANCE) {\n          window.clearInterval(motionRef.current);\n          return;\n        }\n        currentX *= SPEED_OFF_MULTIPLE;\n        currentY *= SPEED_OFF_MULTIPLE;\n        onOffset(currentX * REFRESH_INTERVAL, currentY * REFRESH_INTERVAL);\n      }, REFRESH_INTERVAL);\n    }\n  }\n\n  // >>> Wheel event\n  var lastWheelDirectionRef = useRef();\n  function onWheel(e) {\n    var deltaX = e.deltaX,\n      deltaY = e.deltaY;\n\n    // Convert both to x & y since wheel only happened on PC\n    var mixed = 0;\n    var absX = Math.abs(deltaX);\n    var absY = Math.abs(deltaY);\n    if (absX === absY) {\n      mixed = lastWheelDirectionRef.current === 'x' ? deltaX : deltaY;\n    } else if (absX > absY) {\n      mixed = deltaX;\n      lastWheelDirectionRef.current = 'x';\n    } else {\n      mixed = deltaY;\n      lastWheelDirectionRef.current = 'y';\n    }\n    if (onOffset(-mixed, -mixed)) {\n      e.preventDefault();\n    }\n  }\n\n  // ========================= Effect =========================\n  var touchEventsRef = useRef(null);\n  touchEventsRef.current = {\n    onTouchStart: onTouchStart,\n    onTouchMove: onTouchMove,\n    onTouchEnd: onTouchEnd,\n    onWheel: onWheel\n  };\n  React.useEffect(function () {\n    function onProxyTouchStart(e) {\n      touchEventsRef.current.onTouchStart(e);\n    }\n    function onProxyTouchMove(e) {\n      touchEventsRef.current.onTouchMove(e);\n    }\n    function onProxyTouchEnd(e) {\n      touchEventsRef.current.onTouchEnd(e);\n    }\n    function onProxyWheel(e) {\n      touchEventsRef.current.onWheel(e);\n    }\n    document.addEventListener('touchmove', onProxyTouchMove, {\n      passive: false\n    });\n    document.addEventListener('touchend', onProxyTouchEnd, {\n      passive: false\n    });\n\n    // No need to clean up since element removed\n    ref.current.addEventListener('touchstart', onProxyTouchStart, {\n      passive: false\n    });\n    ref.current.addEventListener('wheel', onProxyWheel);\n    return function () {\n      document.removeEventListener('touchmove', onProxyTouchMove);\n      document.removeEventListener('touchend', onProxyTouchEnd);\n    };\n  }, []);\n}"],"mappings":"AAAA,MAAO,CAAAA,cAAc,KAAM,0CAA0C,CACrE,MAAO,GAAK,CAAAC,KAAK,KAAM,OAAO,CAC9B,OAASC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACxC,GAAI,CAAAC,kBAAkB,CAAG,GAAG,CAC5B,GAAI,CAAAC,mBAAmB,CAAG,IAAI,CAC9B,GAAI,CAAAC,gBAAgB,CAAG,EAAE,CACzB,GAAI,CAAAC,kBAAkB,CAAGC,IAAI,CAACC,GAAG,CAAC,KAAK,CAAEH,gBAAgB,CAAC,CAE1D;AACA,cAAe,SAAS,CAAAI,YAAYA,CAACC,GAAG,CAAEC,QAAQ,CAAE,CAClD,GAAI,CAAAC,SAAS,CAAGV,QAAQ,CAAC,CAAC,CACxBW,UAAU,CAAGd,cAAc,CAACa,SAAS,CAAE,CAAC,CAAC,CACzCE,aAAa,CAAGD,UAAU,CAAC,CAAC,CAAC,CAC7BE,gBAAgB,CAAGF,UAAU,CAAC,CAAC,CAAC,CAClC,GAAI,CAAAG,UAAU,CAAGd,QAAQ,CAAC,CAAC,CAAC,CAC1Be,UAAU,CAAGlB,cAAc,CAACiB,UAAU,CAAE,CAAC,CAAC,CAC1CE,aAAa,CAAGD,UAAU,CAAC,CAAC,CAAC,CAC7BE,gBAAgB,CAAGF,UAAU,CAAC,CAAC,CAAC,CAClC,GAAI,CAAAG,UAAU,CAAGlB,QAAQ,CAAC,CAAC,CAAC,CAC1BmB,UAAU,CAAGtB,cAAc,CAACqB,UAAU,CAAE,CAAC,CAAC,CAC1CE,YAAY,CAAGD,UAAU,CAAC,CAAC,CAAC,CAC5BE,eAAe,CAAGF,UAAU,CAAC,CAAC,CAAC,CACjC,GAAI,CAAAG,UAAU,CAAGtB,QAAQ,CAAC,CAAC,CACzBuB,UAAU,CAAG1B,cAAc,CAACyB,UAAU,CAAE,CAAC,CAAC,CAC1CE,UAAU,CAAGD,UAAU,CAAC,CAAC,CAAC,CAC1BE,aAAa,CAAGF,UAAU,CAAC,CAAC,CAAC,CAC/B,GAAI,CAAAG,SAAS,CAAG3B,MAAM,CAAC,CAAC,CAExB;AACA;AACA,QAAS,CAAA4B,YAAYA,CAACC,CAAC,CAAE,CACvB,GAAI,CAAAC,WAAW,CAAGD,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC,CAC5BC,OAAO,CAAGF,WAAW,CAACE,OAAO,CAC7BC,OAAO,CAAGH,WAAW,CAACG,OAAO,CAC/BnB,gBAAgB,CAAC,CACfoB,CAAC,CAAEF,OAAO,CACVG,CAAC,CAAEF,OACL,CAAC,CAAC,CACFG,MAAM,CAACC,aAAa,CAACV,SAAS,CAACW,OAAO,CAAC,CACzC,CACA,QAAS,CAAAC,WAAWA,CAACV,CAAC,CAAE,CACtB,GAAI,CAAChB,aAAa,CAAE,OACpBgB,CAAC,CAACW,cAAc,CAAC,CAAC,CAClB,GAAI,CAAAC,YAAY,CAAGZ,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC,CAC7BC,OAAO,CAAGS,YAAY,CAACT,OAAO,CAC9BC,OAAO,CAAGQ,YAAY,CAACR,OAAO,CAChCnB,gBAAgB,CAAC,CACfoB,CAAC,CAAEF,OAAO,CACVG,CAAC,CAAEF,OACL,CAAC,CAAC,CACF,GAAI,CAAAS,OAAO,CAAGV,OAAO,CAAGnB,aAAa,CAACqB,CAAC,CACvC,GAAI,CAAAS,OAAO,CAAGV,OAAO,CAAGpB,aAAa,CAACsB,CAAC,CACvCzB,QAAQ,CAACgC,OAAO,CAAEC,OAAO,CAAC,CAC1B,GAAI,CAAAC,GAAG,CAAGC,IAAI,CAACD,GAAG,CAAC,CAAC,CACpB1B,gBAAgB,CAAC0B,GAAG,CAAC,CACrBtB,eAAe,CAACsB,GAAG,CAAG3B,aAAa,CAAC,CACpCS,aAAa,CAAC,CACZQ,CAAC,CAAEQ,OAAO,CACVP,CAAC,CAAEQ,OACL,CAAC,CAAC,CACJ,CACA,QAAS,CAAAG,UAAUA,CAAA,CAAG,CACpB,GAAI,CAACjC,aAAa,CAAE,OACpBC,gBAAgB,CAAC,IAAI,CAAC,CACtBY,aAAa,CAAC,IAAI,CAAC,CAEnB;AACA,GAAID,UAAU,CAAE,CACd,GAAI,CAAAsB,SAAS,CAAGtB,UAAU,CAACS,CAAC,CAAGb,YAAY,CAC3C,GAAI,CAAA2B,SAAS,CAAGvB,UAAU,CAACU,CAAC,CAAGd,YAAY,CAC3C,GAAI,CAAA4B,IAAI,CAAG3C,IAAI,CAAC4C,GAAG,CAACH,SAAS,CAAC,CAC9B,GAAI,CAAAI,IAAI,CAAG7C,IAAI,CAAC4C,GAAG,CAACF,SAAS,CAAC,CAE9B;AACA,GAAI1C,IAAI,CAAC8C,GAAG,CAACH,IAAI,CAAEE,IAAI,CAAC,CAAGjD,kBAAkB,CAAE,OAC/C,GAAI,CAAAmD,QAAQ,CAAGN,SAAS,CACxB,GAAI,CAAAO,QAAQ,CAAGN,SAAS,CACxBrB,SAAS,CAACW,OAAO,CAAGF,MAAM,CAACmB,WAAW,CAAC,UAAY,CACjD,GAAIjD,IAAI,CAAC4C,GAAG,CAACG,QAAQ,CAAC,CAAGlD,mBAAmB,EAAIG,IAAI,CAAC4C,GAAG,CAACI,QAAQ,CAAC,CAAGnD,mBAAmB,CAAE,CACxFiC,MAAM,CAACC,aAAa,CAACV,SAAS,CAACW,OAAO,CAAC,CACvC,OACF,CACAe,QAAQ,EAAIhD,kBAAkB,CAC9BiD,QAAQ,EAAIjD,kBAAkB,CAC9BK,QAAQ,CAAC2C,QAAQ,CAAGjD,gBAAgB,CAAEkD,QAAQ,CAAGlD,gBAAgB,CAAC,CACpE,CAAC,CAAEA,gBAAgB,CAAC,CACtB,CACF,CAEA;AACA,GAAI,CAAAoD,qBAAqB,CAAGxD,MAAM,CAAC,CAAC,CACpC,QAAS,CAAAyD,OAAOA,CAAC5B,CAAC,CAAE,CAClB,GAAI,CAAA6B,MAAM,CAAG7B,CAAC,CAAC6B,MAAM,CACnBC,MAAM,CAAG9B,CAAC,CAAC8B,MAAM,CAEnB;AACA,GAAI,CAAAC,KAAK,CAAG,CAAC,CACb,GAAI,CAAAX,IAAI,CAAG3C,IAAI,CAAC4C,GAAG,CAACQ,MAAM,CAAC,CAC3B,GAAI,CAAAP,IAAI,CAAG7C,IAAI,CAAC4C,GAAG,CAACS,MAAM,CAAC,CAC3B,GAAIV,IAAI,GAAKE,IAAI,CAAE,CACjBS,KAAK,CAAGJ,qBAAqB,CAAClB,OAAO,GAAK,GAAG,CAAGoB,MAAM,CAAGC,MAAM,CACjE,CAAC,IAAM,IAAIV,IAAI,CAAGE,IAAI,CAAE,CACtBS,KAAK,CAAGF,MAAM,CACdF,qBAAqB,CAAClB,OAAO,CAAG,GAAG,CACrC,CAAC,IAAM,CACLsB,KAAK,CAAGD,MAAM,CACdH,qBAAqB,CAAClB,OAAO,CAAG,GAAG,CACrC,CACA,GAAI5B,QAAQ,CAAC,CAACkD,KAAK,CAAE,CAACA,KAAK,CAAC,CAAE,CAC5B/B,CAAC,CAACW,cAAc,CAAC,CAAC,CACpB,CACF,CAEA;AACA,GAAI,CAAAqB,cAAc,CAAG7D,MAAM,CAAC,IAAI,CAAC,CACjC6D,cAAc,CAACvB,OAAO,CAAG,CACvBV,YAAY,CAAEA,YAAY,CAC1BW,WAAW,CAAEA,WAAW,CACxBO,UAAU,CAAEA,UAAU,CACtBW,OAAO,CAAEA,OACX,CAAC,CACD1D,KAAK,CAAC+D,SAAS,CAAC,UAAY,CAC1B,QAAS,CAAAC,iBAAiBA,CAAClC,CAAC,CAAE,CAC5BgC,cAAc,CAACvB,OAAO,CAACV,YAAY,CAACC,CAAC,CAAC,CACxC,CACA,QAAS,CAAAmC,gBAAgBA,CAACnC,CAAC,CAAE,CAC3BgC,cAAc,CAACvB,OAAO,CAACC,WAAW,CAACV,CAAC,CAAC,CACvC,CACA,QAAS,CAAAoC,eAAeA,CAACpC,CAAC,CAAE,CAC1BgC,cAAc,CAACvB,OAAO,CAACQ,UAAU,CAACjB,CAAC,CAAC,CACtC,CACA,QAAS,CAAAqC,YAAYA,CAACrC,CAAC,CAAE,CACvBgC,cAAc,CAACvB,OAAO,CAACmB,OAAO,CAAC5B,CAAC,CAAC,CACnC,CACAsC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEJ,gBAAgB,CAAE,CACvDK,OAAO,CAAE,KACX,CAAC,CAAC,CACFF,QAAQ,CAACC,gBAAgB,CAAC,UAAU,CAAEH,eAAe,CAAE,CACrDI,OAAO,CAAE,KACX,CAAC,CAAC,CAEF;AACA5D,GAAG,CAAC6B,OAAO,CAAC8B,gBAAgB,CAAC,YAAY,CAAEL,iBAAiB,CAAE,CAC5DM,OAAO,CAAE,KACX,CAAC,CAAC,CACF5D,GAAG,CAAC6B,OAAO,CAAC8B,gBAAgB,CAAC,OAAO,CAAEF,YAAY,CAAC,CACnD,MAAO,WAAY,CACjBC,QAAQ,CAACG,mBAAmB,CAAC,WAAW,CAAEN,gBAAgB,CAAC,CAC3DG,QAAQ,CAACG,mBAAmB,CAAC,UAAU,CAAEL,eAAe,CAAC,CAC3D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CACR","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}