{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import{getFocusNodeList}from\"rc-util/es/Dom/focus\";import KeyCode from\"rc-util/es/KeyCode\";import raf from\"rc-util/es/raf\";import*as React from'react';import{getMenuId}from\"../context/IdContext\";// destruct to reduce minify size\nvar LEFT=KeyCode.LEFT,RIGHT=KeyCode.RIGHT,UP=KeyCode.UP,DOWN=KeyCode.DOWN,ENTER=KeyCode.ENTER,ESC=KeyCode.ESC,HOME=KeyCode.HOME,END=KeyCode.END;var ArrowKeys=[UP,DOWN,LEFT,RIGHT];function getOffset(mode,isRootLevel,isRtl,which){var _offsets;var prev='prev';var next='next';var children='children';var parent='parent';// Inline enter is special that we use unique operation\nif(mode==='inline'&&which===ENTER){return{inlineTrigger:true};}var inline=_defineProperty(_defineProperty({},UP,prev),DOWN,next);var horizontal=_defineProperty(_defineProperty(_defineProperty(_defineProperty({},LEFT,isRtl?next:prev),RIGHT,isRtl?prev:next),DOWN,children),ENTER,children);var vertical=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},UP,prev),DOWN,next),ENTER,children),ESC,parent),LEFT,isRtl?children:parent),RIGHT,isRtl?parent:children);var offsets={inline:inline,horizontal:horizontal,vertical:vertical,inlineSub:inline,horizontalSub:vertical,verticalSub:vertical};var type=(_offsets=offsets[\"\".concat(mode).concat(isRootLevel?'':'Sub')])===null||_offsets===void 0?void 0:_offsets[which];switch(type){case prev:return{offset:-1,sibling:true};case next:return{offset:1,sibling:true};case parent:return{offset:-1,sibling:false};case children:return{offset:1,sibling:false};default:return null;}}function findContainerUL(element){var current=element;while(current){if(current.getAttribute('data-menu-list')){return current;}current=current.parentElement;}// Normally should not reach this line\n/* istanbul ignore next */return null;}/**\n * Find focused element within element set provided\n */function getFocusElement(activeElement,elements){var current=activeElement||document.activeElement;while(current){if(elements.has(current)){return current;}current=current.parentElement;}return null;}/**\n * Get focusable elements from the element set under provided container\n */export function getFocusableElements(container,elements){var list=getFocusNodeList(container,true);return list.filter(function(ele){return elements.has(ele);});}function getNextFocusElement(parentQueryContainer,elements,focusMenuElement){var offset=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;// Key on the menu item will not get validate parent container\nif(!parentQueryContainer){return null;}// List current level menu item elements\nvar sameLevelFocusableMenuElementList=getFocusableElements(parentQueryContainer,elements);// Find next focus index\nvar count=sameLevelFocusableMenuElementList.length;var focusIndex=sameLevelFocusableMenuElementList.findIndex(function(ele){return focusMenuElement===ele;});if(offset<0){if(focusIndex===-1){focusIndex=count-1;}else{focusIndex-=1;}}else if(offset>0){focusIndex+=1;}focusIndex=(focusIndex+count)%count;// Focus menu item\nreturn sameLevelFocusableMenuElementList[focusIndex];}export var refreshElements=function refreshElements(keys,id){var elements=new Set();var key2element=new Map();var element2key=new Map();keys.forEach(function(key){var element=document.querySelector(\"[data-menu-id='\".concat(getMenuId(id,key),\"']\"));if(element){elements.add(element);element2key.set(element,key);key2element.set(key,element);}});return{elements:elements,key2element:key2element,element2key:element2key};};export function useAccessibility(mode,activeKey,isRtl,id,containerRef,getKeys,getKeyPath,triggerActiveKey,triggerAccessibilityOpen,originOnKeyDown){var rafRef=React.useRef();var activeRef=React.useRef();activeRef.current=activeKey;var cleanRaf=function cleanRaf(){raf.cancel(rafRef.current);};React.useEffect(function(){return function(){cleanRaf();};},[]);return function(e){var which=e.which;if([].concat(ArrowKeys,[ENTER,ESC,HOME,END]).includes(which)){var keys=getKeys();var refreshedElements=refreshElements(keys,id);var _refreshedElements=refreshedElements,elements=_refreshedElements.elements,key2element=_refreshedElements.key2element,element2key=_refreshedElements.element2key;// First we should find current focused MenuItem/SubMenu element\nvar activeElement=key2element.get(activeKey);var focusMenuElement=getFocusElement(activeElement,elements);var focusMenuKey=element2key.get(focusMenuElement);var offsetObj=getOffset(mode,getKeyPath(focusMenuKey,true).length===1,isRtl,which);// Some mode do not have fully arrow operation like inline\nif(!offsetObj&&which!==HOME&&which!==END){return;}// Arrow prevent default to avoid page scroll\nif(ArrowKeys.includes(which)||[HOME,END].includes(which)){e.preventDefault();}var tryFocus=function tryFocus(menuElement){if(menuElement){var focusTargetElement=menuElement;// Focus to link instead of menu item if possible\nvar link=menuElement.querySelector('a');if(link!==null&&link!==void 0&&link.getAttribute('href')){focusTargetElement=link;}var targetKey=element2key.get(menuElement);triggerActiveKey(targetKey);/**\n           * Do not `useEffect` here since `tryFocus` may trigger async\n           * which makes React sync update the `activeKey`\n           * that force render before `useRef` set the next activeKey\n           */cleanRaf();rafRef.current=raf(function(){if(activeRef.current===targetKey){focusTargetElement.focus();}});}};if([HOME,END].includes(which)||offsetObj.sibling||!focusMenuElement){// ========================== Sibling ==========================\n// Find walkable focus menu element container\nvar parentQueryContainer;if(!focusMenuElement||mode==='inline'){parentQueryContainer=containerRef.current;}else{parentQueryContainer=findContainerUL(focusMenuElement);}// Get next focus element\nvar targetElement;var focusableElements=getFocusableElements(parentQueryContainer,elements);if(which===HOME){targetElement=focusableElements[0];}else if(which===END){targetElement=focusableElements[focusableElements.length-1];}else{targetElement=getNextFocusElement(parentQueryContainer,elements,focusMenuElement,offsetObj.offset);}// Focus menu item\ntryFocus(targetElement);// ======================= InlineTrigger =======================\n}else if(offsetObj.inlineTrigger){// Inline trigger no need switch to sub menu item\ntriggerAccessibilityOpen(focusMenuKey);// =========================== Level ===========================\n}else if(offsetObj.offset>0){triggerAccessibilityOpen(focusMenuKey,true);cleanRaf();rafRef.current=raf(function(){// Async should resync elements\nrefreshedElements=refreshElements(keys,id);var controlId=focusMenuElement.getAttribute('aria-controls');var subQueryContainer=document.getElementById(controlId);// Get sub focusable menu item\nvar targetElement=getNextFocusElement(subQueryContainer,refreshedElements.elements);// Focus menu item\ntryFocus(targetElement);},5);}else if(offsetObj.offset<0){var keyPath=getKeyPath(focusMenuKey,true);var parentKey=keyPath[keyPath.length-2];var parentMenuElement=key2element.get(parentKey);// Focus menu item\ntriggerAccessibilityOpen(parentKey,false);tryFocus(parentMenuElement);}}// Pass origin key down event\noriginOnKeyDown===null||originOnKeyDown===void 0||originOnKeyDown(e);};}","map":{"version":3,"names":["_defineProperty","getFocusNodeList","KeyCode","raf","React","getMenuId","LEFT","RIGHT","UP","DOWN","ENTER","ESC","HOME","END","ArrowKeys","getOffset","mode","isRootLevel","isRtl","which","_offsets","prev","next","children","parent","inlineTrigger","inline","horizontal","vertical","offsets","inlineSub","horizontalSub","verticalSub","type","concat","offset","sibling","findContainerUL","element","current","getAttribute","parentElement","getFocusElement","activeElement","elements","document","has","getFocusableElements","container","list","filter","ele","getNextFocusElement","parentQueryContainer","focusMenuElement","arguments","length","undefined","sameLevelFocusableMenuElementList","count","focusIndex","findIndex","refreshElements","keys","id","Set","key2element","Map","element2key","forEach","key","querySelector","add","set","useAccessibility","activeKey","containerRef","getKeys","getKeyPath","triggerActiveKey","triggerAccessibilityOpen","originOnKeyDown","rafRef","useRef","activeRef","cleanRaf","cancel","useEffect","e","includes","refreshedElements","_refreshedElements","get","focusMenuKey","offsetObj","preventDefault","tryFocus","menuElement","focusTargetElement","link","targetKey","focus","targetElement","focusableElements","controlId","subQueryContainer","getElementById","keyPath","parentKey","parentMenuElement"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-menu/es/hooks/useAccessibility.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { getFocusNodeList } from \"rc-util/es/Dom/focus\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport raf from \"rc-util/es/raf\";\nimport * as React from 'react';\nimport { getMenuId } from \"../context/IdContext\";\n// destruct to reduce minify size\nvar LEFT = KeyCode.LEFT,\n  RIGHT = KeyCode.RIGHT,\n  UP = KeyCode.UP,\n  DOWN = KeyCode.DOWN,\n  ENTER = KeyCode.ENTER,\n  ESC = KeyCode.ESC,\n  HOME = KeyCode.HOME,\n  END = KeyCode.END;\nvar ArrowKeys = [UP, DOWN, LEFT, RIGHT];\nfunction getOffset(mode, isRootLevel, isRtl, which) {\n  var _offsets;\n  var prev = 'prev';\n  var next = 'next';\n  var children = 'children';\n  var parent = 'parent';\n\n  // Inline enter is special that we use unique operation\n  if (mode === 'inline' && which === ENTER) {\n    return {\n      inlineTrigger: true\n    };\n  }\n  var inline = _defineProperty(_defineProperty({}, UP, prev), DOWN, next);\n  var horizontal = _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, LEFT, isRtl ? next : prev), RIGHT, isRtl ? prev : next), DOWN, children), ENTER, children);\n  var vertical = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, UP, prev), DOWN, next), ENTER, children), ESC, parent), LEFT, isRtl ? children : parent), RIGHT, isRtl ? parent : children);\n  var offsets = {\n    inline: inline,\n    horizontal: horizontal,\n    vertical: vertical,\n    inlineSub: inline,\n    horizontalSub: vertical,\n    verticalSub: vertical\n  };\n  var type = (_offsets = offsets[\"\".concat(mode).concat(isRootLevel ? '' : 'Sub')]) === null || _offsets === void 0 ? void 0 : _offsets[which];\n  switch (type) {\n    case prev:\n      return {\n        offset: -1,\n        sibling: true\n      };\n    case next:\n      return {\n        offset: 1,\n        sibling: true\n      };\n    case parent:\n      return {\n        offset: -1,\n        sibling: false\n      };\n    case children:\n      return {\n        offset: 1,\n        sibling: false\n      };\n    default:\n      return null;\n  }\n}\nfunction findContainerUL(element) {\n  var current = element;\n  while (current) {\n    if (current.getAttribute('data-menu-list')) {\n      return current;\n    }\n    current = current.parentElement;\n  }\n\n  // Normally should not reach this line\n  /* istanbul ignore next */\n  return null;\n}\n\n/**\n * Find focused element within element set provided\n */\nfunction getFocusElement(activeElement, elements) {\n  var current = activeElement || document.activeElement;\n  while (current) {\n    if (elements.has(current)) {\n      return current;\n    }\n    current = current.parentElement;\n  }\n  return null;\n}\n\n/**\n * Get focusable elements from the element set under provided container\n */\nexport function getFocusableElements(container, elements) {\n  var list = getFocusNodeList(container, true);\n  return list.filter(function (ele) {\n    return elements.has(ele);\n  });\n}\nfunction getNextFocusElement(parentQueryContainer, elements, focusMenuElement) {\n  var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  // Key on the menu item will not get validate parent container\n  if (!parentQueryContainer) {\n    return null;\n  }\n\n  // List current level menu item elements\n  var sameLevelFocusableMenuElementList = getFocusableElements(parentQueryContainer, elements);\n\n  // Find next focus index\n  var count = sameLevelFocusableMenuElementList.length;\n  var focusIndex = sameLevelFocusableMenuElementList.findIndex(function (ele) {\n    return focusMenuElement === ele;\n  });\n  if (offset < 0) {\n    if (focusIndex === -1) {\n      focusIndex = count - 1;\n    } else {\n      focusIndex -= 1;\n    }\n  } else if (offset > 0) {\n    focusIndex += 1;\n  }\n  focusIndex = (focusIndex + count) % count;\n\n  // Focus menu item\n  return sameLevelFocusableMenuElementList[focusIndex];\n}\nexport var refreshElements = function refreshElements(keys, id) {\n  var elements = new Set();\n  var key2element = new Map();\n  var element2key = new Map();\n  keys.forEach(function (key) {\n    var element = document.querySelector(\"[data-menu-id='\".concat(getMenuId(id, key), \"']\"));\n    if (element) {\n      elements.add(element);\n      element2key.set(element, key);\n      key2element.set(key, element);\n    }\n  });\n  return {\n    elements: elements,\n    key2element: key2element,\n    element2key: element2key\n  };\n};\nexport function useAccessibility(mode, activeKey, isRtl, id, containerRef, getKeys, getKeyPath, triggerActiveKey, triggerAccessibilityOpen, originOnKeyDown) {\n  var rafRef = React.useRef();\n  var activeRef = React.useRef();\n  activeRef.current = activeKey;\n  var cleanRaf = function cleanRaf() {\n    raf.cancel(rafRef.current);\n  };\n  React.useEffect(function () {\n    return function () {\n      cleanRaf();\n    };\n  }, []);\n  return function (e) {\n    var which = e.which;\n    if ([].concat(ArrowKeys, [ENTER, ESC, HOME, END]).includes(which)) {\n      var keys = getKeys();\n      var refreshedElements = refreshElements(keys, id);\n      var _refreshedElements = refreshedElements,\n        elements = _refreshedElements.elements,\n        key2element = _refreshedElements.key2element,\n        element2key = _refreshedElements.element2key;\n\n      // First we should find current focused MenuItem/SubMenu element\n      var activeElement = key2element.get(activeKey);\n      var focusMenuElement = getFocusElement(activeElement, elements);\n      var focusMenuKey = element2key.get(focusMenuElement);\n      var offsetObj = getOffset(mode, getKeyPath(focusMenuKey, true).length === 1, isRtl, which);\n\n      // Some mode do not have fully arrow operation like inline\n      if (!offsetObj && which !== HOME && which !== END) {\n        return;\n      }\n\n      // Arrow prevent default to avoid page scroll\n      if (ArrowKeys.includes(which) || [HOME, END].includes(which)) {\n        e.preventDefault();\n      }\n      var tryFocus = function tryFocus(menuElement) {\n        if (menuElement) {\n          var focusTargetElement = menuElement;\n\n          // Focus to link instead of menu item if possible\n          var link = menuElement.querySelector('a');\n          if (link !== null && link !== void 0 && link.getAttribute('href')) {\n            focusTargetElement = link;\n          }\n          var targetKey = element2key.get(menuElement);\n          triggerActiveKey(targetKey);\n\n          /**\n           * Do not `useEffect` here since `tryFocus` may trigger async\n           * which makes React sync update the `activeKey`\n           * that force render before `useRef` set the next activeKey\n           */\n          cleanRaf();\n          rafRef.current = raf(function () {\n            if (activeRef.current === targetKey) {\n              focusTargetElement.focus();\n            }\n          });\n        }\n      };\n      if ([HOME, END].includes(which) || offsetObj.sibling || !focusMenuElement) {\n        // ========================== Sibling ==========================\n        // Find walkable focus menu element container\n        var parentQueryContainer;\n        if (!focusMenuElement || mode === 'inline') {\n          parentQueryContainer = containerRef.current;\n        } else {\n          parentQueryContainer = findContainerUL(focusMenuElement);\n        }\n\n        // Get next focus element\n        var targetElement;\n        var focusableElements = getFocusableElements(parentQueryContainer, elements);\n        if (which === HOME) {\n          targetElement = focusableElements[0];\n        } else if (which === END) {\n          targetElement = focusableElements[focusableElements.length - 1];\n        } else {\n          targetElement = getNextFocusElement(parentQueryContainer, elements, focusMenuElement, offsetObj.offset);\n        }\n        // Focus menu item\n        tryFocus(targetElement);\n\n        // ======================= InlineTrigger =======================\n      } else if (offsetObj.inlineTrigger) {\n        // Inline trigger no need switch to sub menu item\n        triggerAccessibilityOpen(focusMenuKey);\n        // =========================== Level ===========================\n      } else if (offsetObj.offset > 0) {\n        triggerAccessibilityOpen(focusMenuKey, true);\n        cleanRaf();\n        rafRef.current = raf(function () {\n          // Async should resync elements\n          refreshedElements = refreshElements(keys, id);\n          var controlId = focusMenuElement.getAttribute('aria-controls');\n          var subQueryContainer = document.getElementById(controlId);\n\n          // Get sub focusable menu item\n          var targetElement = getNextFocusElement(subQueryContainer, refreshedElements.elements);\n\n          // Focus menu item\n          tryFocus(targetElement);\n        }, 5);\n      } else if (offsetObj.offset < 0) {\n        var keyPath = getKeyPath(focusMenuKey, true);\n        var parentKey = keyPath[keyPath.length - 2];\n        var parentMenuElement = key2element.get(parentKey);\n\n        // Focus menu item\n        triggerAccessibilityOpen(parentKey, false);\n        tryFocus(parentMenuElement);\n      }\n    }\n\n    // Pass origin key down event\n    originOnKeyDown === null || originOnKeyDown === void 0 || originOnKeyDown(e);\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}