{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import useEvent from\"rc-util/es/hooks/useEvent\";import useLayoutEffect from\"rc-util/es/hooks/useLayoutEffect\";import{useMemo,useState}from'react';import{isInViewPort}from\"../util\";export default function useTarget(target,open,gap,scrollIntoViewOptions){// ========================= Target =========================\n// We trade `undefined` as not get target by function yet.\n// `null` as empty target.\nvar _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),targetElement=_useState2[0],setTargetElement=_useState2[1];useLayoutEffect(function(){var nextElement=typeof target==='function'?target():target;setTargetElement(nextElement||null);});// ========================= Align ==========================\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),posInfo=_useState4[0],setPosInfo=_useState4[1];var updatePos=useEvent(function(){if(targetElement){// Exist target element. We should scroll and get target position\nif(!isInViewPort(targetElement)&&open){targetElement.scrollIntoView(scrollIntoViewOptions);}var _targetElement$getBou=targetElement.getBoundingClientRect(),left=_targetElement$getBou.left,top=_targetElement$getBou.top,width=_targetElement$getBou.width,height=_targetElement$getBou.height;var nextPosInfo={left:left,top:top,width:width,height:height,radius:0};setPosInfo(function(origin){if(JSON.stringify(origin)!==JSON.stringify(nextPosInfo)){return nextPosInfo;}return origin;});}else{// Not exist target which means we just show in center\nsetPosInfo(null);}});var getGapOffset=function getGapOffset(index){var _ref;return(_ref=Array.isArray(gap===null||gap===void 0?void 0:gap.offset)?gap===null||gap===void 0?void 0:gap.offset[index]:gap===null||gap===void 0?void 0:gap.offset)!==null&&_ref!==void 0?_ref:6;};useLayoutEffect(function(){updatePos();// update when window resize\nwindow.addEventListener('resize',updatePos);return function(){window.removeEventListener('resize',updatePos);};},[targetElement,open,updatePos]);// ======================== PosInfo =========================\nvar mergedPosInfo=useMemo(function(){if(!posInfo){return posInfo;}var gapOffsetX=getGapOffset(0);var gapOffsetY=getGapOffset(1);var gapRadius=(gap===null||gap===void 0?void 0:gap.radius)||2;return{left:posInfo.left-gapOffsetX,top:posInfo.top-gapOffsetY,width:posInfo.width+gapOffsetX*2,height:posInfo.height+gapOffsetY*2,radius:gapRadius};},[posInfo,gap]);return[mergedPosInfo,targetElement];}","map":{"version":3,"names":["_slicedToArray","useEvent","useLayoutEffect","useMemo","useState","isInViewPort","useTarget","target","open","gap","scrollIntoViewOptions","_useState","undefined","_useState2","targetElement","setTargetElement","nextElement","_useState3","_useState4","posInfo","setPosInfo","updatePos","scrollIntoView","_targetElement$getBou","getBoundingClientRect","left","top","width","height","nextPosInfo","radius","origin","JSON","stringify","getGapOffset","index","_ref","Array","isArray","offset","window","addEventListener","removeEventListener","mergedPosInfo","gapOffsetX","gapOffsetY","gapRadius"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/@rc-component/tour/es/hooks/useTarget.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport { useMemo, useState } from 'react';\nimport { isInViewPort } from \"../util\";\nexport default function useTarget(target, open, gap, scrollIntoViewOptions) {\n  // ========================= Target =========================\n  // We trade `undefined` as not get target by function yet.\n  // `null` as empty target.\n  var _useState = useState(undefined),\n    _useState2 = _slicedToArray(_useState, 2),\n    targetElement = _useState2[0],\n    setTargetElement = _useState2[1];\n  useLayoutEffect(function () {\n    var nextElement = typeof target === 'function' ? target() : target;\n    setTargetElement(nextElement || null);\n  });\n\n  // ========================= Align ==========================\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    posInfo = _useState4[0],\n    setPosInfo = _useState4[1];\n  var updatePos = useEvent(function () {\n    if (targetElement) {\n      // Exist target element. We should scroll and get target position\n      if (!isInViewPort(targetElement) && open) {\n        targetElement.scrollIntoView(scrollIntoViewOptions);\n      }\n      var _targetElement$getBou = targetElement.getBoundingClientRect(),\n        left = _targetElement$getBou.left,\n        top = _targetElement$getBou.top,\n        width = _targetElement$getBou.width,\n        height = _targetElement$getBou.height;\n      var nextPosInfo = {\n        left: left,\n        top: top,\n        width: width,\n        height: height,\n        radius: 0\n      };\n      setPosInfo(function (origin) {\n        if (JSON.stringify(origin) !== JSON.stringify(nextPosInfo)) {\n          return nextPosInfo;\n        }\n        return origin;\n      });\n    } else {\n      // Not exist target which means we just show in center\n      setPosInfo(null);\n    }\n  });\n  var getGapOffset = function getGapOffset(index) {\n    var _ref;\n    return (_ref = Array.isArray(gap === null || gap === void 0 ? void 0 : gap.offset) ? gap === null || gap === void 0 ? void 0 : gap.offset[index] : gap === null || gap === void 0 ? void 0 : gap.offset) !== null && _ref !== void 0 ? _ref : 6;\n  };\n  useLayoutEffect(function () {\n    updatePos();\n    // update when window resize\n    window.addEventListener('resize', updatePos);\n    return function () {\n      window.removeEventListener('resize', updatePos);\n    };\n  }, [targetElement, open, updatePos]);\n\n  // ======================== PosInfo =========================\n  var mergedPosInfo = useMemo(function () {\n    if (!posInfo) {\n      return posInfo;\n    }\n    var gapOffsetX = getGapOffset(0);\n    var gapOffsetY = getGapOffset(1);\n    var gapRadius = (gap === null || gap === void 0 ? void 0 : gap.radius) || 2;\n    return {\n      left: posInfo.left - gapOffsetX,\n      top: posInfo.top - gapOffsetY,\n      width: posInfo.width + gapOffsetX * 2,\n      height: posInfo.height + gapOffsetY * 2,\n      radius: gapRadius\n    };\n  }, [posInfo, gap]);\n  return [mergedPosInfo, targetElement];\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}