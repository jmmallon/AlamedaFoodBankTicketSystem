{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useRef,useState}from'react';import{isImageValid}from\"../util\";export default function useStatus(_ref){var src=_ref.src,isCustomPlaceholder=_ref.isCustomPlaceholder,fallback=_ref.fallback;var _useState=useState(isCustomPlaceholder?'loading':'normal'),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var isLoaded=useRef(false);var isError=status==='error';// https://github.com/react-component/image/pull/187\nuseEffect(function(){var isCurrentSrc=true;isImageValid(src).then(function(isValid){// https://github.com/ant-design/ant-design/issues/44948\n// If src changes, the previous setStatus should not be triggered\nif(!isValid&&isCurrentSrc){setStatus('error');}});return function(){isCurrentSrc=false;};},[src]);useEffect(function(){if(isCustomPlaceholder&&!isLoaded.current){setStatus('loading');}else if(isError){setStatus('normal');}},[src]);var onLoad=function onLoad(){setStatus('normal');};var getImgRef=function getImgRef(img){isLoaded.current=false;if(status==='loading'&&img!==null&&img!==void 0&&img.complete&&(img.naturalWidth||img.naturalHeight)){isLoaded.current=true;onLoad();}};var srcAndOnload=isError&&fallback?{src:fallback}:{onLoad:onLoad,src:src};return[getImgRef,srcAndOnload,status];}","map":{"version":3,"names":["_slicedToArray","useEffect","useRef","useState","isImageValid","useStatus","_ref","src","isCustomPlaceholder","fallback","_useState","_useState2","status","setStatus","isLoaded","isError","isCurrentSrc","then","isValid","current","onLoad","getImgRef","img","complete","naturalWidth","naturalHeight","srcAndOnload"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-image/es/hooks/useStatus.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\nimport { isImageValid } from \"../util\";\nexport default function useStatus(_ref) {\n  var src = _ref.src,\n    isCustomPlaceholder = _ref.isCustomPlaceholder,\n    fallback = _ref.fallback;\n  var _useState = useState(isCustomPlaceholder ? 'loading' : 'normal'),\n    _useState2 = _slicedToArray(_useState, 2),\n    status = _useState2[0],\n    setStatus = _useState2[1];\n  var isLoaded = useRef(false);\n  var isError = status === 'error';\n\n  // https://github.com/react-component/image/pull/187\n  useEffect(function () {\n    var isCurrentSrc = true;\n    isImageValid(src).then(function (isValid) {\n      // https://github.com/ant-design/ant-design/issues/44948\n      // If src changes, the previous setStatus should not be triggered\n      if (!isValid && isCurrentSrc) {\n        setStatus('error');\n      }\n    });\n    return function () {\n      isCurrentSrc = false;\n    };\n  }, [src]);\n  useEffect(function () {\n    if (isCustomPlaceholder && !isLoaded.current) {\n      setStatus('loading');\n    } else if (isError) {\n      setStatus('normal');\n    }\n  }, [src]);\n  var onLoad = function onLoad() {\n    setStatus('normal');\n  };\n  var getImgRef = function getImgRef(img) {\n    isLoaded.current = false;\n    if (status === 'loading' && img !== null && img !== void 0 && img.complete && (img.naturalWidth || img.naturalHeight)) {\n      isLoaded.current = true;\n      onLoad();\n    }\n  };\n  var srcAndOnload = isError && fallback ? {\n    src: fallback\n  } : {\n    onLoad: onLoad,\n    src: src\n  };\n  return [getImgRef, srcAndOnload, status];\n}"],"mappings":"AAAA,MAAO,CAAAA,cAAc,KAAM,0CAA0C,CACrE,OAASC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACnD,OAASC,YAAY,KAAQ,SAAS,CACtC,cAAe,SAAS,CAAAC,SAASA,CAACC,IAAI,CAAE,CACtC,GAAI,CAAAC,GAAG,CAAGD,IAAI,CAACC,GAAG,CAChBC,mBAAmB,CAAGF,IAAI,CAACE,mBAAmB,CAC9CC,QAAQ,CAAGH,IAAI,CAACG,QAAQ,CAC1B,GAAI,CAAAC,SAAS,CAAGP,QAAQ,CAACK,mBAAmB,CAAG,SAAS,CAAG,QAAQ,CAAC,CAClEG,UAAU,CAAGX,cAAc,CAACU,SAAS,CAAE,CAAC,CAAC,CACzCE,MAAM,CAAGD,UAAU,CAAC,CAAC,CAAC,CACtBE,SAAS,CAAGF,UAAU,CAAC,CAAC,CAAC,CAC3B,GAAI,CAAAG,QAAQ,CAAGZ,MAAM,CAAC,KAAK,CAAC,CAC5B,GAAI,CAAAa,OAAO,CAAGH,MAAM,GAAK,OAAO,CAEhC;AACAX,SAAS,CAAC,UAAY,CACpB,GAAI,CAAAe,YAAY,CAAG,IAAI,CACvBZ,YAAY,CAACG,GAAG,CAAC,CAACU,IAAI,CAAC,SAAUC,OAAO,CAAE,CACxC;AACA;AACA,GAAI,CAACA,OAAO,EAAIF,YAAY,CAAE,CAC5BH,SAAS,CAAC,OAAO,CAAC,CACpB,CACF,CAAC,CAAC,CACF,MAAO,WAAY,CACjBG,YAAY,CAAG,KAAK,CACtB,CAAC,CACH,CAAC,CAAE,CAACT,GAAG,CAAC,CAAC,CACTN,SAAS,CAAC,UAAY,CACpB,GAAIO,mBAAmB,EAAI,CAACM,QAAQ,CAACK,OAAO,CAAE,CAC5CN,SAAS,CAAC,SAAS,CAAC,CACtB,CAAC,IAAM,IAAIE,OAAO,CAAE,CAClBF,SAAS,CAAC,QAAQ,CAAC,CACrB,CACF,CAAC,CAAE,CAACN,GAAG,CAAC,CAAC,CACT,GAAI,CAAAa,MAAM,CAAG,QAAS,CAAAA,MAAMA,CAAA,CAAG,CAC7BP,SAAS,CAAC,QAAQ,CAAC,CACrB,CAAC,CACD,GAAI,CAAAQ,SAAS,CAAG,QAAS,CAAAA,SAASA,CAACC,GAAG,CAAE,CACtCR,QAAQ,CAACK,OAAO,CAAG,KAAK,CACxB,GAAIP,MAAM,GAAK,SAAS,EAAIU,GAAG,GAAK,IAAI,EAAIA,GAAG,GAAK,IAAK,EAAC,EAAIA,GAAG,CAACC,QAAQ,GAAKD,GAAG,CAACE,YAAY,EAAIF,GAAG,CAACG,aAAa,CAAC,CAAE,CACrHX,QAAQ,CAACK,OAAO,CAAG,IAAI,CACvBC,MAAM,CAAC,CAAC,CACV,CACF,CAAC,CACD,GAAI,CAAAM,YAAY,CAAGX,OAAO,EAAIN,QAAQ,CAAG,CACvCF,GAAG,CAAEE,QACP,CAAC,CAAG,CACFW,MAAM,CAAEA,MAAM,CACdb,GAAG,CAAEA,GACP,CAAC,CACD,MAAO,CAACc,SAAS,CAAEK,YAAY,CAAEd,MAAM,CAAC,CAC1C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}