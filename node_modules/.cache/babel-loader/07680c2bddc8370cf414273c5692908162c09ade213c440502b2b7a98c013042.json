{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import*as React from'react';import{useRef,useCallback}from'react';import warning from\"rc-util/es/warning\";import{nextSlice}from\"../utils/timeUtil\";var PATH_SPLIT='__RC_UTIL_PATH_SPLIT__';var getPathStr=function getPathStr(keyPath){return keyPath.join(PATH_SPLIT);};var getPathKeys=function getPathKeys(keyPathStr){return keyPathStr.split(PATH_SPLIT);};export var OVERFLOW_KEY='rc-menu-more';export default function useKeyRecords(){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),internalForceUpdate=_React$useState2[1];var key2pathRef=useRef(new Map());var path2keyRef=useRef(new Map());var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),overflowKeys=_React$useState4[0],setOverflowKeys=_React$useState4[1];var updateRef=useRef(0);var destroyRef=useRef(false);var forceUpdate=function forceUpdate(){if(!destroyRef.current){internalForceUpdate({});}};var registerPath=useCallback(function(key,keyPath){// Warning for invalidate or duplicated `key`\nif(process.env.NODE_ENV!=='production'){warning(!key2pathRef.current.has(key),\"Duplicated key '\".concat(key,\"' used in Menu by path [\").concat(keyPath.join(' > '),\"]\"));}// Fill map\nvar connectedPath=getPathStr(keyPath);path2keyRef.current.set(connectedPath,key);key2pathRef.current.set(key,connectedPath);updateRef.current+=1;var id=updateRef.current;nextSlice(function(){if(id===updateRef.current){forceUpdate();}});},[]);var unregisterPath=useCallback(function(key,keyPath){var connectedPath=getPathStr(keyPath);path2keyRef.current.delete(connectedPath);key2pathRef.current.delete(key);},[]);var refreshOverflowKeys=useCallback(function(keys){setOverflowKeys(keys);},[]);var getKeyPath=useCallback(function(eventKey,includeOverflow){var fullPath=key2pathRef.current.get(eventKey)||'';var keys=getPathKeys(fullPath);if(includeOverflow&&overflowKeys.includes(keys[0])){keys.unshift(OVERFLOW_KEY);}return keys;},[overflowKeys]);var isSubPathKey=useCallback(function(pathKeys,eventKey){return pathKeys.some(function(pathKey){var pathKeyList=getKeyPath(pathKey,true);return pathKeyList.includes(eventKey);});},[getKeyPath]);var getKeys=function getKeys(){var keys=_toConsumableArray(key2pathRef.current.keys());if(overflowKeys.length){keys.push(OVERFLOW_KEY);}return keys;};/**\n   * Find current key related child path keys\n   */var getSubPathKeys=useCallback(function(key){var connectedPath=\"\".concat(key2pathRef.current.get(key)).concat(PATH_SPLIT);var pathKeys=new Set();_toConsumableArray(path2keyRef.current.keys()).forEach(function(pathKey){if(pathKey.startsWith(connectedPath)){pathKeys.add(path2keyRef.current.get(pathKey));}});return pathKeys;},[]);React.useEffect(function(){return function(){destroyRef.current=true;};},[]);return{// Register\nregisterPath:registerPath,unregisterPath:unregisterPath,refreshOverflowKeys:refreshOverflowKeys,// Util\nisSubPathKey:isSubPathKey,getKeyPath:getKeyPath,getKeys:getKeys,getSubPathKeys:getSubPathKeys};}","map":{"version":3,"names":["_toConsumableArray","_slicedToArray","React","useRef","useCallback","warning","nextSlice","PATH_SPLIT","getPathStr","keyPath","join","getPathKeys","keyPathStr","split","OVERFLOW_KEY","useKeyRecords","_React$useState","useState","_React$useState2","internalForceUpdate","key2pathRef","Map","path2keyRef","_React$useState3","_React$useState4","overflowKeys","setOverflowKeys","updateRef","destroyRef","forceUpdate","current","registerPath","key","process","env","NODE_ENV","has","concat","connectedPath","set","id","unregisterPath","delete","refreshOverflowKeys","keys","getKeyPath","eventKey","includeOverflow","fullPath","get","includes","unshift","isSubPathKey","pathKeys","some","pathKey","pathKeyList","getKeys","length","push","getSubPathKeys","Set","forEach","startsWith","add","useEffect"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-menu/es/hooks/useKeyRecords.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useRef, useCallback } from 'react';\nimport warning from \"rc-util/es/warning\";\nimport { nextSlice } from \"../utils/timeUtil\";\nvar PATH_SPLIT = '__RC_UTIL_PATH_SPLIT__';\nvar getPathStr = function getPathStr(keyPath) {\n  return keyPath.join(PATH_SPLIT);\n};\nvar getPathKeys = function getPathKeys(keyPathStr) {\n  return keyPathStr.split(PATH_SPLIT);\n};\nexport var OVERFLOW_KEY = 'rc-menu-more';\nexport default function useKeyRecords() {\n  var _React$useState = React.useState({}),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    internalForceUpdate = _React$useState2[1];\n  var key2pathRef = useRef(new Map());\n  var path2keyRef = useRef(new Map());\n  var _React$useState3 = React.useState([]),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    overflowKeys = _React$useState4[0],\n    setOverflowKeys = _React$useState4[1];\n  var updateRef = useRef(0);\n  var destroyRef = useRef(false);\n  var forceUpdate = function forceUpdate() {\n    if (!destroyRef.current) {\n      internalForceUpdate({});\n    }\n  };\n  var registerPath = useCallback(function (key, keyPath) {\n    // Warning for invalidate or duplicated `key`\n    if (process.env.NODE_ENV !== 'production') {\n      warning(!key2pathRef.current.has(key), \"Duplicated key '\".concat(key, \"' used in Menu by path [\").concat(keyPath.join(' > '), \"]\"));\n    }\n\n    // Fill map\n    var connectedPath = getPathStr(keyPath);\n    path2keyRef.current.set(connectedPath, key);\n    key2pathRef.current.set(key, connectedPath);\n    updateRef.current += 1;\n    var id = updateRef.current;\n    nextSlice(function () {\n      if (id === updateRef.current) {\n        forceUpdate();\n      }\n    });\n  }, []);\n  var unregisterPath = useCallback(function (key, keyPath) {\n    var connectedPath = getPathStr(keyPath);\n    path2keyRef.current.delete(connectedPath);\n    key2pathRef.current.delete(key);\n  }, []);\n  var refreshOverflowKeys = useCallback(function (keys) {\n    setOverflowKeys(keys);\n  }, []);\n  var getKeyPath = useCallback(function (eventKey, includeOverflow) {\n    var fullPath = key2pathRef.current.get(eventKey) || '';\n    var keys = getPathKeys(fullPath);\n    if (includeOverflow && overflowKeys.includes(keys[0])) {\n      keys.unshift(OVERFLOW_KEY);\n    }\n    return keys;\n  }, [overflowKeys]);\n  var isSubPathKey = useCallback(function (pathKeys, eventKey) {\n    return pathKeys.some(function (pathKey) {\n      var pathKeyList = getKeyPath(pathKey, true);\n      return pathKeyList.includes(eventKey);\n    });\n  }, [getKeyPath]);\n  var getKeys = function getKeys() {\n    var keys = _toConsumableArray(key2pathRef.current.keys());\n    if (overflowKeys.length) {\n      keys.push(OVERFLOW_KEY);\n    }\n    return keys;\n  };\n\n  /**\n   * Find current key related child path keys\n   */\n  var getSubPathKeys = useCallback(function (key) {\n    var connectedPath = \"\".concat(key2pathRef.current.get(key)).concat(PATH_SPLIT);\n    var pathKeys = new Set();\n    _toConsumableArray(path2keyRef.current.keys()).forEach(function (pathKey) {\n      if (pathKey.startsWith(connectedPath)) {\n        pathKeys.add(path2keyRef.current.get(pathKey));\n      }\n    });\n    return pathKeys;\n  }, []);\n  React.useEffect(function () {\n    return function () {\n      destroyRef.current = true;\n    };\n  }, []);\n  return {\n    // Register\n    registerPath: registerPath,\n    unregisterPath: unregisterPath,\n    refreshOverflowKeys: refreshOverflowKeys,\n    // Util\n    isSubPathKey: isSubPathKey,\n    getKeyPath: getKeyPath,\n    getKeys: getKeys,\n    getSubPathKeys: getSubPathKeys\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}