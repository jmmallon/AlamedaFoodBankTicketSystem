{"ast":null,"code":"import KeyCode from\"rc-util/es/KeyCode\";import raf from\"rc-util/es/raf\";import*as React from\"react\";var ESC=KeyCode.ESC,TAB=KeyCode.TAB;export default function useAccessibility(_ref){var visible=_ref.visible,triggerRef=_ref.triggerRef,onVisibleChange=_ref.onVisibleChange,autoFocus=_ref.autoFocus,overlayRef=_ref.overlayRef;var focusMenuRef=React.useRef(false);var handleCloseMenuAndReturnFocus=function handleCloseMenuAndReturnFocus(){if(visible){var _triggerRef$current,_triggerRef$current$f;(_triggerRef$current=triggerRef.current)===null||_triggerRef$current===void 0||(_triggerRef$current$f=_triggerRef$current.focus)===null||_triggerRef$current$f===void 0||_triggerRef$current$f.call(_triggerRef$current);onVisibleChange===null||onVisibleChange===void 0||onVisibleChange(false);}};var focusMenu=function focusMenu(){var _overlayRef$current;if((_overlayRef$current=overlayRef.current)!==null&&_overlayRef$current!==void 0&&_overlayRef$current.focus){overlayRef.current.focus();focusMenuRef.current=true;return true;}return false;};var handleKeyDown=function handleKeyDown(event){switch(event.keyCode){case ESC:handleCloseMenuAndReturnFocus();break;case TAB:{var focusResult=false;if(!focusMenuRef.current){focusResult=focusMenu();}if(focusResult){event.preventDefault();}else{handleCloseMenuAndReturnFocus();}break;}}};React.useEffect(function(){if(visible){window.addEventListener(\"keydown\",handleKeyDown);if(autoFocus){// FIXME: hack with raf\nraf(focusMenu,3);}return function(){window.removeEventListener(\"keydown\",handleKeyDown);focusMenuRef.current=false;};}return function(){focusMenuRef.current=false;};},[visible]);// eslint-disable-line react-hooks/exhaustive-deps\n}","map":{"version":3,"names":["KeyCode","raf","React","ESC","TAB","useAccessibility","_ref","visible","triggerRef","onVisibleChange","autoFocus","overlayRef","focusMenuRef","useRef","handleCloseMenuAndReturnFocus","_triggerRef$current","_triggerRef$current$f","current","focus","call","focusMenu","_overlayRef$current","handleKeyDown","event","keyCode","focusResult","preventDefault","useEffect","window","addEventListener","removeEventListener"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-dropdown/es/hooks/useAccessibility.js"],"sourcesContent":["import KeyCode from \"rc-util/es/KeyCode\";\nimport raf from \"rc-util/es/raf\";\nimport * as React from \"react\";\nvar ESC = KeyCode.ESC,\n  TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n    triggerRef = _ref.triggerRef,\n    onVisibleChange = _ref.onVisibleChange,\n    autoFocus = _ref.autoFocus,\n    overlayRef = _ref.overlayRef;\n  var focusMenuRef = React.useRef(false);\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible) {\n      var _triggerRef$current, _triggerRef$current$f;\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 || (_triggerRef$current$f = _triggerRef$current.focus) === null || _triggerRef$current$f === void 0 || _triggerRef$current$f.call(_triggerRef$current);\n      onVisibleChange === null || onVisibleChange === void 0 || onVisibleChange(false);\n    }\n  };\n  var focusMenu = function focusMenu() {\n    var _overlayRef$current;\n    if ((_overlayRef$current = overlayRef.current) !== null && _overlayRef$current !== void 0 && _overlayRef$current.focus) {\n      overlayRef.current.focus();\n      focusMenuRef.current = true;\n      return true;\n    }\n    return false;\n  };\n  var handleKeyDown = function handleKeyDown(event) {\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n      case TAB:\n        {\n          var focusResult = false;\n          if (!focusMenuRef.current) {\n            focusResult = focusMenu();\n          }\n          if (focusResult) {\n            event.preventDefault();\n          } else {\n            handleCloseMenuAndReturnFocus();\n          }\n          break;\n        }\n    }\n  };\n  React.useEffect(function () {\n    if (visible) {\n      window.addEventListener(\"keydown\", handleKeyDown);\n      if (autoFocus) {\n        // FIXME: hack with raf\n        raf(focusMenu, 3);\n      }\n      return function () {\n        window.removeEventListener(\"keydown\", handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n    return function () {\n      focusMenuRef.current = false;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}"],"mappings":"AAAA,MAAO,CAAAA,OAAO,KAAM,oBAAoB,CACxC,MAAO,CAAAC,GAAG,KAAM,gBAAgB,CAChC,MAAO,GAAK,CAAAC,KAAK,KAAM,OAAO,CAC9B,GAAI,CAAAC,GAAG,CAAGH,OAAO,CAACG,GAAG,CACnBC,GAAG,CAAGJ,OAAO,CAACI,GAAG,CACnB,cAAe,SAAS,CAAAC,gBAAgBA,CAACC,IAAI,CAAE,CAC7C,GAAI,CAAAC,OAAO,CAAGD,IAAI,CAACC,OAAO,CACxBC,UAAU,CAAGF,IAAI,CAACE,UAAU,CAC5BC,eAAe,CAAGH,IAAI,CAACG,eAAe,CACtCC,SAAS,CAAGJ,IAAI,CAACI,SAAS,CAC1BC,UAAU,CAAGL,IAAI,CAACK,UAAU,CAC9B,GAAI,CAAAC,YAAY,CAAGV,KAAK,CAACW,MAAM,CAAC,KAAK,CAAC,CACtC,GAAI,CAAAC,6BAA6B,CAAG,QAAS,CAAAA,6BAA6BA,CAAA,CAAG,CAC3E,GAAIP,OAAO,CAAE,CACX,GAAI,CAAAQ,mBAAmB,CAAEC,qBAAqB,CAC9C,CAACD,mBAAmB,CAAGP,UAAU,CAACS,OAAO,IAAM,IAAI,EAAIF,mBAAmB,GAAK,IAAK,EAAC,EAAI,CAACC,qBAAqB,CAAGD,mBAAmB,CAACG,KAAK,IAAM,IAAI,EAAIF,qBAAqB,GAAK,IAAK,EAAC,EAAIA,qBAAqB,CAACG,IAAI,CAACJ,mBAAmB,CAAC,CAC5ON,eAAe,GAAK,IAAI,EAAIA,eAAe,GAAK,IAAK,EAAC,EAAIA,eAAe,CAAC,KAAK,CAAC,CAClF,CACF,CAAC,CACD,GAAI,CAAAW,SAAS,CAAG,QAAS,CAAAA,SAASA,CAAA,CAAG,CACnC,GAAI,CAAAC,mBAAmB,CACvB,GAAI,CAACA,mBAAmB,CAAGV,UAAU,CAACM,OAAO,IAAM,IAAI,EAAII,mBAAmB,GAAK,IAAK,EAAC,EAAIA,mBAAmB,CAACH,KAAK,CAAE,CACtHP,UAAU,CAACM,OAAO,CAACC,KAAK,CAAC,CAAC,CAC1BN,YAAY,CAACK,OAAO,CAAG,IAAI,CAC3B,MAAO,KAAI,CACb,CACA,MAAO,MAAK,CACd,CAAC,CACD,GAAI,CAAAK,aAAa,CAAG,QAAS,CAAAA,aAAaA,CAACC,KAAK,CAAE,CAChD,OAAQA,KAAK,CAACC,OAAO,EACnB,IAAK,CAAArB,GAAG,CACNW,6BAA6B,CAAC,CAAC,CAC/B,MACF,IAAK,CAAAV,GAAG,CACN,CACE,GAAI,CAAAqB,WAAW,CAAG,KAAK,CACvB,GAAI,CAACb,YAAY,CAACK,OAAO,CAAE,CACzBQ,WAAW,CAAGL,SAAS,CAAC,CAAC,CAC3B,CACA,GAAIK,WAAW,CAAE,CACfF,KAAK,CAACG,cAAc,CAAC,CAAC,CACxB,CAAC,IAAM,CACLZ,6BAA6B,CAAC,CAAC,CACjC,CACA,MACF,CACJ,CACF,CAAC,CACDZ,KAAK,CAACyB,SAAS,CAAC,UAAY,CAC1B,GAAIpB,OAAO,CAAE,CACXqB,MAAM,CAACC,gBAAgB,CAAC,SAAS,CAAEP,aAAa,CAAC,CACjD,GAAIZ,SAAS,CAAE,CACb;AACAT,GAAG,CAACmB,SAAS,CAAE,CAAC,CAAC,CACnB,CACA,MAAO,WAAY,CACjBQ,MAAM,CAACE,mBAAmB,CAAC,SAAS,CAAER,aAAa,CAAC,CACpDV,YAAY,CAACK,OAAO,CAAG,KAAK,CAC9B,CAAC,CACH,CACA,MAAO,WAAY,CACjBL,YAAY,CAACK,OAAO,CAAG,KAAK,CAC9B,CAAC,CACH,CAAC,CAAE,CAACV,OAAO,CAAC,CAAC,CAAE;AACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}