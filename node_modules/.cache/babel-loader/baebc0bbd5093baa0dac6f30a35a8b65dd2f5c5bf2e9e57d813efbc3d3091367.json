{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";import isVisible from\"./isVisible\";function focusable(node){var includePositive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(isVisible(node)){var nodeName=node.nodeName.toLowerCase();var isFocusableElement=// Focusable element\n['input','select','textarea','button'].includes(nodeName)||// Editable element\nnode.isContentEditable||// Anchor with href element\nnodeName==='a'&&!!node.getAttribute('href');// Get tabIndex\nvar tabIndexAttr=node.getAttribute('tabindex');var tabIndexNum=Number(tabIndexAttr);// Parse as number if validate\nvar tabIndex=null;if(tabIndexAttr&&!Number.isNaN(tabIndexNum)){tabIndex=tabIndexNum;}else if(isFocusableElement&&tabIndex===null){tabIndex=0;}// Block focusable if disabled\nif(isFocusableElement&&node.disabled){tabIndex=null;}return tabIndex!==null&&(tabIndex>=0||includePositive&&tabIndex<0);}return false;}export function getFocusNodeList(node){var includePositive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var res=_toConsumableArray(node.querySelectorAll('*')).filter(function(child){return focusable(child,includePositive);});if(focusable(node,includePositive)){res.unshift(node);}return res;}var lastFocusElement=null;/** @deprecated Do not use since this may failed when used in async */export function saveLastFocusNode(){lastFocusElement=document.activeElement;}/** @deprecated Do not use since this may failed when used in async */export function clearLastFocusNode(){lastFocusElement=null;}/** @deprecated Do not use since this may failed when used in async */export function backLastFocusNode(){if(lastFocusElement){try{// 元素可能已经被移动了\nlastFocusElement.focus();/* eslint-disable no-empty */}catch(e){// empty\n}/* eslint-enable no-empty */}}export function limitTabRange(node,e){if(e.keyCode===9){var tabNodeList=getFocusNodeList(node);var lastTabNode=tabNodeList[e.shiftKey?0:tabNodeList.length-1];var leavingTab=lastTabNode===document.activeElement||node===document.activeElement;if(leavingTab){var target=tabNodeList[e.shiftKey?tabNodeList.length-1:0];target.focus();e.preventDefault();}}}","map":{"version":3,"names":["_toConsumableArray","isVisible","focusable","node","includePositive","arguments","length","undefined","nodeName","toLowerCase","isFocusableElement","includes","isContentEditable","getAttribute","tabIndexAttr","tabIndexNum","Number","tabIndex","isNaN","disabled","getFocusNodeList","res","querySelectorAll","filter","child","unshift","lastFocusElement","saveLastFocusNode","document","activeElement","clearLastFocusNode","backLastFocusNode","focus","e","limitTabRange","keyCode","tabNodeList","lastTabNode","shiftKey","leavingTab","target","preventDefault"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-util/es/Dom/focus.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport isVisible from \"./isVisible\";\nfunction focusable(node) {\n  var includePositive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (isVisible(node)) {\n    var nodeName = node.nodeName.toLowerCase();\n    var isFocusableElement =\n    // Focusable element\n    ['input', 'select', 'textarea', 'button'].includes(nodeName) ||\n    // Editable element\n    node.isContentEditable ||\n    // Anchor with href element\n    nodeName === 'a' && !!node.getAttribute('href');\n\n    // Get tabIndex\n    var tabIndexAttr = node.getAttribute('tabindex');\n    var tabIndexNum = Number(tabIndexAttr);\n\n    // Parse as number if validate\n    var tabIndex = null;\n    if (tabIndexAttr && !Number.isNaN(tabIndexNum)) {\n      tabIndex = tabIndexNum;\n    } else if (isFocusableElement && tabIndex === null) {\n      tabIndex = 0;\n    }\n\n    // Block focusable if disabled\n    if (isFocusableElement && node.disabled) {\n      tabIndex = null;\n    }\n    return tabIndex !== null && (tabIndex >= 0 || includePositive && tabIndex < 0);\n  }\n  return false;\n}\nexport function getFocusNodeList(node) {\n  var includePositive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var res = _toConsumableArray(node.querySelectorAll('*')).filter(function (child) {\n    return focusable(child, includePositive);\n  });\n  if (focusable(node, includePositive)) {\n    res.unshift(node);\n  }\n  return res;\n}\nvar lastFocusElement = null;\n\n/** @deprecated Do not use since this may failed when used in async */\nexport function saveLastFocusNode() {\n  lastFocusElement = document.activeElement;\n}\n\n/** @deprecated Do not use since this may failed when used in async */\nexport function clearLastFocusNode() {\n  lastFocusElement = null;\n}\n\n/** @deprecated Do not use since this may failed when used in async */\nexport function backLastFocusNode() {\n  if (lastFocusElement) {\n    try {\n      // 元素可能已经被移动了\n      lastFocusElement.focus();\n\n      /* eslint-disable no-empty */\n    } catch (e) {\n      // empty\n    }\n    /* eslint-enable no-empty */\n  }\n}\nexport function limitTabRange(node, e) {\n  if (e.keyCode === 9) {\n    var tabNodeList = getFocusNodeList(node);\n    var lastTabNode = tabNodeList[e.shiftKey ? 0 : tabNodeList.length - 1];\n    var leavingTab = lastTabNode === document.activeElement || node === document.activeElement;\n    if (leavingTab) {\n      var target = tabNodeList[e.shiftKey ? tabNodeList.length - 1 : 0];\n      target.focus();\n      e.preventDefault();\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}