{"ast":null,"code":"import _objectSpread from\"@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import classNames from'classnames';import CSSMotion from'rc-motion';import useLayoutEffect from\"rc-util/es/hooks/useLayoutEffect\";import{composeRef}from\"rc-util/es/ref\";import*as React from'react';var calcThumbStyle=function calcThumbStyle(targetElement){return targetElement?{left:targetElement.offsetLeft,right:targetElement.parentElement.clientWidth-targetElement.clientWidth-targetElement.offsetLeft,width:targetElement.clientWidth}:null;};var toPX=function toPX(value){return value!==undefined?\"\".concat(value,\"px\"):undefined;};export default function MotionThumb(props){var prefixCls=props.prefixCls,containerRef=props.containerRef,value=props.value,getValueIndex=props.getValueIndex,motionName=props.motionName,onMotionStart=props.onMotionStart,onMotionEnd=props.onMotionEnd,direction=props.direction;var thumbRef=React.useRef(null);var _React$useState=React.useState(value),_React$useState2=_slicedToArray(_React$useState,2),prevValue=_React$useState2[0],setPrevValue=_React$useState2[1];// =========================== Effect ===========================\nvar findValueElement=function findValueElement(val){var _containerRef$current;var index=getValueIndex(val);var ele=(_containerRef$current=containerRef.current)===null||_containerRef$current===void 0?void 0:_containerRef$current.querySelectorAll(\".\".concat(prefixCls,\"-item\"))[index];return(ele===null||ele===void 0?void 0:ele.offsetParent)&&ele;};var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),prevStyle=_React$useState4[0],setPrevStyle=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),nextStyle=_React$useState6[0],setNextStyle=_React$useState6[1];useLayoutEffect(function(){if(prevValue!==value){var prev=findValueElement(prevValue);var next=findValueElement(value);var calcPrevStyle=calcThumbStyle(prev);var calcNextStyle=calcThumbStyle(next);setPrevValue(value);setPrevStyle(calcPrevStyle);setNextStyle(calcNextStyle);if(prev&&next){onMotionStart();}else{onMotionEnd();}}},[value]);var thumbStart=React.useMemo(function(){return direction==='rtl'?toPX(-(prevStyle===null||prevStyle===void 0?void 0:prevStyle.right)):toPX(prevStyle===null||prevStyle===void 0?void 0:prevStyle.left);},[direction,prevStyle]);var thumbActive=React.useMemo(function(){return direction==='rtl'?toPX(-(nextStyle===null||nextStyle===void 0?void 0:nextStyle.right)):toPX(nextStyle===null||nextStyle===void 0?void 0:nextStyle.left);},[direction,nextStyle]);// =========================== Motion ===========================\nvar onAppearStart=function onAppearStart(){return{transform:\"translateX(var(--thumb-start-left))\",width:\"var(--thumb-start-width)\"};};var onAppearActive=function onAppearActive(){return{transform:\"translateX(var(--thumb-active-left))\",width:\"var(--thumb-active-width)\"};};var onVisibleChanged=function onVisibleChanged(){setPrevStyle(null);setNextStyle(null);onMotionEnd();};// =========================== Render ===========================\n// No need motion when nothing exist in queue\nif(!prevStyle||!nextStyle){return null;}return/*#__PURE__*/React.createElement(CSSMotion,{visible:true,motionName:motionName,motionAppear:true,onAppearStart:onAppearStart,onAppearActive:onAppearActive,onVisibleChanged:onVisibleChanged},function(_ref,ref){var motionClassName=_ref.className,motionStyle=_ref.style;var mergedStyle=_objectSpread(_objectSpread({},motionStyle),{},{'--thumb-start-left':thumbStart,'--thumb-start-width':toPX(prevStyle===null||prevStyle===void 0?void 0:prevStyle.width),'--thumb-active-left':thumbActive,'--thumb-active-width':toPX(nextStyle===null||nextStyle===void 0?void 0:nextStyle.width)});// It's little ugly which should be refactor when @umi/test update to latest jsdom\nvar motionProps={ref:composeRef(thumbRef,ref),style:mergedStyle,className:classNames(\"\".concat(prefixCls,\"-thumb\"),motionClassName)};if(process.env.NODE_ENV==='test'){motionProps['data-test-style']=JSON.stringify(mergedStyle);}return/*#__PURE__*/React.createElement(\"div\",motionProps);});}","map":{"version":3,"names":["_objectSpread","_slicedToArray","classNames","CSSMotion","useLayoutEffect","composeRef","React","calcThumbStyle","targetElement","left","offsetLeft","right","parentElement","clientWidth","width","toPX","value","undefined","concat","MotionThumb","props","prefixCls","containerRef","getValueIndex","motionName","onMotionStart","onMotionEnd","direction","thumbRef","useRef","_React$useState","useState","_React$useState2","prevValue","setPrevValue","findValueElement","val","_containerRef$current","index","ele","current","querySelectorAll","offsetParent","_React$useState3","_React$useState4","prevStyle","setPrevStyle","_React$useState5","_React$useState6","nextStyle","setNextStyle","prev","next","calcPrevStyle","calcNextStyle","thumbStart","useMemo","thumbActive","onAppearStart","transform","onAppearActive","onVisibleChanged","createElement","visible","motionAppear","_ref","ref","motionClassName","className","motionStyle","style","mergedStyle","motionProps","process","env","NODE_ENV","JSON","stringify"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-segmented/es/MotionThumb.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport CSSMotion from 'rc-motion';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport { composeRef } from \"rc-util/es/ref\";\nimport * as React from 'react';\nvar calcThumbStyle = function calcThumbStyle(targetElement) {\n  return targetElement ? {\n    left: targetElement.offsetLeft,\n    right: targetElement.parentElement.clientWidth - targetElement.clientWidth - targetElement.offsetLeft,\n    width: targetElement.clientWidth\n  } : null;\n};\nvar toPX = function toPX(value) {\n  return value !== undefined ? \"\".concat(value, \"px\") : undefined;\n};\nexport default function MotionThumb(props) {\n  var prefixCls = props.prefixCls,\n    containerRef = props.containerRef,\n    value = props.value,\n    getValueIndex = props.getValueIndex,\n    motionName = props.motionName,\n    onMotionStart = props.onMotionStart,\n    onMotionEnd = props.onMotionEnd,\n    direction = props.direction;\n  var thumbRef = React.useRef(null);\n  var _React$useState = React.useState(value),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    prevValue = _React$useState2[0],\n    setPrevValue = _React$useState2[1];\n\n  // =========================== Effect ===========================\n  var findValueElement = function findValueElement(val) {\n    var _containerRef$current;\n    var index = getValueIndex(val);\n    var ele = (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.querySelectorAll(\".\".concat(prefixCls, \"-item\"))[index];\n    return (ele === null || ele === void 0 ? void 0 : ele.offsetParent) && ele;\n  };\n  var _React$useState3 = React.useState(null),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    prevStyle = _React$useState4[0],\n    setPrevStyle = _React$useState4[1];\n  var _React$useState5 = React.useState(null),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    nextStyle = _React$useState6[0],\n    setNextStyle = _React$useState6[1];\n  useLayoutEffect(function () {\n    if (prevValue !== value) {\n      var prev = findValueElement(prevValue);\n      var next = findValueElement(value);\n      var calcPrevStyle = calcThumbStyle(prev);\n      var calcNextStyle = calcThumbStyle(next);\n      setPrevValue(value);\n      setPrevStyle(calcPrevStyle);\n      setNextStyle(calcNextStyle);\n      if (prev && next) {\n        onMotionStart();\n      } else {\n        onMotionEnd();\n      }\n    }\n  }, [value]);\n  var thumbStart = React.useMemo(function () {\n    return direction === 'rtl' ? toPX(-(prevStyle === null || prevStyle === void 0 ? void 0 : prevStyle.right)) : toPX(prevStyle === null || prevStyle === void 0 ? void 0 : prevStyle.left);\n  }, [direction, prevStyle]);\n  var thumbActive = React.useMemo(function () {\n    return direction === 'rtl' ? toPX(-(nextStyle === null || nextStyle === void 0 ? void 0 : nextStyle.right)) : toPX(nextStyle === null || nextStyle === void 0 ? void 0 : nextStyle.left);\n  }, [direction, nextStyle]);\n\n  // =========================== Motion ===========================\n  var onAppearStart = function onAppearStart() {\n    return {\n      transform: \"translateX(var(--thumb-start-left))\",\n      width: \"var(--thumb-start-width)\"\n    };\n  };\n  var onAppearActive = function onAppearActive() {\n    return {\n      transform: \"translateX(var(--thumb-active-left))\",\n      width: \"var(--thumb-active-width)\"\n    };\n  };\n  var onVisibleChanged = function onVisibleChanged() {\n    setPrevStyle(null);\n    setNextStyle(null);\n    onMotionEnd();\n  };\n\n  // =========================== Render ===========================\n  // No need motion when nothing exist in queue\n  if (!prevStyle || !nextStyle) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(CSSMotion, {\n    visible: true,\n    motionName: motionName,\n    motionAppear: true,\n    onAppearStart: onAppearStart,\n    onAppearActive: onAppearActive,\n    onVisibleChanged: onVisibleChanged\n  }, function (_ref, ref) {\n    var motionClassName = _ref.className,\n      motionStyle = _ref.style;\n    var mergedStyle = _objectSpread(_objectSpread({}, motionStyle), {}, {\n      '--thumb-start-left': thumbStart,\n      '--thumb-start-width': toPX(prevStyle === null || prevStyle === void 0 ? void 0 : prevStyle.width),\n      '--thumb-active-left': thumbActive,\n      '--thumb-active-width': toPX(nextStyle === null || nextStyle === void 0 ? void 0 : nextStyle.width)\n    });\n\n    // It's little ugly which should be refactor when @umi/test update to latest jsdom\n    var motionProps = {\n      ref: composeRef(thumbRef, ref),\n      style: mergedStyle,\n      className: classNames(\"\".concat(prefixCls, \"-thumb\"), motionClassName)\n    };\n    if (process.env.NODE_ENV === 'test') {\n      motionProps['data-test-style'] = JSON.stringify(mergedStyle);\n    }\n    return /*#__PURE__*/React.createElement(\"div\", motionProps);\n  });\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}