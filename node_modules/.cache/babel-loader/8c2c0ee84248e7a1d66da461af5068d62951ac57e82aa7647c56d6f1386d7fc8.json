{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import*as React from'react';import useLockEffect from\"./useLockEffect\";/**\n * When user first focus one input, any submit will trigger focus another one.\n * When second time focus one input, submit will not trigger focus again.\n * When click outside to close the panel, trigger event if it can trigger onChange.\n */export default function useRangeActive(disabled){var empty=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),activeIndex=_React$useState2[0],setActiveIndex=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),focused=_React$useState4[0],setFocused=_React$useState4[1];var activeListRef=React.useRef([]);var lastOperationRef=React.useRef(null);var triggerFocus=function triggerFocus(nextFocus){setFocused(nextFocus);};// ============================= Record =============================\nvar lastOperation=function lastOperation(type){if(type){lastOperationRef.current=type;}return lastOperationRef.current;};// ============================ Strategy ============================\n// Trigger when input enter or input blur or panel close\nvar nextActiveIndex=function nextActiveIndex(nextValue){var list=activeListRef.current;var filledActiveSet=new Set(list.filter(function(index){return nextValue[index]||empty[index];}));var nextIndex=list[list.length-1]===0?1:0;if(filledActiveSet.size>=2||disabled[nextIndex]){return null;}return nextIndex;};// ============================= Effect =============================\nuseLockEffect(focused,function(){if(!focused){activeListRef.current=[];}});React.useEffect(function(){if(focused){activeListRef.current.push(activeIndex);}},[focused,activeIndex]);return[focused,triggerFocus,lastOperation,activeIndex,setActiveIndex,nextActiveIndex,activeListRef.current];}","map":{"version":3,"names":["_slicedToArray","React","useLockEffect","useRangeActive","disabled","empty","arguments","length","undefined","_React$useState","useState","_React$useState2","activeIndex","setActiveIndex","_React$useState3","_React$useState4","focused","setFocused","activeListRef","useRef","lastOperationRef","triggerFocus","nextFocus","lastOperation","type","current","nextActiveIndex","nextValue","list","filledActiveSet","Set","filter","index","nextIndex","size","useEffect","push"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-picker/es/PickerInput/hooks/useRangeActive.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport useLockEffect from \"./useLockEffect\";\n/**\n * When user first focus one input, any submit will trigger focus another one.\n * When second time focus one input, submit will not trigger focus again.\n * When click outside to close the panel, trigger event if it can trigger onChange.\n */\nexport default function useRangeActive(disabled) {\n  var empty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var _React$useState = React.useState(0),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    activeIndex = _React$useState2[0],\n    setActiveIndex = _React$useState2[1];\n  var _React$useState3 = React.useState(false),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    focused = _React$useState4[0],\n    setFocused = _React$useState4[1];\n  var activeListRef = React.useRef([]);\n  var lastOperationRef = React.useRef(null);\n  var triggerFocus = function triggerFocus(nextFocus) {\n    setFocused(nextFocus);\n  };\n\n  // ============================= Record =============================\n  var lastOperation = function lastOperation(type) {\n    if (type) {\n      lastOperationRef.current = type;\n    }\n    return lastOperationRef.current;\n  };\n\n  // ============================ Strategy ============================\n  // Trigger when input enter or input blur or panel close\n  var nextActiveIndex = function nextActiveIndex(nextValue) {\n    var list = activeListRef.current;\n    var filledActiveSet = new Set(list.filter(function (index) {\n      return nextValue[index] || empty[index];\n    }));\n    var nextIndex = list[list.length - 1] === 0 ? 1 : 0;\n    if (filledActiveSet.size >= 2 || disabled[nextIndex]) {\n      return null;\n    }\n    return nextIndex;\n  };\n\n  // ============================= Effect =============================\n  useLockEffect(focused, function () {\n    if (!focused) {\n      activeListRef.current = [];\n    }\n  });\n  React.useEffect(function () {\n    if (focused) {\n      activeListRef.current.push(activeIndex);\n    }\n  }, [focused, activeIndex]);\n  return [focused, triggerFocus, lastOperation, activeIndex, setActiveIndex, nextActiveIndex, activeListRef.current];\n}"],"mappings":"AAAA,MAAO,CAAAA,cAAc,KAAM,0CAA0C,CACrE,MAAO,GAAK,CAAAC,KAAK,KAAM,OAAO,CAC9B,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C;AACA;AACA;AACA;AACA,GACA,cAAe,SAAS,CAAAC,cAAcA,CAACC,QAAQ,CAAE,CAC/C,GAAI,CAAAC,KAAK,CAAGC,SAAS,CAACC,MAAM,CAAG,CAAC,EAAID,SAAS,CAAC,CAAC,CAAC,GAAKE,SAAS,CAAGF,SAAS,CAAC,CAAC,CAAC,CAAG,EAAE,CAClF,GAAI,CAAAG,eAAe,CAAGR,KAAK,CAACS,QAAQ,CAAC,CAAC,CAAC,CACrCC,gBAAgB,CAAGX,cAAc,CAACS,eAAe,CAAE,CAAC,CAAC,CACrDG,WAAW,CAAGD,gBAAgB,CAAC,CAAC,CAAC,CACjCE,cAAc,CAAGF,gBAAgB,CAAC,CAAC,CAAC,CACtC,GAAI,CAAAG,gBAAgB,CAAGb,KAAK,CAACS,QAAQ,CAAC,KAAK,CAAC,CAC1CK,gBAAgB,CAAGf,cAAc,CAACc,gBAAgB,CAAE,CAAC,CAAC,CACtDE,OAAO,CAAGD,gBAAgB,CAAC,CAAC,CAAC,CAC7BE,UAAU,CAAGF,gBAAgB,CAAC,CAAC,CAAC,CAClC,GAAI,CAAAG,aAAa,CAAGjB,KAAK,CAACkB,MAAM,CAAC,EAAE,CAAC,CACpC,GAAI,CAAAC,gBAAgB,CAAGnB,KAAK,CAACkB,MAAM,CAAC,IAAI,CAAC,CACzC,GAAI,CAAAE,YAAY,CAAG,QAAS,CAAAA,YAAYA,CAACC,SAAS,CAAE,CAClDL,UAAU,CAACK,SAAS,CAAC,CACvB,CAAC,CAED;AACA,GAAI,CAAAC,aAAa,CAAG,QAAS,CAAAA,aAAaA,CAACC,IAAI,CAAE,CAC/C,GAAIA,IAAI,CAAE,CACRJ,gBAAgB,CAACK,OAAO,CAAGD,IAAI,CACjC,CACA,MAAO,CAAAJ,gBAAgB,CAACK,OAAO,CACjC,CAAC,CAED;AACA;AACA,GAAI,CAAAC,eAAe,CAAG,QAAS,CAAAA,eAAeA,CAACC,SAAS,CAAE,CACxD,GAAI,CAAAC,IAAI,CAAGV,aAAa,CAACO,OAAO,CAChC,GAAI,CAAAI,eAAe,CAAG,GAAI,CAAAC,GAAG,CAACF,IAAI,CAACG,MAAM,CAAC,SAAUC,KAAK,CAAE,CACzD,MAAO,CAAAL,SAAS,CAACK,KAAK,CAAC,EAAI3B,KAAK,CAAC2B,KAAK,CAAC,CACzC,CAAC,CAAC,CAAC,CACH,GAAI,CAAAC,SAAS,CAAGL,IAAI,CAACA,IAAI,CAACrB,MAAM,CAAG,CAAC,CAAC,GAAK,CAAC,CAAG,CAAC,CAAG,CAAC,CACnD,GAAIsB,eAAe,CAACK,IAAI,EAAI,CAAC,EAAI9B,QAAQ,CAAC6B,SAAS,CAAC,CAAE,CACpD,MAAO,KAAI,CACb,CACA,MAAO,CAAAA,SAAS,CAClB,CAAC,CAED;AACA/B,aAAa,CAACc,OAAO,CAAE,UAAY,CACjC,GAAI,CAACA,OAAO,CAAE,CACZE,aAAa,CAACO,OAAO,CAAG,EAAE,CAC5B,CACF,CAAC,CAAC,CACFxB,KAAK,CAACkC,SAAS,CAAC,UAAY,CAC1B,GAAInB,OAAO,CAAE,CACXE,aAAa,CAACO,OAAO,CAACW,IAAI,CAACxB,WAAW,CAAC,CACzC,CACF,CAAC,CAAE,CAACI,OAAO,CAAEJ,WAAW,CAAC,CAAC,CAC1B,MAAO,CAACI,OAAO,CAAEK,YAAY,CAAEE,aAAa,CAAEX,WAAW,CAAEC,cAAc,CAAEa,eAAe,CAAER,aAAa,CAACO,OAAO,CAAC,CACpH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}