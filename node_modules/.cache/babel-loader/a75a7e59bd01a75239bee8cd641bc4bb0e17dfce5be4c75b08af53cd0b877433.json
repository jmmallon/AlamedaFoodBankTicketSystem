{"ast":null,"code":"import _objectSpread from\"@babel/runtime/helpers/esm/objectSpread2\";import canUseDom from\"./canUseDom\";import contains from\"./contains\";var APPEND_ORDER='data-rc-order';var APPEND_PRIORITY='data-rc-priority';var MARK_KEY=\"rc-util-key\";var containerCache=new Map();function getMark(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},mark=_ref.mark;if(mark){return mark.startsWith('data-')?mark:\"data-\".concat(mark);}return MARK_KEY;}function getContainer(option){if(option.attachTo){return option.attachTo;}var head=document.querySelector('head');return head||document.body;}function getOrder(prepend){if(prepend==='queue'){return'prependQueue';}return prepend?'prepend':'append';}/**\n * Find style which inject by rc-util\n */function findStyles(container){return Array.from((containerCache.get(container)||container).children).filter(function(node){return node.tagName==='STYLE';});}export function injectCSS(css){var option=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!canUseDom()){return null;}var csp=option.csp,prepend=option.prepend,_option$priority=option.priority,priority=_option$priority===void 0?0:_option$priority;var mergedOrder=getOrder(prepend);var isPrependQueue=mergedOrder==='prependQueue';var styleNode=document.createElement('style');styleNode.setAttribute(APPEND_ORDER,mergedOrder);if(isPrependQueue&&priority){styleNode.setAttribute(APPEND_PRIORITY,\"\".concat(priority));}if(csp!==null&&csp!==void 0&&csp.nonce){styleNode.nonce=csp===null||csp===void 0?void 0:csp.nonce;}styleNode.innerHTML=css;var container=getContainer(option);var firstChild=container.firstChild;if(prepend){// If is queue `prepend`, it will prepend first style and then append rest style\nif(isPrependQueue){var existStyle=(option.styles||findStyles(container)).filter(function(node){// Ignore style which not injected by rc-util with prepend\nif(!['prepend','prependQueue'].includes(node.getAttribute(APPEND_ORDER))){return false;}// Ignore style which priority less then new style\nvar nodePriority=Number(node.getAttribute(APPEND_PRIORITY)||0);return priority>=nodePriority;});if(existStyle.length){container.insertBefore(styleNode,existStyle[existStyle.length-1].nextSibling);return styleNode;}}// Use `insertBefore` as `prepend`\ncontainer.insertBefore(styleNode,firstChild);}else{container.appendChild(styleNode);}return styleNode;}function findExistNode(key){var option=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var container=getContainer(option);return(option.styles||findStyles(container)).find(function(node){return node.getAttribute(getMark(option))===key;});}export function removeCSS(key){var option=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var existNode=findExistNode(key,option);if(existNode){var container=getContainer(option);container.removeChild(existNode);}}/**\n * qiankun will inject `appendChild` to insert into other\n */function syncRealContainer(container,option){var cachedRealContainer=containerCache.get(container);// Find real container when not cached or cached container removed\nif(!cachedRealContainer||!contains(document,cachedRealContainer)){var placeholderStyle=injectCSS('',option);var parentNode=placeholderStyle.parentNode;containerCache.set(container,parentNode);container.removeChild(placeholderStyle);}}/**\n * manually clear container cache to avoid global cache in unit testes\n */export function clearContainerCache(){containerCache.clear();}export function updateCSS(css,key){var originOption=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var container=getContainer(originOption);var styles=findStyles(container);var option=_objectSpread(_objectSpread({},originOption),{},{styles:styles});// Sync real parent\nsyncRealContainer(container,option);var existNode=findExistNode(key,option);if(existNode){var _option$csp,_option$csp2;if((_option$csp=option.csp)!==null&&_option$csp!==void 0&&_option$csp.nonce&&existNode.nonce!==((_option$csp2=option.csp)===null||_option$csp2===void 0?void 0:_option$csp2.nonce)){var _option$csp3;existNode.nonce=(_option$csp3=option.csp)===null||_option$csp3===void 0?void 0:_option$csp3.nonce;}if(existNode.innerHTML!==css){existNode.innerHTML=css;}return existNode;}var newNode=injectCSS(css,option);newNode.setAttribute(getMark(option),key);return newNode;}","map":{"version":3,"names":["_objectSpread","canUseDom","contains","APPEND_ORDER","APPEND_PRIORITY","MARK_KEY","containerCache","Map","getMark","_ref","arguments","length","undefined","mark","startsWith","concat","getContainer","option","attachTo","head","document","querySelector","body","getOrder","prepend","findStyles","container","Array","from","get","children","filter","node","tagName","injectCSS","css","csp","_option$priority","priority","mergedOrder","isPrependQueue","styleNode","createElement","setAttribute","nonce","innerHTML","firstChild","existStyle","styles","includes","getAttribute","nodePriority","Number","insertBefore","nextSibling","appendChild","findExistNode","key","find","removeCSS","existNode","removeChild","syncRealContainer","cachedRealContainer","placeholderStyle","parentNode","set","clearContainerCache","clear","updateCSS","originOption","_option$csp","_option$csp2","_option$csp3","newNode"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-util/es/Dom/dynamicCSS.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport canUseDom from \"./canUseDom\";\nimport contains from \"./contains\";\nvar APPEND_ORDER = 'data-rc-order';\nvar APPEND_PRIORITY = 'data-rc-priority';\nvar MARK_KEY = \"rc-util-key\";\nvar containerCache = new Map();\nfunction getMark() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    mark = _ref.mark;\n  if (mark) {\n    return mark.startsWith('data-') ? mark : \"data-\".concat(mark);\n  }\n  return MARK_KEY;\n}\nfunction getContainer(option) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n  var head = document.querySelector('head');\n  return head || document.body;\n}\nfunction getOrder(prepend) {\n  if (prepend === 'queue') {\n    return 'prependQueue';\n  }\n  return prepend ? 'prepend' : 'append';\n}\n\n/**\n * Find style which inject by rc-util\n */\nfunction findStyles(container) {\n  return Array.from((containerCache.get(container) || container).children).filter(function (node) {\n    return node.tagName === 'STYLE';\n  });\n}\nexport function injectCSS(css) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!canUseDom()) {\n    return null;\n  }\n  var csp = option.csp,\n    prepend = option.prepend,\n    _option$priority = option.priority,\n    priority = _option$priority === void 0 ? 0 : _option$priority;\n  var mergedOrder = getOrder(prepend);\n  var isPrependQueue = mergedOrder === 'prependQueue';\n  var styleNode = document.createElement('style');\n  styleNode.setAttribute(APPEND_ORDER, mergedOrder);\n  if (isPrependQueue && priority) {\n    styleNode.setAttribute(APPEND_PRIORITY, \"\".concat(priority));\n  }\n  if (csp !== null && csp !== void 0 && csp.nonce) {\n    styleNode.nonce = csp === null || csp === void 0 ? void 0 : csp.nonce;\n  }\n  styleNode.innerHTML = css;\n  var container = getContainer(option);\n  var firstChild = container.firstChild;\n  if (prepend) {\n    // If is queue `prepend`, it will prepend first style and then append rest style\n    if (isPrependQueue) {\n      var existStyle = (option.styles || findStyles(container)).filter(function (node) {\n        // Ignore style which not injected by rc-util with prepend\n        if (!['prepend', 'prependQueue'].includes(node.getAttribute(APPEND_ORDER))) {\n          return false;\n        }\n\n        // Ignore style which priority less then new style\n        var nodePriority = Number(node.getAttribute(APPEND_PRIORITY) || 0);\n        return priority >= nodePriority;\n      });\n      if (existStyle.length) {\n        container.insertBefore(styleNode, existStyle[existStyle.length - 1].nextSibling);\n        return styleNode;\n      }\n    }\n\n    // Use `insertBefore` as `prepend`\n    container.insertBefore(styleNode, firstChild);\n  } else {\n    container.appendChild(styleNode);\n  }\n  return styleNode;\n}\nfunction findExistNode(key) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var container = getContainer(option);\n  return (option.styles || findStyles(container)).find(function (node) {\n    return node.getAttribute(getMark(option)) === key;\n  });\n}\nexport function removeCSS(key) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var existNode = findExistNode(key, option);\n  if (existNode) {\n    var container = getContainer(option);\n    container.removeChild(existNode);\n  }\n}\n\n/**\n * qiankun will inject `appendChild` to insert into other\n */\nfunction syncRealContainer(container, option) {\n  var cachedRealContainer = containerCache.get(container);\n\n  // Find real container when not cached or cached container removed\n  if (!cachedRealContainer || !contains(document, cachedRealContainer)) {\n    var placeholderStyle = injectCSS('', option);\n    var parentNode = placeholderStyle.parentNode;\n    containerCache.set(container, parentNode);\n    container.removeChild(placeholderStyle);\n  }\n}\n\n/**\n * manually clear container cache to avoid global cache in unit testes\n */\nexport function clearContainerCache() {\n  containerCache.clear();\n}\nexport function updateCSS(css, key) {\n  var originOption = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var container = getContainer(originOption);\n  var styles = findStyles(container);\n  var option = _objectSpread(_objectSpread({}, originOption), {}, {\n    styles: styles\n  });\n\n  // Sync real parent\n  syncRealContainer(container, option);\n  var existNode = findExistNode(key, option);\n  if (existNode) {\n    var _option$csp, _option$csp2;\n    if ((_option$csp = option.csp) !== null && _option$csp !== void 0 && _option$csp.nonce && existNode.nonce !== ((_option$csp2 = option.csp) === null || _option$csp2 === void 0 ? void 0 : _option$csp2.nonce)) {\n      var _option$csp3;\n      existNode.nonce = (_option$csp3 = option.csp) === null || _option$csp3 === void 0 ? void 0 : _option$csp3.nonce;\n    }\n    if (existNode.innerHTML !== css) {\n      existNode.innerHTML = css;\n    }\n    return existNode;\n  }\n  var newNode = injectCSS(css, option);\n  newNode.setAttribute(getMark(option), key);\n  return newNode;\n}"],"mappings":"AAAA,MAAO,CAAAA,aAAa,KAAM,0CAA0C,CACpE,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,GAAI,CAAAC,YAAY,CAAG,eAAe,CAClC,GAAI,CAAAC,eAAe,CAAG,kBAAkB,CACxC,GAAI,CAAAC,QAAQ,CAAG,aAAa,CAC5B,GAAI,CAAAC,cAAc,CAAG,GAAI,CAAAC,GAAG,CAAC,CAAC,CAC9B,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,GAAI,CAAAC,IAAI,CAAGC,SAAS,CAACC,MAAM,CAAG,CAAC,EAAID,SAAS,CAAC,CAAC,CAAC,GAAKE,SAAS,CAAGF,SAAS,CAAC,CAAC,CAAC,CAAG,CAAC,CAAC,CAC/EG,IAAI,CAAGJ,IAAI,CAACI,IAAI,CAClB,GAAIA,IAAI,CAAE,CACR,MAAO,CAAAA,IAAI,CAACC,UAAU,CAAC,OAAO,CAAC,CAAGD,IAAI,CAAG,OAAO,CAACE,MAAM,CAACF,IAAI,CAAC,CAC/D,CACA,MAAO,CAAAR,QAAQ,CACjB,CACA,QAAS,CAAAW,YAAYA,CAACC,MAAM,CAAE,CAC5B,GAAIA,MAAM,CAACC,QAAQ,CAAE,CACnB,MAAO,CAAAD,MAAM,CAACC,QAAQ,CACxB,CACA,GAAI,CAAAC,IAAI,CAAGC,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC,CACzC,MAAO,CAAAF,IAAI,EAAIC,QAAQ,CAACE,IAAI,CAC9B,CACA,QAAS,CAAAC,QAAQA,CAACC,OAAO,CAAE,CACzB,GAAIA,OAAO,GAAK,OAAO,CAAE,CACvB,MAAO,cAAc,CACvB,CACA,MAAO,CAAAA,OAAO,CAAG,SAAS,CAAG,QAAQ,CACvC,CAEA;AACA;AACA,GACA,QAAS,CAAAC,UAAUA,CAACC,SAAS,CAAE,CAC7B,MAAO,CAAAC,KAAK,CAACC,IAAI,CAAC,CAACtB,cAAc,CAACuB,GAAG,CAACH,SAAS,CAAC,EAAIA,SAAS,EAAEI,QAAQ,CAAC,CAACC,MAAM,CAAC,SAAUC,IAAI,CAAE,CAC9F,MAAO,CAAAA,IAAI,CAACC,OAAO,GAAK,OAAO,CACjC,CAAC,CAAC,CACJ,CACA,MAAO,SAAS,CAAAC,SAASA,CAACC,GAAG,CAAE,CAC7B,GAAI,CAAAlB,MAAM,CAAGP,SAAS,CAACC,MAAM,CAAG,CAAC,EAAID,SAAS,CAAC,CAAC,CAAC,GAAKE,SAAS,CAAGF,SAAS,CAAC,CAAC,CAAC,CAAG,CAAC,CAAC,CACnF,GAAI,CAACT,SAAS,CAAC,CAAC,CAAE,CAChB,MAAO,KAAI,CACb,CACA,GAAI,CAAAmC,GAAG,CAAGnB,MAAM,CAACmB,GAAG,CAClBZ,OAAO,CAAGP,MAAM,CAACO,OAAO,CACxBa,gBAAgB,CAAGpB,MAAM,CAACqB,QAAQ,CAClCA,QAAQ,CAAGD,gBAAgB,GAAK,IAAK,EAAC,CAAG,CAAC,CAAGA,gBAAgB,CAC/D,GAAI,CAAAE,WAAW,CAAGhB,QAAQ,CAACC,OAAO,CAAC,CACnC,GAAI,CAAAgB,cAAc,CAAGD,WAAW,GAAK,cAAc,CACnD,GAAI,CAAAE,SAAS,CAAGrB,QAAQ,CAACsB,aAAa,CAAC,OAAO,CAAC,CAC/CD,SAAS,CAACE,YAAY,CAACxC,YAAY,CAAEoC,WAAW,CAAC,CACjD,GAAIC,cAAc,EAAIF,QAAQ,CAAE,CAC9BG,SAAS,CAACE,YAAY,CAACvC,eAAe,CAAE,EAAE,CAACW,MAAM,CAACuB,QAAQ,CAAC,CAAC,CAC9D,CACA,GAAIF,GAAG,GAAK,IAAI,EAAIA,GAAG,GAAK,IAAK,EAAC,EAAIA,GAAG,CAACQ,KAAK,CAAE,CAC/CH,SAAS,CAACG,KAAK,CAAGR,GAAG,GAAK,IAAI,EAAIA,GAAG,GAAK,IAAK,EAAC,CAAG,IAAK,EAAC,CAAGA,GAAG,CAACQ,KAAK,CACvE,CACAH,SAAS,CAACI,SAAS,CAAGV,GAAG,CACzB,GAAI,CAAAT,SAAS,CAAGV,YAAY,CAACC,MAAM,CAAC,CACpC,GAAI,CAAA6B,UAAU,CAAGpB,SAAS,CAACoB,UAAU,CACrC,GAAItB,OAAO,CAAE,CACX;AACA,GAAIgB,cAAc,CAAE,CAClB,GAAI,CAAAO,UAAU,CAAG,CAAC9B,MAAM,CAAC+B,MAAM,EAAIvB,UAAU,CAACC,SAAS,CAAC,EAAEK,MAAM,CAAC,SAAUC,IAAI,CAAE,CAC/E;AACA,GAAI,CAAC,CAAC,SAAS,CAAE,cAAc,CAAC,CAACiB,QAAQ,CAACjB,IAAI,CAACkB,YAAY,CAAC/C,YAAY,CAAC,CAAC,CAAE,CAC1E,MAAO,MAAK,CACd,CAEA;AACA,GAAI,CAAAgD,YAAY,CAAGC,MAAM,CAACpB,IAAI,CAACkB,YAAY,CAAC9C,eAAe,CAAC,EAAI,CAAC,CAAC,CAClE,MAAO,CAAAkC,QAAQ,EAAIa,YAAY,CACjC,CAAC,CAAC,CACF,GAAIJ,UAAU,CAACpC,MAAM,CAAE,CACrBe,SAAS,CAAC2B,YAAY,CAACZ,SAAS,CAAEM,UAAU,CAACA,UAAU,CAACpC,MAAM,CAAG,CAAC,CAAC,CAAC2C,WAAW,CAAC,CAChF,MAAO,CAAAb,SAAS,CAClB,CACF,CAEA;AACAf,SAAS,CAAC2B,YAAY,CAACZ,SAAS,CAAEK,UAAU,CAAC,CAC/C,CAAC,IAAM,CACLpB,SAAS,CAAC6B,WAAW,CAACd,SAAS,CAAC,CAClC,CACA,MAAO,CAAAA,SAAS,CAClB,CACA,QAAS,CAAAe,aAAaA,CAACC,GAAG,CAAE,CAC1B,GAAI,CAAAxC,MAAM,CAAGP,SAAS,CAACC,MAAM,CAAG,CAAC,EAAID,SAAS,CAAC,CAAC,CAAC,GAAKE,SAAS,CAAGF,SAAS,CAAC,CAAC,CAAC,CAAG,CAAC,CAAC,CACnF,GAAI,CAAAgB,SAAS,CAAGV,YAAY,CAACC,MAAM,CAAC,CACpC,MAAO,CAACA,MAAM,CAAC+B,MAAM,EAAIvB,UAAU,CAACC,SAAS,CAAC,EAAEgC,IAAI,CAAC,SAAU1B,IAAI,CAAE,CACnE,MAAO,CAAAA,IAAI,CAACkB,YAAY,CAAC1C,OAAO,CAACS,MAAM,CAAC,CAAC,GAAKwC,GAAG,CACnD,CAAC,CAAC,CACJ,CACA,MAAO,SAAS,CAAAE,SAASA,CAACF,GAAG,CAAE,CAC7B,GAAI,CAAAxC,MAAM,CAAGP,SAAS,CAACC,MAAM,CAAG,CAAC,EAAID,SAAS,CAAC,CAAC,CAAC,GAAKE,SAAS,CAAGF,SAAS,CAAC,CAAC,CAAC,CAAG,CAAC,CAAC,CACnF,GAAI,CAAAkD,SAAS,CAAGJ,aAAa,CAACC,GAAG,CAAExC,MAAM,CAAC,CAC1C,GAAI2C,SAAS,CAAE,CACb,GAAI,CAAAlC,SAAS,CAAGV,YAAY,CAACC,MAAM,CAAC,CACpCS,SAAS,CAACmC,WAAW,CAACD,SAAS,CAAC,CAClC,CACF,CAEA;AACA;AACA,GACA,QAAS,CAAAE,iBAAiBA,CAACpC,SAAS,CAAET,MAAM,CAAE,CAC5C,GAAI,CAAA8C,mBAAmB,CAAGzD,cAAc,CAACuB,GAAG,CAACH,SAAS,CAAC,CAEvD;AACA,GAAI,CAACqC,mBAAmB,EAAI,CAAC7D,QAAQ,CAACkB,QAAQ,CAAE2C,mBAAmB,CAAC,CAAE,CACpE,GAAI,CAAAC,gBAAgB,CAAG9B,SAAS,CAAC,EAAE,CAAEjB,MAAM,CAAC,CAC5C,GAAI,CAAAgD,UAAU,CAAGD,gBAAgB,CAACC,UAAU,CAC5C3D,cAAc,CAAC4D,GAAG,CAACxC,SAAS,CAAEuC,UAAU,CAAC,CACzCvC,SAAS,CAACmC,WAAW,CAACG,gBAAgB,CAAC,CACzC,CACF,CAEA;AACA;AACA,GACA,MAAO,SAAS,CAAAG,mBAAmBA,CAAA,CAAG,CACpC7D,cAAc,CAAC8D,KAAK,CAAC,CAAC,CACxB,CACA,MAAO,SAAS,CAAAC,SAASA,CAAClC,GAAG,CAAEsB,GAAG,CAAE,CAClC,GAAI,CAAAa,YAAY,CAAG5D,SAAS,CAACC,MAAM,CAAG,CAAC,EAAID,SAAS,CAAC,CAAC,CAAC,GAAKE,SAAS,CAAGF,SAAS,CAAC,CAAC,CAAC,CAAG,CAAC,CAAC,CACzF,GAAI,CAAAgB,SAAS,CAAGV,YAAY,CAACsD,YAAY,CAAC,CAC1C,GAAI,CAAAtB,MAAM,CAAGvB,UAAU,CAACC,SAAS,CAAC,CAClC,GAAI,CAAAT,MAAM,CAAGjB,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,CAAEsE,YAAY,CAAC,CAAE,CAAC,CAAC,CAAE,CAC9DtB,MAAM,CAAEA,MACV,CAAC,CAAC,CAEF;AACAc,iBAAiB,CAACpC,SAAS,CAAET,MAAM,CAAC,CACpC,GAAI,CAAA2C,SAAS,CAAGJ,aAAa,CAACC,GAAG,CAAExC,MAAM,CAAC,CAC1C,GAAI2C,SAAS,CAAE,CACb,GAAI,CAAAW,WAAW,CAAEC,YAAY,CAC7B,GAAI,CAACD,WAAW,CAAGtD,MAAM,CAACmB,GAAG,IAAM,IAAI,EAAImC,WAAW,GAAK,IAAK,EAAC,EAAIA,WAAW,CAAC3B,KAAK,EAAIgB,SAAS,CAAChB,KAAK,IAAM,CAAC4B,YAAY,CAAGvD,MAAM,CAACmB,GAAG,IAAM,IAAI,EAAIoC,YAAY,GAAK,IAAK,EAAC,CAAG,IAAK,EAAC,CAAGA,YAAY,CAAC5B,KAAK,CAAC,CAAE,CAC7M,GAAI,CAAA6B,YAAY,CAChBb,SAAS,CAAChB,KAAK,CAAG,CAAC6B,YAAY,CAAGxD,MAAM,CAACmB,GAAG,IAAM,IAAI,EAAIqC,YAAY,GAAK,IAAK,EAAC,CAAG,IAAK,EAAC,CAAGA,YAAY,CAAC7B,KAAK,CACjH,CACA,GAAIgB,SAAS,CAACf,SAAS,GAAKV,GAAG,CAAE,CAC/ByB,SAAS,CAACf,SAAS,CAAGV,GAAG,CAC3B,CACA,MAAO,CAAAyB,SAAS,CAClB,CACA,GAAI,CAAAc,OAAO,CAAGxC,SAAS,CAACC,GAAG,CAAElB,MAAM,CAAC,CACpCyD,OAAO,CAAC/B,YAAY,CAACnC,OAAO,CAACS,MAAM,CAAC,CAAEwC,GAAG,CAAC,CAC1C,MAAO,CAAAiB,OAAO,CAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}