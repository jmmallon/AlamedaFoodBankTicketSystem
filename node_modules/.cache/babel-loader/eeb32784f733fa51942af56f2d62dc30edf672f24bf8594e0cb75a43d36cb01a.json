{"ast":null,"code":"function getError(option,xhr){var msg=\"cannot \".concat(option.method,\" \").concat(option.action,\" \").concat(xhr.status,\"'\");var err=new Error(msg);err.status=xhr.status;err.method=option.method;err.url=option.action;return err;}function getBody(xhr){var text=xhr.responseText||xhr.response;if(!text){return text;}try{return JSON.parse(text);}catch(e){return text;}}export default function upload(option){// eslint-disable-next-line no-undef\nvar xhr=new XMLHttpRequest();if(option.onProgress&&xhr.upload){xhr.upload.onprogress=function progress(e){if(e.total>0){e.percent=e.loaded/e.total*100;}option.onProgress(e);};}// eslint-disable-next-line no-undef\nvar formData=new FormData();if(option.data){Object.keys(option.data).forEach(function(key){var value=option.data[key];// support key-value array data\nif(Array.isArray(value)){value.forEach(function(item){// { list: [ 11, 22 ] }\n// formData.append('list[]', 11);\nformData.append(\"\".concat(key,\"[]\"),item);});return;}formData.append(key,value);});}// eslint-disable-next-line no-undef\nif(option.file instanceof Blob){formData.append(option.filename,option.file,option.file.name);}else{formData.append(option.filename,option.file);}xhr.onerror=function error(e){option.onError(e);};xhr.onload=function onload(){// allow success when 2xx status\n// see https://github.com/react-component/upload/issues/34\nif(xhr.status<200||xhr.status>=300){return option.onError(getError(option,xhr),getBody(xhr));}return option.onSuccess(getBody(xhr),xhr);};xhr.open(option.method,option.action,true);// Has to be after `.open()`. See https://github.com/enyo/dropzone/issues/179\nif(option.withCredentials&&'withCredentials'in xhr){xhr.withCredentials=true;}var headers=option.headers||{};// when set headers['X-Requested-With'] = null , can close default XHR header\n// see https://github.com/react-component/upload/issues/33\nif(headers['X-Requested-With']!==null){xhr.setRequestHeader('X-Requested-With','XMLHttpRequest');}Object.keys(headers).forEach(function(h){if(headers[h]!==null){xhr.setRequestHeader(h,headers[h]);}});xhr.send(formData);return{abort:function abort(){xhr.abort();}};}","map":{"version":3,"names":["getError","option","xhr","msg","concat","method","action","status","err","Error","url","getBody","text","responseText","response","JSON","parse","e","upload","XMLHttpRequest","onProgress","onprogress","progress","total","percent","loaded","formData","FormData","data","Object","keys","forEach","key","value","Array","isArray","item","append","file","Blob","filename","name","onerror","error","onError","onload","onSuccess","open","withCredentials","headers","setRequestHeader","h","send","abort"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-upload/es/request.js"],"sourcesContent":["function getError(option, xhr) {\n  var msg = \"cannot \".concat(option.method, \" \").concat(option.action, \" \").concat(xhr.status, \"'\");\n  var err = new Error(msg);\n  err.status = xhr.status;\n  err.method = option.method;\n  err.url = option.action;\n  return err;\n}\nfunction getBody(xhr) {\n  var text = xhr.responseText || xhr.response;\n  if (!text) {\n    return text;\n  }\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\nexport default function upload(option) {\n  // eslint-disable-next-line no-undef\n  var xhr = new XMLHttpRequest();\n  if (option.onProgress && xhr.upload) {\n    xhr.upload.onprogress = function progress(e) {\n      if (e.total > 0) {\n        e.percent = e.loaded / e.total * 100;\n      }\n      option.onProgress(e);\n    };\n  }\n\n  // eslint-disable-next-line no-undef\n  var formData = new FormData();\n  if (option.data) {\n    Object.keys(option.data).forEach(function (key) {\n      var value = option.data[key];\n      // support key-value array data\n      if (Array.isArray(value)) {\n        value.forEach(function (item) {\n          // { list: [ 11, 22 ] }\n          // formData.append('list[]', 11);\n          formData.append(\"\".concat(key, \"[]\"), item);\n        });\n        return;\n      }\n      formData.append(key, value);\n    });\n  }\n\n  // eslint-disable-next-line no-undef\n  if (option.file instanceof Blob) {\n    formData.append(option.filename, option.file, option.file.name);\n  } else {\n    formData.append(option.filename, option.file);\n  }\n  xhr.onerror = function error(e) {\n    option.onError(e);\n  };\n  xhr.onload = function onload() {\n    // allow success when 2xx status\n    // see https://github.com/react-component/upload/issues/34\n    if (xhr.status < 200 || xhr.status >= 300) {\n      return option.onError(getError(option, xhr), getBody(xhr));\n    }\n    return option.onSuccess(getBody(xhr), xhr);\n  };\n  xhr.open(option.method, option.action, true);\n\n  // Has to be after `.open()`. See https://github.com/enyo/dropzone/issues/179\n  if (option.withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n  var headers = option.headers || {};\n\n  // when set headers['X-Requested-With'] = null , can close default XHR header\n  // see https://github.com/react-component/upload/issues/33\n  if (headers['X-Requested-With'] !== null) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n  Object.keys(headers).forEach(function (h) {\n    if (headers[h] !== null) {\n      xhr.setRequestHeader(h, headers[h]);\n    }\n  });\n  xhr.send(formData);\n  return {\n    abort: function abort() {\n      xhr.abort();\n    }\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}