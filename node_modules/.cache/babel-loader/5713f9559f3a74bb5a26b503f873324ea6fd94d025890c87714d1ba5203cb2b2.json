{"ast":null,"code":"import{getShadowRoot}from\"rc-util/es/Dom/shadow\";import{warning}from\"rc-util/es/warning\";import*as React from'react';import{getWin}from\"../util\";export default function useWinClick(open,clickToHide,targetEle,popupEle,mask,maskClosable,inPopupOrChild,triggerOpen){var openRef=React.useRef(open);openRef.current=open;// Click to hide is special action since click popup element should not hide\nReact.useEffect(function(){if(clickToHide&&popupEle&&(!mask||maskClosable)){var onTriggerClose=function onTriggerClose(_ref){var target=_ref.target;if(openRef.current&&!inPopupOrChild(target)){triggerOpen(false);}};var win=getWin(popupEle);win.addEventListener('mousedown',onTriggerClose,true);win.addEventListener('contextmenu',onTriggerClose,true);// shadow root\nvar targetShadowRoot=getShadowRoot(targetEle);if(targetShadowRoot){targetShadowRoot.addEventListener('mousedown',onTriggerClose,true);targetShadowRoot.addEventListener('contextmenu',onTriggerClose,true);}// Warning if target and popup not in same root\nif(process.env.NODE_ENV!=='production'){var _targetEle$getRootNod,_popupEle$getRootNode;var targetRoot=targetEle===null||targetEle===void 0||(_targetEle$getRootNod=targetEle.getRootNode)===null||_targetEle$getRootNod===void 0?void 0:_targetEle$getRootNod.call(targetEle);var popupRoot=(_popupEle$getRootNode=popupEle.getRootNode)===null||_popupEle$getRootNode===void 0?void 0:_popupEle$getRootNode.call(popupEle);warning(targetRoot===popupRoot,\"trigger element and popup element should in same shadow root.\");}return function(){win.removeEventListener('mousedown',onTriggerClose,true);win.removeEventListener('contextmenu',onTriggerClose,true);if(targetShadowRoot){targetShadowRoot.removeEventListener('mousedown',onTriggerClose,true);targetShadowRoot.removeEventListener('contextmenu',onTriggerClose,true);}};}},[clickToHide,targetEle,popupEle,mask,maskClosable]);}","map":{"version":3,"names":["getShadowRoot","warning","React","getWin","useWinClick","open","clickToHide","targetEle","popupEle","mask","maskClosable","inPopupOrChild","triggerOpen","openRef","useRef","current","useEffect","onTriggerClose","_ref","target","win","addEventListener","targetShadowRoot","process","env","NODE_ENV","_targetEle$getRootNod","_popupEle$getRootNode","targetRoot","getRootNode","call","popupRoot","removeEventListener"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/@rc-component/trigger/es/hooks/useWinClick.js"],"sourcesContent":["import { getShadowRoot } from \"rc-util/es/Dom/shadow\";\nimport { warning } from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { getWin } from \"../util\";\nexport default function useWinClick(open, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen) {\n  var openRef = React.useRef(open);\n  openRef.current = open;\n\n  // Click to hide is special action since click popup element should not hide\n  React.useEffect(function () {\n    if (clickToHide && popupEle && (!mask || maskClosable)) {\n      var onTriggerClose = function onTriggerClose(_ref) {\n        var target = _ref.target;\n        if (openRef.current && !inPopupOrChild(target)) {\n          triggerOpen(false);\n        }\n      };\n      var win = getWin(popupEle);\n      win.addEventListener('mousedown', onTriggerClose, true);\n      win.addEventListener('contextmenu', onTriggerClose, true);\n\n      // shadow root\n      var targetShadowRoot = getShadowRoot(targetEle);\n      if (targetShadowRoot) {\n        targetShadowRoot.addEventListener('mousedown', onTriggerClose, true);\n        targetShadowRoot.addEventListener('contextmenu', onTriggerClose, true);\n      }\n\n      // Warning if target and popup not in same root\n      if (process.env.NODE_ENV !== 'production') {\n        var _targetEle$getRootNod, _popupEle$getRootNode;\n        var targetRoot = targetEle === null || targetEle === void 0 || (_targetEle$getRootNod = targetEle.getRootNode) === null || _targetEle$getRootNod === void 0 ? void 0 : _targetEle$getRootNod.call(targetEle);\n        var popupRoot = (_popupEle$getRootNode = popupEle.getRootNode) === null || _popupEle$getRootNode === void 0 ? void 0 : _popupEle$getRootNode.call(popupEle);\n        warning(targetRoot === popupRoot, \"trigger element and popup element should in same shadow root.\");\n      }\n      return function () {\n        win.removeEventListener('mousedown', onTriggerClose, true);\n        win.removeEventListener('contextmenu', onTriggerClose, true);\n        if (targetShadowRoot) {\n          targetShadowRoot.removeEventListener('mousedown', onTriggerClose, true);\n          targetShadowRoot.removeEventListener('contextmenu', onTriggerClose, true);\n        }\n      };\n    }\n  }, [clickToHide, targetEle, popupEle, mask, maskClosable]);\n}"],"mappings":"AAAA,OAASA,aAAa,KAAQ,uBAAuB,CACrD,OAASC,OAAO,KAAQ,oBAAoB,CAC5C,MAAO,GAAK,CAAAC,KAAK,KAAM,OAAO,CAC9B,OAASC,MAAM,KAAQ,SAAS,CAChC,cAAe,SAAS,CAAAC,WAAWA,CAACC,IAAI,CAAEC,WAAW,CAAEC,SAAS,CAAEC,QAAQ,CAAEC,IAAI,CAAEC,YAAY,CAAEC,cAAc,CAAEC,WAAW,CAAE,CAC3H,GAAI,CAAAC,OAAO,CAAGX,KAAK,CAACY,MAAM,CAACT,IAAI,CAAC,CAChCQ,OAAO,CAACE,OAAO,CAAGV,IAAI,CAEtB;AACAH,KAAK,CAACc,SAAS,CAAC,UAAY,CAC1B,GAAIV,WAAW,EAAIE,QAAQ,GAAK,CAACC,IAAI,EAAIC,YAAY,CAAC,CAAE,CACtD,GAAI,CAAAO,cAAc,CAAG,QAAS,CAAAA,cAAcA,CAACC,IAAI,CAAE,CACjD,GAAI,CAAAC,MAAM,CAAGD,IAAI,CAACC,MAAM,CACxB,GAAIN,OAAO,CAACE,OAAO,EAAI,CAACJ,cAAc,CAACQ,MAAM,CAAC,CAAE,CAC9CP,WAAW,CAAC,KAAK,CAAC,CACpB,CACF,CAAC,CACD,GAAI,CAAAQ,GAAG,CAAGjB,MAAM,CAACK,QAAQ,CAAC,CAC1BY,GAAG,CAACC,gBAAgB,CAAC,WAAW,CAAEJ,cAAc,CAAE,IAAI,CAAC,CACvDG,GAAG,CAACC,gBAAgB,CAAC,aAAa,CAAEJ,cAAc,CAAE,IAAI,CAAC,CAEzD;AACA,GAAI,CAAAK,gBAAgB,CAAGtB,aAAa,CAACO,SAAS,CAAC,CAC/C,GAAIe,gBAAgB,CAAE,CACpBA,gBAAgB,CAACD,gBAAgB,CAAC,WAAW,CAAEJ,cAAc,CAAE,IAAI,CAAC,CACpEK,gBAAgB,CAACD,gBAAgB,CAAC,aAAa,CAAEJ,cAAc,CAAE,IAAI,CAAC,CACxE,CAEA;AACA,GAAIM,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAK,YAAY,CAAE,CACzC,GAAI,CAAAC,qBAAqB,CAAEC,qBAAqB,CAChD,GAAI,CAAAC,UAAU,CAAGrB,SAAS,GAAK,IAAI,EAAIA,SAAS,GAAK,IAAK,EAAC,EAAI,CAACmB,qBAAqB,CAAGnB,SAAS,CAACsB,WAAW,IAAM,IAAI,EAAIH,qBAAqB,GAAK,IAAK,EAAC,CAAG,IAAK,EAAC,CAAGA,qBAAqB,CAACI,IAAI,CAACvB,SAAS,CAAC,CAC5M,GAAI,CAAAwB,SAAS,CAAG,CAACJ,qBAAqB,CAAGnB,QAAQ,CAACqB,WAAW,IAAM,IAAI,EAAIF,qBAAqB,GAAK,IAAK,EAAC,CAAG,IAAK,EAAC,CAAGA,qBAAqB,CAACG,IAAI,CAACtB,QAAQ,CAAC,CAC3JP,OAAO,CAAC2B,UAAU,GAAKG,SAAS,CAAE,+DAA+D,CAAC,CACpG,CACA,MAAO,WAAY,CACjBX,GAAG,CAACY,mBAAmB,CAAC,WAAW,CAAEf,cAAc,CAAE,IAAI,CAAC,CAC1DG,GAAG,CAACY,mBAAmB,CAAC,aAAa,CAAEf,cAAc,CAAE,IAAI,CAAC,CAC5D,GAAIK,gBAAgB,CAAE,CACpBA,gBAAgB,CAACU,mBAAmB,CAAC,WAAW,CAAEf,cAAc,CAAE,IAAI,CAAC,CACvEK,gBAAgB,CAACU,mBAAmB,CAAC,aAAa,CAAEf,cAAc,CAAE,IAAI,CAAC,CAC3E,CACF,CAAC,CACH,CACF,CAAC,CAAE,CAACX,WAAW,CAAEC,SAAS,CAAEC,QAAQ,CAAEC,IAAI,CAAEC,YAAY,CAAC,CAAC,CAC5D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}