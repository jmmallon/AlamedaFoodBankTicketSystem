{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/esm/extends\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import _typeof from\"@babel/runtime/helpers/esm/typeof\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"visible\",\"onVisibleChange\",\"getContainer\",\"current\",\"movable\",\"minScale\",\"maxScale\",\"countRender\",\"closeIcon\",\"onChange\",\"onTransform\",\"toolbarRender\",\"imageRender\"],_excluded2=[\"src\"];import useMergedState from\"rc-util/es/hooks/useMergedState\";import*as React from'react';import{useState}from'react';import{PreviewGroupContext}from\"./context\";import usePreviewItems from\"./hooks/usePreviewItems\";import Preview from\"./Preview\";var Group=function Group(_ref){var _mergedItems$current;var _ref$previewPrefixCls=_ref.previewPrefixCls,previewPrefixCls=_ref$previewPrefixCls===void 0?'rc-image-preview':_ref$previewPrefixCls,children=_ref.children,_ref$icons=_ref.icons,icons=_ref$icons===void 0?{}:_ref$icons,items=_ref.items,preview=_ref.preview,fallback=_ref.fallback;var _ref2=_typeof(preview)==='object'?preview:{},previewVisible=_ref2.visible,onVisibleChange=_ref2.onVisibleChange,getContainer=_ref2.getContainer,currentIndex=_ref2.current,movable=_ref2.movable,minScale=_ref2.minScale,maxScale=_ref2.maxScale,countRender=_ref2.countRender,closeIcon=_ref2.closeIcon,onChange=_ref2.onChange,onTransform=_ref2.onTransform,toolbarRender=_ref2.toolbarRender,imageRender=_ref2.imageRender,dialogProps=_objectWithoutProperties(_ref2,_excluded);// ========================== Items ===========================\nvar _usePreviewItems=usePreviewItems(items),_usePreviewItems2=_slicedToArray(_usePreviewItems,2),mergedItems=_usePreviewItems2[0],register=_usePreviewItems2[1];// ========================= Preview ==========================\n// >>> Index\nvar _useMergedState=useMergedState(0,{value:currentIndex}),_useMergedState2=_slicedToArray(_useMergedState,2),current=_useMergedState2[0],setCurrent=_useMergedState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),keepOpenIndex=_useState2[0],setKeepOpenIndex=_useState2[1];// >>> Image\nvar _ref3=((_mergedItems$current=mergedItems[current])===null||_mergedItems$current===void 0?void 0:_mergedItems$current.data)||{},src=_ref3.src,imgCommonProps=_objectWithoutProperties(_ref3,_excluded2);// >>> Visible\nvar _useMergedState3=useMergedState(!!previewVisible,{value:previewVisible,onChange:function onChange(val,prevVal){onVisibleChange===null||onVisibleChange===void 0||onVisibleChange(val,prevVal,current);}}),_useMergedState4=_slicedToArray(_useMergedState3,2),isShowPreview=_useMergedState4[0],setShowPreview=_useMergedState4[1];// >>> Position\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),mousePosition=_useState4[0],setMousePosition=_useState4[1];var onPreviewFromImage=React.useCallback(function(id,mouseX,mouseY){var index=mergedItems.findIndex(function(item){return item.id===id;});setShowPreview(true);setMousePosition({x:mouseX,y:mouseY});setCurrent(index<0?0:index);setKeepOpenIndex(true);},[mergedItems]);// Reset current when reopen\nReact.useEffect(function(){if(isShowPreview){if(!keepOpenIndex){setCurrent(0);}}else{setKeepOpenIndex(false);}},[isShowPreview]);// ========================== Events ==========================\nvar onInternalChange=function onInternalChange(next,prev){setCurrent(next);onChange===null||onChange===void 0||onChange(next,prev);};var onPreviewClose=function onPreviewClose(){setShowPreview(false);setMousePosition(null);};// ========================= Context ==========================\nvar previewGroupContext=React.useMemo(function(){return{register:register,onPreview:onPreviewFromImage};},[register,onPreviewFromImage]);// ========================== Render ==========================\nreturn/*#__PURE__*/React.createElement(PreviewGroupContext.Provider,{value:previewGroupContext},children,/*#__PURE__*/React.createElement(Preview,_extends({\"aria-hidden\":!isShowPreview,movable:movable,visible:isShowPreview,prefixCls:previewPrefixCls,closeIcon:closeIcon,onClose:onPreviewClose,mousePosition:mousePosition,imgCommonProps:imgCommonProps,src:src,fallback:fallback,icons:icons,minScale:minScale,maxScale:maxScale,getContainer:getContainer,current:current,count:mergedItems.length,countRender:countRender,onTransform:onTransform,toolbarRender:toolbarRender,imageRender:imageRender,onChange:onInternalChange},dialogProps)));};export default Group;","map":{"version":3,"names":["_extends","_slicedToArray","_typeof","_objectWithoutProperties","_excluded","_excluded2","useMergedState","React","useState","PreviewGroupContext","usePreviewItems","Preview","Group","_ref","_mergedItems$current","_ref$previewPrefixCls","previewPrefixCls","children","_ref$icons","icons","items","preview","fallback","_ref2","previewVisible","visible","onVisibleChange","getContainer","currentIndex","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender","dialogProps","_usePreviewItems","_usePreviewItems2","mergedItems","register","_useMergedState","value","_useMergedState2","setCurrent","_useState","_useState2","keepOpenIndex","setKeepOpenIndex","_ref3","data","src","imgCommonProps","_useMergedState3","val","prevVal","_useMergedState4","isShowPreview","setShowPreview","_useState3","_useState4","mousePosition","setMousePosition","onPreviewFromImage","useCallback","id","mouseX","mouseY","index","findIndex","item","x","y","useEffect","onInternalChange","next","prev","onPreviewClose","previewGroupContext","useMemo","onPreview","createElement","Provider","prefixCls","onClose","count","length"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-image/es/PreviewGroup.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"visible\", \"onVisibleChange\", \"getContainer\", \"current\", \"movable\", \"minScale\", \"maxScale\", \"countRender\", \"closeIcon\", \"onChange\", \"onTransform\", \"toolbarRender\", \"imageRender\"],\n  _excluded2 = [\"src\"];\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { PreviewGroupContext } from \"./context\";\nimport usePreviewItems from \"./hooks/usePreviewItems\";\nimport Preview from \"./Preview\";\nvar Group = function Group(_ref) {\n  var _mergedItems$current;\n  var _ref$previewPrefixCls = _ref.previewPrefixCls,\n    previewPrefixCls = _ref$previewPrefixCls === void 0 ? 'rc-image-preview' : _ref$previewPrefixCls,\n    children = _ref.children,\n    _ref$icons = _ref.icons,\n    icons = _ref$icons === void 0 ? {} : _ref$icons,\n    items = _ref.items,\n    preview = _ref.preview,\n    fallback = _ref.fallback;\n  var _ref2 = _typeof(preview) === 'object' ? preview : {},\n    previewVisible = _ref2.visible,\n    onVisibleChange = _ref2.onVisibleChange,\n    getContainer = _ref2.getContainer,\n    currentIndex = _ref2.current,\n    movable = _ref2.movable,\n    minScale = _ref2.minScale,\n    maxScale = _ref2.maxScale,\n    countRender = _ref2.countRender,\n    closeIcon = _ref2.closeIcon,\n    onChange = _ref2.onChange,\n    onTransform = _ref2.onTransform,\n    toolbarRender = _ref2.toolbarRender,\n    imageRender = _ref2.imageRender,\n    dialogProps = _objectWithoutProperties(_ref2, _excluded);\n\n  // ========================== Items ===========================\n  var _usePreviewItems = usePreviewItems(items),\n    _usePreviewItems2 = _slicedToArray(_usePreviewItems, 2),\n    mergedItems = _usePreviewItems2[0],\n    register = _usePreviewItems2[1];\n\n  // ========================= Preview ==========================\n  // >>> Index\n  var _useMergedState = useMergedState(0, {\n      value: currentIndex\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    current = _useMergedState2[0],\n    setCurrent = _useMergedState2[1];\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    keepOpenIndex = _useState2[0],\n    setKeepOpenIndex = _useState2[1];\n\n  // >>> Image\n  var _ref3 = ((_mergedItems$current = mergedItems[current]) === null || _mergedItems$current === void 0 ? void 0 : _mergedItems$current.data) || {},\n    src = _ref3.src,\n    imgCommonProps = _objectWithoutProperties(_ref3, _excluded2);\n  // >>> Visible\n  var _useMergedState3 = useMergedState(!!previewVisible, {\n      value: previewVisible,\n      onChange: function onChange(val, prevVal) {\n        onVisibleChange === null || onVisibleChange === void 0 || onVisibleChange(val, prevVal, current);\n      }\n    }),\n    _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n    isShowPreview = _useMergedState4[0],\n    setShowPreview = _useMergedState4[1];\n\n  // >>> Position\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    mousePosition = _useState4[0],\n    setMousePosition = _useState4[1];\n  var onPreviewFromImage = React.useCallback(function (id, mouseX, mouseY) {\n    var index = mergedItems.findIndex(function (item) {\n      return item.id === id;\n    });\n    setShowPreview(true);\n    setMousePosition({\n      x: mouseX,\n      y: mouseY\n    });\n    setCurrent(index < 0 ? 0 : index);\n    setKeepOpenIndex(true);\n  }, [mergedItems]);\n\n  // Reset current when reopen\n  React.useEffect(function () {\n    if (isShowPreview) {\n      if (!keepOpenIndex) {\n        setCurrent(0);\n      }\n    } else {\n      setKeepOpenIndex(false);\n    }\n  }, [isShowPreview]);\n\n  // ========================== Events ==========================\n  var onInternalChange = function onInternalChange(next, prev) {\n    setCurrent(next);\n    onChange === null || onChange === void 0 || onChange(next, prev);\n  };\n  var onPreviewClose = function onPreviewClose() {\n    setShowPreview(false);\n    setMousePosition(null);\n  };\n\n  // ========================= Context ==========================\n  var previewGroupContext = React.useMemo(function () {\n    return {\n      register: register,\n      onPreview: onPreviewFromImage\n    };\n  }, [register, onPreviewFromImage]);\n\n  // ========================== Render ==========================\n  return /*#__PURE__*/React.createElement(PreviewGroupContext.Provider, {\n    value: previewGroupContext\n  }, children, /*#__PURE__*/React.createElement(Preview, _extends({\n    \"aria-hidden\": !isShowPreview,\n    movable: movable,\n    visible: isShowPreview,\n    prefixCls: previewPrefixCls,\n    closeIcon: closeIcon,\n    onClose: onPreviewClose,\n    mousePosition: mousePosition,\n    imgCommonProps: imgCommonProps,\n    src: src,\n    fallback: fallback,\n    icons: icons,\n    minScale: minScale,\n    maxScale: maxScale,\n    getContainer: getContainer,\n    current: current,\n    count: mergedItems.length,\n    countRender: countRender,\n    onTransform: onTransform,\n    toolbarRender: toolbarRender,\n    imageRender: imageRender,\n    onChange: onInternalChange\n  }, dialogProps)));\n};\nexport default Group;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}