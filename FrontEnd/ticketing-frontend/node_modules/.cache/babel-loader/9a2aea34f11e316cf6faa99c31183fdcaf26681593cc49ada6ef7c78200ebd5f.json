{"ast":null,"code":"\"use client\";import useState from\"rc-util/es/hooks/useState\";import*as React from'react';import Button from'../button';import{convertLegacyProps}from'../button/buttonHelpers';function isThenable(thing){return!!(thing&&thing.then);}const ActionButton=props=>{const{type,children,prefixCls,buttonProps,close,autoFocus,emitEvent,isSilent,quitOnNullishReturnValue,actionFn}=props;const clickedRef=React.useRef(false);const buttonRef=React.useRef(null);const[loading,setLoading]=useState(false);const onInternalClose=function(){close===null||close===void 0?void 0:close.apply(void 0,arguments);};React.useEffect(()=>{let timeoutId=null;if(autoFocus){timeoutId=setTimeout(()=>{var _a;(_a=buttonRef.current)===null||_a===void 0?void 0:_a.focus();});}return()=>{if(timeoutId){clearTimeout(timeoutId);}};},[]);const handlePromiseOnOk=returnValueOfOnOk=>{if(!isThenable(returnValueOfOnOk)){return;}setLoading(true);returnValueOfOnOk.then(function(){setLoading(false,true);onInternalClose.apply(void 0,arguments);clickedRef.current=false;},e=>{// See: https://github.com/ant-design/ant-design/issues/6183\nsetLoading(false,true);clickedRef.current=false;// Do not throw if is `await` mode\nif(isSilent===null||isSilent===void 0?void 0:isSilent()){return;}return Promise.reject(e);});};const onClick=e=>{if(clickedRef.current){return;}clickedRef.current=true;if(!actionFn){onInternalClose();return;}let returnValueOfOnOk;if(emitEvent){returnValueOfOnOk=actionFn(e);if(quitOnNullishReturnValue&&!isThenable(returnValueOfOnOk)){clickedRef.current=false;onInternalClose(e);return;}}else if(actionFn.length){returnValueOfOnOk=actionFn(close);// https://github.com/ant-design/ant-design/issues/23358\nclickedRef.current=false;}else{returnValueOfOnOk=actionFn();if(!returnValueOfOnOk){onInternalClose();return;}}handlePromiseOnOk(returnValueOfOnOk);};return/*#__PURE__*/React.createElement(Button,Object.assign({},convertLegacyProps(type),{onClick:onClick,loading:loading,prefixCls:prefixCls},buttonProps,{ref:buttonRef}),children);};export default ActionButton;","map":{"version":3,"names":["useState","React","Button","convertLegacyProps","isThenable","thing","then","ActionButton","props","type","children","prefixCls","buttonProps","close","autoFocus","emitEvent","isSilent","quitOnNullishReturnValue","actionFn","clickedRef","useRef","buttonRef","loading","setLoading","onInternalClose","apply","arguments","useEffect","timeoutId","setTimeout","_a","current","focus","clearTimeout","handlePromiseOnOk","returnValueOfOnOk","e","Promise","reject","onClick","length","createElement","Object","assign","ref"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/antd/es/_util/ActionButton.js"],"sourcesContent":["\"use client\";\n\nimport useState from \"rc-util/es/hooks/useState\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonHelpers';\nfunction isThenable(thing) {\n  return !!(thing && thing.then);\n}\nconst ActionButton = props => {\n  const {\n    type,\n    children,\n    prefixCls,\n    buttonProps,\n    close,\n    autoFocus,\n    emitEvent,\n    isSilent,\n    quitOnNullishReturnValue,\n    actionFn\n  } = props;\n  const clickedRef = React.useRef(false);\n  const buttonRef = React.useRef(null);\n  const [loading, setLoading] = useState(false);\n  const onInternalClose = function () {\n    close === null || close === void 0 ? void 0 : close.apply(void 0, arguments);\n  };\n  React.useEffect(() => {\n    let timeoutId = null;\n    if (autoFocus) {\n      timeoutId = setTimeout(() => {\n        var _a;\n        (_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      });\n    }\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n  const handlePromiseOnOk = returnValueOfOnOk => {\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      setLoading(false, true);\n      onInternalClose.apply(void 0, arguments);\n      clickedRef.current = false;\n    }, e => {\n      // See: https://github.com/ant-design/ant-design/issues/6183\n      setLoading(false, true);\n      clickedRef.current = false;\n      // Do not throw if is `await` mode\n      if (isSilent === null || isSilent === void 0 ? void 0 : isSilent()) {\n        return;\n      }\n      return Promise.reject(e);\n    });\n  };\n  const onClick = e => {\n    if (clickedRef.current) {\n      return;\n    }\n    clickedRef.current = true;\n    if (!actionFn) {\n      onInternalClose();\n      return;\n    }\n    let returnValueOfOnOk;\n    if (emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n      if (quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        onInternalClose(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close);\n      // https://github.com/ant-design/ant-design/issues/23358\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n      if (!returnValueOfOnOk) {\n        onInternalClose();\n        return;\n      }\n    }\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n  return /*#__PURE__*/React.createElement(Button, Object.assign({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: buttonRef\n  }), children);\n};\nexport default ActionButton;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}