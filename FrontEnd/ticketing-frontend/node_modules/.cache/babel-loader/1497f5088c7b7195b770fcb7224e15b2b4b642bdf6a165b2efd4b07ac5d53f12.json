{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/esm/extends\";import _objectSpread from\"@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"name\",\"initialValues\",\"fields\",\"form\",\"preserve\",\"children\",\"component\",\"validateMessages\",\"validateTrigger\",\"onValuesChange\",\"onFieldsChange\",\"onFinish\",\"onFinishFailed\"];import*as React from'react';import useForm from\"./useForm\";import FieldContext,{HOOK_MARK}from\"./FieldContext\";import FormContext from\"./FormContext\";import{isSimilar}from\"./utils/valueUtil\";import ListContext from\"./ListContext\";var Form=function Form(_ref,ref){var name=_ref.name,initialValues=_ref.initialValues,fields=_ref.fields,form=_ref.form,preserve=_ref.preserve,children=_ref.children,_ref$component=_ref.component,Component=_ref$component===void 0?'form':_ref$component,validateMessages=_ref.validateMessages,_ref$validateTrigger=_ref.validateTrigger,validateTrigger=_ref$validateTrigger===void 0?'onChange':_ref$validateTrigger,onValuesChange=_ref.onValuesChange,_onFieldsChange=_ref.onFieldsChange,_onFinish=_ref.onFinish,onFinishFailed=_ref.onFinishFailed,restProps=_objectWithoutProperties(_ref,_excluded);var formContext=React.useContext(FormContext);// We customize handle event since Context will makes all the consumer re-render:\n// https://reactjs.org/docs/context.html#contextprovider\nvar _useForm=useForm(form),_useForm2=_slicedToArray(_useForm,1),formInstance=_useForm2[0];var _getInternalHooks=formInstance.getInternalHooks(HOOK_MARK),useSubscribe=_getInternalHooks.useSubscribe,setInitialValues=_getInternalHooks.setInitialValues,setCallbacks=_getInternalHooks.setCallbacks,setValidateMessages=_getInternalHooks.setValidateMessages,setPreserve=_getInternalHooks.setPreserve,destroyForm=_getInternalHooks.destroyForm;// Pass ref with form instance\nReact.useImperativeHandle(ref,function(){return formInstance;});// Register form into Context\nReact.useEffect(function(){formContext.registerForm(name,formInstance);return function(){formContext.unregisterForm(name);};},[formContext,formInstance,name]);// Pass props to store\nsetValidateMessages(_objectSpread(_objectSpread({},formContext.validateMessages),validateMessages));setCallbacks({onValuesChange:onValuesChange,onFieldsChange:function onFieldsChange(changedFields){formContext.triggerFormChange(name,changedFields);if(_onFieldsChange){for(var _len=arguments.length,rest=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){rest[_key-1]=arguments[_key];}_onFieldsChange.apply(void 0,[changedFields].concat(rest));}},onFinish:function onFinish(values){formContext.triggerFormFinish(name,values);if(_onFinish){_onFinish(values);}},onFinishFailed:onFinishFailed});setPreserve(preserve);// Set initial value, init store value when first mount\nvar mountRef=React.useRef(null);setInitialValues(initialValues,!mountRef.current);if(!mountRef.current){mountRef.current=true;}React.useEffect(function(){return destroyForm;},// eslint-disable-next-line react-hooks/exhaustive-deps\n[]);// Prepare children by `children` type\nvar childrenNode;var childrenRenderProps=typeof children==='function';if(childrenRenderProps){var _values=formInstance.getFieldsValue(true);childrenNode=children(_values,formInstance);}else{childrenNode=children;}// Not use subscribe when using render props\nuseSubscribe(!childrenRenderProps);// Listen if fields provided. We use ref to save prev data here to avoid additional render\nvar prevFieldsRef=React.useRef();React.useEffect(function(){if(!isSimilar(prevFieldsRef.current||[],fields||[])){formInstance.setFields(fields||[]);}prevFieldsRef.current=fields;},[fields,formInstance]);var formContextValue=React.useMemo(function(){return _objectSpread(_objectSpread({},formInstance),{},{validateTrigger:validateTrigger});},[formInstance,validateTrigger]);var wrapperNode=/*#__PURE__*/React.createElement(ListContext.Provider,{value:null},/*#__PURE__*/React.createElement(FieldContext.Provider,{value:formContextValue},childrenNode));if(Component===false){return wrapperNode;}return/*#__PURE__*/React.createElement(Component,_extends({},restProps,{onSubmit:function onSubmit(event){event.preventDefault();event.stopPropagation();formInstance.submit();},onReset:function onReset(event){var _restProps$onReset;event.preventDefault();formInstance.resetFields();(_restProps$onReset=restProps.onReset)===null||_restProps$onReset===void 0||_restProps$onReset.call(restProps,event);}}),wrapperNode);};export default Form;","map":{"version":3,"names":["_extends","_objectSpread","_slicedToArray","_objectWithoutProperties","_excluded","React","useForm","FieldContext","HOOK_MARK","FormContext","isSimilar","ListContext","Form","_ref","ref","name","initialValues","fields","form","preserve","children","_ref$component","component","Component","validateMessages","_ref$validateTrigger","validateTrigger","onValuesChange","_onFieldsChange","onFieldsChange","_onFinish","onFinish","onFinishFailed","restProps","formContext","useContext","_useForm","_useForm2","formInstance","_getInternalHooks","getInternalHooks","useSubscribe","setInitialValues","setCallbacks","setValidateMessages","setPreserve","destroyForm","useImperativeHandle","useEffect","registerForm","unregisterForm","changedFields","triggerFormChange","_len","arguments","length","rest","Array","_key","apply","concat","values","triggerFormFinish","mountRef","useRef","current","childrenNode","childrenRenderProps","_values","getFieldsValue","prevFieldsRef","setFields","formContextValue","useMemo","wrapperNode","createElement","Provider","value","onSubmit","event","preventDefault","stopPropagation","submit","onReset","_restProps$onReset","resetFields","call"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-field-form/es/Form.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"name\", \"initialValues\", \"fields\", \"form\", \"preserve\", \"children\", \"component\", \"validateMessages\", \"validateTrigger\", \"onValuesChange\", \"onFieldsChange\", \"onFinish\", \"onFinishFailed\"];\nimport * as React from 'react';\nimport useForm from \"./useForm\";\nimport FieldContext, { HOOK_MARK } from \"./FieldContext\";\nimport FormContext from \"./FormContext\";\nimport { isSimilar } from \"./utils/valueUtil\";\nimport ListContext from \"./ListContext\";\nvar Form = function Form(_ref, ref) {\n  var name = _ref.name,\n    initialValues = _ref.initialValues,\n    fields = _ref.fields,\n    form = _ref.form,\n    preserve = _ref.preserve,\n    children = _ref.children,\n    _ref$component = _ref.component,\n    Component = _ref$component === void 0 ? 'form' : _ref$component,\n    validateMessages = _ref.validateMessages,\n    _ref$validateTrigger = _ref.validateTrigger,\n    validateTrigger = _ref$validateTrigger === void 0 ? 'onChange' : _ref$validateTrigger,\n    onValuesChange = _ref.onValuesChange,\n    _onFieldsChange = _ref.onFieldsChange,\n    _onFinish = _ref.onFinish,\n    onFinishFailed = _ref.onFinishFailed,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var formContext = React.useContext(FormContext);\n\n  // We customize handle event since Context will makes all the consumer re-render:\n  // https://reactjs.org/docs/context.html#contextprovider\n  var _useForm = useForm(form),\n    _useForm2 = _slicedToArray(_useForm, 1),\n    formInstance = _useForm2[0];\n  var _getInternalHooks = formInstance.getInternalHooks(HOOK_MARK),\n    useSubscribe = _getInternalHooks.useSubscribe,\n    setInitialValues = _getInternalHooks.setInitialValues,\n    setCallbacks = _getInternalHooks.setCallbacks,\n    setValidateMessages = _getInternalHooks.setValidateMessages,\n    setPreserve = _getInternalHooks.setPreserve,\n    destroyForm = _getInternalHooks.destroyForm;\n\n  // Pass ref with form instance\n  React.useImperativeHandle(ref, function () {\n    return formInstance;\n  });\n\n  // Register form into Context\n  React.useEffect(function () {\n    formContext.registerForm(name, formInstance);\n    return function () {\n      formContext.unregisterForm(name);\n    };\n  }, [formContext, formInstance, name]);\n\n  // Pass props to store\n  setValidateMessages(_objectSpread(_objectSpread({}, formContext.validateMessages), validateMessages));\n  setCallbacks({\n    onValuesChange: onValuesChange,\n    onFieldsChange: function onFieldsChange(changedFields) {\n      formContext.triggerFormChange(name, changedFields);\n      if (_onFieldsChange) {\n        for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          rest[_key - 1] = arguments[_key];\n        }\n        _onFieldsChange.apply(void 0, [changedFields].concat(rest));\n      }\n    },\n    onFinish: function onFinish(values) {\n      formContext.triggerFormFinish(name, values);\n      if (_onFinish) {\n        _onFinish(values);\n      }\n    },\n    onFinishFailed: onFinishFailed\n  });\n  setPreserve(preserve);\n\n  // Set initial value, init store value when first mount\n  var mountRef = React.useRef(null);\n  setInitialValues(initialValues, !mountRef.current);\n  if (!mountRef.current) {\n    mountRef.current = true;\n  }\n  React.useEffect(function () {\n    return destroyForm;\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n\n  // Prepare children by `children` type\n  var childrenNode;\n  var childrenRenderProps = typeof children === 'function';\n  if (childrenRenderProps) {\n    var _values = formInstance.getFieldsValue(true);\n    childrenNode = children(_values, formInstance);\n  } else {\n    childrenNode = children;\n  }\n\n  // Not use subscribe when using render props\n  useSubscribe(!childrenRenderProps);\n\n  // Listen if fields provided. We use ref to save prev data here to avoid additional render\n  var prevFieldsRef = React.useRef();\n  React.useEffect(function () {\n    if (!isSimilar(prevFieldsRef.current || [], fields || [])) {\n      formInstance.setFields(fields || []);\n    }\n    prevFieldsRef.current = fields;\n  }, [fields, formInstance]);\n  var formContextValue = React.useMemo(function () {\n    return _objectSpread(_objectSpread({}, formInstance), {}, {\n      validateTrigger: validateTrigger\n    });\n  }, [formInstance, validateTrigger]);\n  var wrapperNode = /*#__PURE__*/React.createElement(ListContext.Provider, {\n    value: null\n  }, /*#__PURE__*/React.createElement(FieldContext.Provider, {\n    value: formContextValue\n  }, childrenNode));\n  if (Component === false) {\n    return wrapperNode;\n  }\n  return /*#__PURE__*/React.createElement(Component, _extends({}, restProps, {\n    onSubmit: function onSubmit(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      formInstance.submit();\n    },\n    onReset: function onReset(event) {\n      var _restProps$onReset;\n      event.preventDefault();\n      formInstance.resetFields();\n      (_restProps$onReset = restProps.onReset) === null || _restProps$onReset === void 0 || _restProps$onReset.call(restProps, event);\n    }\n  }), wrapperNode);\n};\nexport default Form;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}