{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import classNames from'classnames';import useLayoutEffect from\"rc-util/es/hooks/useLayoutEffect\";import*as React from'react';import{usePanelContext}from\"../../context\";import useScrollTo from\"./useScrollTo\";var SCROLL_DELAY=300;export default function TimeColumn(props){var units=props.units,value=props.value,optionalValue=props.optionalValue,type=props.type,onChange=props.onChange,onDblClick=props.onDblClick,changeOnScroll=props.changeOnScroll;var _usePanelContext=usePanelContext(),prefixCls=_usePanelContext.prefixCls,cellRender=_usePanelContext.cellRender,now=_usePanelContext.now,locale=_usePanelContext.locale;var panelPrefixCls=\"\".concat(prefixCls,\"-time-panel\");var cellPrefixCls=\"\".concat(prefixCls,\"-time-panel-cell\");// ========================== Refs ==========================\nvar ulRef=React.useRef(null);// ========================= Scroll =========================\nvar checkDelayRef=React.useRef();var clearDelayCheck=function clearDelayCheck(){clearTimeout(checkDelayRef.current);};// ========================== Sync ==========================\nvar _useScrollTo=useScrollTo(ulRef,value!==null&&value!==void 0?value:optionalValue),_useScrollTo2=_slicedToArray(_useScrollTo,3),syncScroll=_useScrollTo2[0],stopScroll=_useScrollTo2[1],isScrolling=_useScrollTo2[2];// Effect sync value scroll\nuseLayoutEffect(function(){syncScroll();clearDelayCheck();return function(){stopScroll();clearDelayCheck();};},[value,optionalValue,units]);// ========================= Change =========================\n// Scroll event if sync onScroll\nvar onInternalScroll=function onInternalScroll(event){clearDelayCheck();var target=event.target;if(!isScrolling()&&changeOnScroll){checkDelayRef.current=setTimeout(function(){var ul=ulRef.current;var firstLiTop=ul.querySelector(\"li\").offsetTop;var liList=Array.from(ul.querySelectorAll(\"li\"));var liTopList=liList.map(function(li){return li.offsetTop-firstLiTop;});var liDistList=liTopList.map(function(top,index){if(units[index].disabled){return Number.MAX_SAFE_INTEGER;}return Math.abs(top-target.scrollTop);});// Find min distance index\nvar minDist=Math.min.apply(Math,_toConsumableArray(liDistList));var minDistIndex=liDistList.findIndex(function(dist){return dist===minDist;});var targetUnit=units[minDistIndex];if(targetUnit&&!targetUnit.disabled){onChange(targetUnit.value);}},SCROLL_DELAY);}};// ========================= Render =========================\nvar columnPrefixCls=\"\".concat(panelPrefixCls,\"-column\");return/*#__PURE__*/React.createElement(\"ul\",{className:columnPrefixCls,ref:ulRef,\"data-type\":type,onScroll:onInternalScroll},units.map(function(_ref){var label=_ref.label,unitValue=_ref.value,disabled=_ref.disabled;var inner=/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(cellPrefixCls,\"-inner\")},label);return/*#__PURE__*/React.createElement(\"li\",{key:unitValue,className:classNames(cellPrefixCls,_defineProperty(_defineProperty({},\"\".concat(cellPrefixCls,\"-selected\"),value===unitValue),\"\".concat(cellPrefixCls,\"-disabled\"),disabled)),onClick:function onClick(){if(!disabled){onChange(unitValue);}},onDoubleClick:function onDoubleClick(){if(!disabled&&onDblClick){onDblClick();}},\"data-value\":unitValue},cellRender?cellRender(unitValue,{prefixCls:prefixCls,originNode:inner,today:now,type:'time',subType:type,locale:locale}):inner);}));}","map":{"version":3,"names":["_defineProperty","_toConsumableArray","_slicedToArray","classNames","useLayoutEffect","React","usePanelContext","useScrollTo","SCROLL_DELAY","TimeColumn","props","units","value","optionalValue","type","onChange","onDblClick","changeOnScroll","_usePanelContext","prefixCls","cellRender","now","locale","panelPrefixCls","concat","cellPrefixCls","ulRef","useRef","checkDelayRef","clearDelayCheck","clearTimeout","current","_useScrollTo","_useScrollTo2","syncScroll","stopScroll","isScrolling","onInternalScroll","event","target","setTimeout","ul","firstLiTop","querySelector","offsetTop","liList","Array","from","querySelectorAll","liTopList","map","li","liDistList","top","index","disabled","Number","MAX_SAFE_INTEGER","Math","abs","scrollTop","minDist","min","apply","minDistIndex","findIndex","dist","targetUnit","columnPrefixCls","createElement","className","ref","onScroll","_ref","label","unitValue","inner","key","onClick","onDoubleClick","originNode","today","subType"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-picker/es/PickerPanel/TimePanel/TimePanelBody/TimeColumn.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport * as React from 'react';\nimport { usePanelContext } from \"../../context\";\nimport useScrollTo from \"./useScrollTo\";\nvar SCROLL_DELAY = 300;\nexport default function TimeColumn(props) {\n  var units = props.units,\n    value = props.value,\n    optionalValue = props.optionalValue,\n    type = props.type,\n    onChange = props.onChange,\n    onDblClick = props.onDblClick,\n    changeOnScroll = props.changeOnScroll;\n  var _usePanelContext = usePanelContext(),\n    prefixCls = _usePanelContext.prefixCls,\n    cellRender = _usePanelContext.cellRender,\n    now = _usePanelContext.now,\n    locale = _usePanelContext.locale;\n  var panelPrefixCls = \"\".concat(prefixCls, \"-time-panel\");\n  var cellPrefixCls = \"\".concat(prefixCls, \"-time-panel-cell\");\n\n  // ========================== Refs ==========================\n  var ulRef = React.useRef(null);\n\n  // ========================= Scroll =========================\n  var checkDelayRef = React.useRef();\n  var clearDelayCheck = function clearDelayCheck() {\n    clearTimeout(checkDelayRef.current);\n  };\n\n  // ========================== Sync ==========================\n  var _useScrollTo = useScrollTo(ulRef, value !== null && value !== void 0 ? value : optionalValue),\n    _useScrollTo2 = _slicedToArray(_useScrollTo, 3),\n    syncScroll = _useScrollTo2[0],\n    stopScroll = _useScrollTo2[1],\n    isScrolling = _useScrollTo2[2];\n\n  // Effect sync value scroll\n  useLayoutEffect(function () {\n    syncScroll();\n    clearDelayCheck();\n    return function () {\n      stopScroll();\n      clearDelayCheck();\n    };\n  }, [value, optionalValue, units]);\n\n  // ========================= Change =========================\n  // Scroll event if sync onScroll\n  var onInternalScroll = function onInternalScroll(event) {\n    clearDelayCheck();\n    var target = event.target;\n    if (!isScrolling() && changeOnScroll) {\n      checkDelayRef.current = setTimeout(function () {\n        var ul = ulRef.current;\n        var firstLiTop = ul.querySelector(\"li\").offsetTop;\n        var liList = Array.from(ul.querySelectorAll(\"li\"));\n        var liTopList = liList.map(function (li) {\n          return li.offsetTop - firstLiTop;\n        });\n        var liDistList = liTopList.map(function (top, index) {\n          if (units[index].disabled) {\n            return Number.MAX_SAFE_INTEGER;\n          }\n          return Math.abs(top - target.scrollTop);\n        });\n\n        // Find min distance index\n        var minDist = Math.min.apply(Math, _toConsumableArray(liDistList));\n        var minDistIndex = liDistList.findIndex(function (dist) {\n          return dist === minDist;\n        });\n        var targetUnit = units[minDistIndex];\n        if (targetUnit && !targetUnit.disabled) {\n          onChange(targetUnit.value);\n        }\n      }, SCROLL_DELAY);\n    }\n  };\n\n  // ========================= Render =========================\n  var columnPrefixCls = \"\".concat(panelPrefixCls, \"-column\");\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: columnPrefixCls,\n    ref: ulRef,\n    \"data-type\": type,\n    onScroll: onInternalScroll\n  }, units.map(function (_ref) {\n    var label = _ref.label,\n      unitValue = _ref.value,\n      disabled = _ref.disabled;\n    var inner = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(cellPrefixCls, \"-inner\")\n    }, label);\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: unitValue,\n      className: classNames(cellPrefixCls, _defineProperty(_defineProperty({}, \"\".concat(cellPrefixCls, \"-selected\"), value === unitValue), \"\".concat(cellPrefixCls, \"-disabled\"), disabled)),\n      onClick: function onClick() {\n        if (!disabled) {\n          onChange(unitValue);\n        }\n      },\n      onDoubleClick: function onDoubleClick() {\n        if (!disabled && onDblClick) {\n          onDblClick();\n        }\n      },\n      \"data-value\": unitValue\n    }, cellRender ? cellRender(unitValue, {\n      prefixCls: prefixCls,\n      originNode: inner,\n      today: now,\n      type: 'time',\n      subType: type,\n      locale: locale\n    }) : inner);\n  }));\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}