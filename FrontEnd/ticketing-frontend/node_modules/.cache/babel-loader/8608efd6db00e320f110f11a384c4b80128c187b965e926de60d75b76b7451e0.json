{"ast":null,"code":"import _objectSpread from\"@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import{getClientSize}from\"rc-util/es/Dom/css\";import isEqual from\"rc-util/es/isEqual\";import raf from\"rc-util/es/raf\";import{useRef,useState}from'react';var initialTransform={x:0,y:0,rotate:0,scale:1,flipX:false,flipY:false};export default function useImageTransform(imgRef,minScale,maxScale,onTransform){var frame=useRef(null);var queue=useRef([]);var _useState=useState(initialTransform),_useState2=_slicedToArray(_useState,2),transform=_useState2[0],setTransform=_useState2[1];var resetTransform=function resetTransform(action){setTransform(initialTransform);if(onTransform&&!isEqual(initialTransform,transform)){onTransform({transform:initialTransform,action:action});}};/** Direct update transform */var updateTransform=function updateTransform(newTransform,action){if(frame.current===null){queue.current=[];frame.current=raf(function(){setTransform(function(preState){var memoState=preState;queue.current.forEach(function(queueState){memoState=_objectSpread(_objectSpread({},memoState),queueState);});frame.current=null;onTransform===null||onTransform===void 0||onTransform({transform:memoState,action:action});return memoState;});});}queue.current.push(_objectSpread(_objectSpread({},transform),newTransform));};/** Scale according to the position of centerX and centerY */var dispatchZoomChange=function dispatchZoomChange(ratio,action,centerX,centerY,isTouch){var _imgRef$current=imgRef.current,width=_imgRef$current.width,height=_imgRef$current.height,offsetWidth=_imgRef$current.offsetWidth,offsetHeight=_imgRef$current.offsetHeight,offsetLeft=_imgRef$current.offsetLeft,offsetTop=_imgRef$current.offsetTop;var newRatio=ratio;var newScale=transform.scale*ratio;if(newScale>maxScale){newScale=maxScale;newRatio=maxScale/transform.scale;}else if(newScale<minScale){// For mobile interactions, allow scaling down to the minimum scale.\nnewScale=isTouch?newScale:minScale;newRatio=newScale/transform.scale;}/** Default center point scaling */var mergedCenterX=centerX!==null&&centerX!==void 0?centerX:innerWidth/2;var mergedCenterY=centerY!==null&&centerY!==void 0?centerY:innerHeight/2;var diffRatio=newRatio-1;/** Deviation calculated from image size */var diffImgX=diffRatio*width*0.5;var diffImgY=diffRatio*height*0.5;/** The difference between the click position and the edge of the document */var diffOffsetLeft=diffRatio*(mergedCenterX-transform.x-offsetLeft);var diffOffsetTop=diffRatio*(mergedCenterY-transform.y-offsetTop);/** Final positioning */var newX=transform.x-(diffOffsetLeft-diffImgX);var newY=transform.y-(diffOffsetTop-diffImgY);/**\n     * When zooming the image\n     * When the image size is smaller than the width and height of the window, the position is initialized\n     */if(ratio<1&&newScale===1){var mergedWidth=offsetWidth*newScale;var mergedHeight=offsetHeight*newScale;var _getClientSize=getClientSize(),clientWidth=_getClientSize.width,clientHeight=_getClientSize.height;if(mergedWidth<=clientWidth&&mergedHeight<=clientHeight){newX=0;newY=0;}}updateTransform({x:newX,y:newY,scale:newScale},action);};return{transform:transform,resetTransform:resetTransform,updateTransform:updateTransform,dispatchZoomChange:dispatchZoomChange};}","map":{"version":3,"names":["_objectSpread","_slicedToArray","getClientSize","isEqual","raf","useRef","useState","initialTransform","x","y","rotate","scale","flipX","flipY","useImageTransform","imgRef","minScale","maxScale","onTransform","frame","queue","_useState","_useState2","transform","setTransform","resetTransform","action","updateTransform","newTransform","current","preState","memoState","forEach","queueState","push","dispatchZoomChange","ratio","centerX","centerY","isTouch","_imgRef$current","width","height","offsetWidth","offsetHeight","offsetLeft","offsetTop","newRatio","newScale","mergedCenterX","innerWidth","mergedCenterY","innerHeight","diffRatio","diffImgX","diffImgY","diffOffsetLeft","diffOffsetTop","newX","newY","mergedWidth","mergedHeight","_getClientSize","clientWidth","clientHeight"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-image/es/hooks/useImageTransform.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { getClientSize } from \"rc-util/es/Dom/css\";\nimport isEqual from \"rc-util/es/isEqual\";\nimport raf from \"rc-util/es/raf\";\nimport { useRef, useState } from 'react';\nvar initialTransform = {\n  x: 0,\n  y: 0,\n  rotate: 0,\n  scale: 1,\n  flipX: false,\n  flipY: false\n};\nexport default function useImageTransform(imgRef, minScale, maxScale, onTransform) {\n  var frame = useRef(null);\n  var queue = useRef([]);\n  var _useState = useState(initialTransform),\n    _useState2 = _slicedToArray(_useState, 2),\n    transform = _useState2[0],\n    setTransform = _useState2[1];\n  var resetTransform = function resetTransform(action) {\n    setTransform(initialTransform);\n    if (onTransform && !isEqual(initialTransform, transform)) {\n      onTransform({\n        transform: initialTransform,\n        action: action\n      });\n    }\n  };\n\n  /** Direct update transform */\n  var updateTransform = function updateTransform(newTransform, action) {\n    if (frame.current === null) {\n      queue.current = [];\n      frame.current = raf(function () {\n        setTransform(function (preState) {\n          var memoState = preState;\n          queue.current.forEach(function (queueState) {\n            memoState = _objectSpread(_objectSpread({}, memoState), queueState);\n          });\n          frame.current = null;\n          onTransform === null || onTransform === void 0 || onTransform({\n            transform: memoState,\n            action: action\n          });\n          return memoState;\n        });\n      });\n    }\n    queue.current.push(_objectSpread(_objectSpread({}, transform), newTransform));\n  };\n\n  /** Scale according to the position of centerX and centerY */\n  var dispatchZoomChange = function dispatchZoomChange(ratio, action, centerX, centerY, isTouch) {\n    var _imgRef$current = imgRef.current,\n      width = _imgRef$current.width,\n      height = _imgRef$current.height,\n      offsetWidth = _imgRef$current.offsetWidth,\n      offsetHeight = _imgRef$current.offsetHeight,\n      offsetLeft = _imgRef$current.offsetLeft,\n      offsetTop = _imgRef$current.offsetTop;\n    var newRatio = ratio;\n    var newScale = transform.scale * ratio;\n    if (newScale > maxScale) {\n      newScale = maxScale;\n      newRatio = maxScale / transform.scale;\n    } else if (newScale < minScale) {\n      // For mobile interactions, allow scaling down to the minimum scale.\n      newScale = isTouch ? newScale : minScale;\n      newRatio = newScale / transform.scale;\n    }\n\n    /** Default center point scaling */\n    var mergedCenterX = centerX !== null && centerX !== void 0 ? centerX : innerWidth / 2;\n    var mergedCenterY = centerY !== null && centerY !== void 0 ? centerY : innerHeight / 2;\n    var diffRatio = newRatio - 1;\n    /** Deviation calculated from image size */\n    var diffImgX = diffRatio * width * 0.5;\n    var diffImgY = diffRatio * height * 0.5;\n    /** The difference between the click position and the edge of the document */\n    var diffOffsetLeft = diffRatio * (mergedCenterX - transform.x - offsetLeft);\n    var diffOffsetTop = diffRatio * (mergedCenterY - transform.y - offsetTop);\n    /** Final positioning */\n    var newX = transform.x - (diffOffsetLeft - diffImgX);\n    var newY = transform.y - (diffOffsetTop - diffImgY);\n\n    /**\n     * When zooming the image\n     * When the image size is smaller than the width and height of the window, the position is initialized\n     */\n    if (ratio < 1 && newScale === 1) {\n      var mergedWidth = offsetWidth * newScale;\n      var mergedHeight = offsetHeight * newScale;\n      var _getClientSize = getClientSize(),\n        clientWidth = _getClientSize.width,\n        clientHeight = _getClientSize.height;\n      if (mergedWidth <= clientWidth && mergedHeight <= clientHeight) {\n        newX = 0;\n        newY = 0;\n      }\n    }\n    updateTransform({\n      x: newX,\n      y: newY,\n      scale: newScale\n    }, action);\n  };\n  return {\n    transform: transform,\n    resetTransform: resetTransform,\n    updateTransform: updateTransform,\n    dispatchZoomChange: dispatchZoomChange\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}