{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import _typeof from\"@babel/runtime/helpers/esm/typeof\";import useMemo from\"rc-util/es/hooks/useMemo\";import isEqual from\"rc-util/es/isEqual\";import getValue from\"rc-util/es/utils/get\";import warning from\"rc-util/es/warning\";import*as React from'react';import PerfContext from\"../context/PerfContext\";import{validateValue}from\"../utils/valueUtil\";import{useImmutableMark}from\"../context/TableContext\";function isRenderCell(data){return data&&_typeof(data)==='object'&&!Array.isArray(data)&&!/*#__PURE__*/React.isValidElement(data);}export default function useCellRender(record,dataIndex,renderIndex,children,render,shouldCellUpdate){// TODO: Remove this after next major version\nvar perfRecord=React.useContext(PerfContext);var mark=useImmutableMark();// ======================== Render ========================\nvar retData=useMemo(function(){if(validateValue(children)){return[children];}var path=dataIndex===null||dataIndex===undefined||dataIndex===''?[]:Array.isArray(dataIndex)?dataIndex:[dataIndex];var value=getValue(record,path);// Customize render node\nvar returnChildNode=value;var returnCellProps=undefined;if(render){var renderData=render(value,record,renderIndex);if(isRenderCell(renderData)){if(process.env.NODE_ENV!=='production'){warning(false,'`columns.render` return cell props is deprecated with perf issue, please use `onCell` instead.');}returnChildNode=renderData.children;returnCellProps=renderData.props;perfRecord.renderWithProps=true;}else{returnChildNode=renderData;}}return[returnChildNode,returnCellProps];},[// Force update deps\nmark,// Normal deps\nrecord,children,dataIndex,render,renderIndex],function(prev,next){if(shouldCellUpdate){var _prev=_slicedToArray(prev,2),prevRecord=_prev[1];var _next=_slicedToArray(next,2),nextRecord=_next[1];return shouldCellUpdate(nextRecord,prevRecord);}// Legacy mode should always update\nif(perfRecord.renderWithProps){return true;}return!isEqual(prev,next,true);});return retData;}","map":{"version":3,"names":["_slicedToArray","_typeof","useMemo","isEqual","getValue","warning","React","PerfContext","validateValue","useImmutableMark","isRenderCell","data","Array","isArray","isValidElement","useCellRender","record","dataIndex","renderIndex","children","render","shouldCellUpdate","perfRecord","useContext","mark","retData","path","undefined","value","returnChildNode","returnCellProps","renderData","process","env","NODE_ENV","props","renderWithProps","prev","next","_prev","prevRecord","_next","nextRecord"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-table/es/Cell/useCellRender.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport useMemo from \"rc-util/es/hooks/useMemo\";\nimport isEqual from \"rc-util/es/isEqual\";\nimport getValue from \"rc-util/es/utils/get\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport PerfContext from \"../context/PerfContext\";\nimport { validateValue } from \"../utils/valueUtil\";\nimport { useImmutableMark } from \"../context/TableContext\";\nfunction isRenderCell(data) {\n  return data && _typeof(data) === 'object' && !Array.isArray(data) && ! /*#__PURE__*/React.isValidElement(data);\n}\nexport default function useCellRender(record, dataIndex, renderIndex, children, render, shouldCellUpdate) {\n  // TODO: Remove this after next major version\n  var perfRecord = React.useContext(PerfContext);\n  var mark = useImmutableMark();\n\n  // ======================== Render ========================\n  var retData = useMemo(function () {\n    if (validateValue(children)) {\n      return [children];\n    }\n    var path = dataIndex === null || dataIndex === undefined || dataIndex === '' ? [] : Array.isArray(dataIndex) ? dataIndex : [dataIndex];\n    var value = getValue(record, path);\n\n    // Customize render node\n    var returnChildNode = value;\n    var returnCellProps = undefined;\n    if (render) {\n      var renderData = render(value, record, renderIndex);\n      if (isRenderCell(renderData)) {\n        if (process.env.NODE_ENV !== 'production') {\n          warning(false, '`columns.render` return cell props is deprecated with perf issue, please use `onCell` instead.');\n        }\n        returnChildNode = renderData.children;\n        returnCellProps = renderData.props;\n        perfRecord.renderWithProps = true;\n      } else {\n        returnChildNode = renderData;\n      }\n    }\n    return [returnChildNode, returnCellProps];\n  }, [\n  // Force update deps\n  mark,\n  // Normal deps\n  record, children, dataIndex, render, renderIndex], function (prev, next) {\n    if (shouldCellUpdate) {\n      var _prev = _slicedToArray(prev, 2),\n        prevRecord = _prev[1];\n      var _next = _slicedToArray(next, 2),\n        nextRecord = _next[1];\n      return shouldCellUpdate(nextRecord, prevRecord);\n    }\n\n    // Legacy mode should always update\n    if (perfRecord.renderWithProps) {\n      return true;\n    }\n    return !isEqual(prev, next, true);\n  });\n  return retData;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}