{"ast":null,"code":"import _objectSpread from\"@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";import*as React from'react';import warning from\"rc-util/es/warning\";import FieldContext from\"./FieldContext\";import Field from\"./Field\";import{move as _move,getNamePath}from\"./utils/valueUtil\";import ListContext from\"./ListContext\";function List(_ref){var name=_ref.name,initialValue=_ref.initialValue,children=_ref.children,rules=_ref.rules,validateTrigger=_ref.validateTrigger,isListField=_ref.isListField;var context=React.useContext(FieldContext);var wrapperListContext=React.useContext(ListContext);var keyRef=React.useRef({keys:[],id:0});var keyManager=keyRef.current;var prefixName=React.useMemo(function(){var parentPrefixName=getNamePath(context.prefixName)||[];return[].concat(_toConsumableArray(parentPrefixName),_toConsumableArray(getNamePath(name)));},[context.prefixName,name]);var fieldContext=React.useMemo(function(){return _objectSpread(_objectSpread({},context),{},{prefixName:prefixName});},[context,prefixName]);// List context\nvar listContext=React.useMemo(function(){return{getKey:function getKey(namePath){var len=prefixName.length;var pathName=namePath[len];return[keyManager.keys[pathName],namePath.slice(len+1)];}};},[prefixName]);// User should not pass `children` as other type.\nif(typeof children!=='function'){warning(false,'Form.List only accepts function as children.');return null;}var shouldUpdate=function shouldUpdate(prevValue,nextValue,_ref2){var source=_ref2.source;if(source==='internal'){return false;}return prevValue!==nextValue;};return/*#__PURE__*/React.createElement(ListContext.Provider,{value:listContext},/*#__PURE__*/React.createElement(FieldContext.Provider,{value:fieldContext},/*#__PURE__*/React.createElement(Field,{name:[],shouldUpdate:shouldUpdate,rules:rules,validateTrigger:validateTrigger,initialValue:initialValue,isList:true,isListField:isListField!==null&&isListField!==void 0?isListField:!!wrapperListContext},function(_ref3,meta){var _ref3$value=_ref3.value,value=_ref3$value===void 0?[]:_ref3$value,onChange=_ref3.onChange;var getFieldValue=context.getFieldValue;var getNewValue=function getNewValue(){var values=getFieldValue(prefixName||[]);return values||[];};/**\n     * Always get latest value in case user update fields by `form` api.\n     */var operations={add:function add(defaultValue,index){// Mapping keys\nvar newValue=getNewValue();if(index>=0&&index<=newValue.length){keyManager.keys=[].concat(_toConsumableArray(keyManager.keys.slice(0,index)),[keyManager.id],_toConsumableArray(keyManager.keys.slice(index)));onChange([].concat(_toConsumableArray(newValue.slice(0,index)),[defaultValue],_toConsumableArray(newValue.slice(index))));}else{if(process.env.NODE_ENV!=='production'&&(index<0||index>newValue.length)){warning(false,'The second parameter of the add function should be a valid positive number.');}keyManager.keys=[].concat(_toConsumableArray(keyManager.keys),[keyManager.id]);onChange([].concat(_toConsumableArray(newValue),[defaultValue]));}keyManager.id+=1;},remove:function remove(index){var newValue=getNewValue();var indexSet=new Set(Array.isArray(index)?index:[index]);if(indexSet.size<=0){return;}keyManager.keys=keyManager.keys.filter(function(_,keysIndex){return!indexSet.has(keysIndex);});// Trigger store change\nonChange(newValue.filter(function(_,valueIndex){return!indexSet.has(valueIndex);}));},move:function move(from,to){if(from===to){return;}var newValue=getNewValue();// Do not handle out of range\nif(from<0||from>=newValue.length||to<0||to>=newValue.length){return;}keyManager.keys=_move(keyManager.keys,from,to);// Trigger store change\nonChange(_move(newValue,from,to));}};var listValue=value||[];if(!Array.isArray(listValue)){listValue=[];if(process.env.NODE_ENV!=='production'){warning(false,\"Current value of '\".concat(prefixName.join(' > '),\"' is not an array type.\"));}}return children(listValue.map(function(__,index){var key=keyManager.keys[index];if(key===undefined){keyManager.keys[index]=keyManager.id;key=keyManager.keys[index];keyManager.id+=1;}return{name:index,key:key,isListField:true};}),operations,meta);})));}export default List;","map":{"version":3,"names":["_objectSpread","_toConsumableArray","React","warning","FieldContext","Field","move","_move","getNamePath","ListContext","List","_ref","name","initialValue","children","rules","validateTrigger","isListField","context","useContext","wrapperListContext","keyRef","useRef","keys","id","keyManager","current","prefixName","useMemo","parentPrefixName","concat","fieldContext","listContext","getKey","namePath","len","length","pathName","slice","shouldUpdate","prevValue","nextValue","_ref2","source","createElement","Provider","value","isList","_ref3","meta","_ref3$value","onChange","getFieldValue","getNewValue","values","operations","add","defaultValue","index","newValue","process","env","NODE_ENV","remove","indexSet","Set","Array","isArray","size","filter","_","keysIndex","has","valueIndex","from","to","listValue","join","map","__","key","undefined"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-field-form/es/List.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport warning from \"rc-util/es/warning\";\nimport FieldContext from \"./FieldContext\";\nimport Field from \"./Field\";\nimport { move as _move, getNamePath } from \"./utils/valueUtil\";\nimport ListContext from \"./ListContext\";\nfunction List(_ref) {\n  var name = _ref.name,\n    initialValue = _ref.initialValue,\n    children = _ref.children,\n    rules = _ref.rules,\n    validateTrigger = _ref.validateTrigger,\n    isListField = _ref.isListField;\n  var context = React.useContext(FieldContext);\n  var wrapperListContext = React.useContext(ListContext);\n  var keyRef = React.useRef({\n    keys: [],\n    id: 0\n  });\n  var keyManager = keyRef.current;\n  var prefixName = React.useMemo(function () {\n    var parentPrefixName = getNamePath(context.prefixName) || [];\n    return [].concat(_toConsumableArray(parentPrefixName), _toConsumableArray(getNamePath(name)));\n  }, [context.prefixName, name]);\n  var fieldContext = React.useMemo(function () {\n    return _objectSpread(_objectSpread({}, context), {}, {\n      prefixName: prefixName\n    });\n  }, [context, prefixName]);\n\n  // List context\n  var listContext = React.useMemo(function () {\n    return {\n      getKey: function getKey(namePath) {\n        var len = prefixName.length;\n        var pathName = namePath[len];\n        return [keyManager.keys[pathName], namePath.slice(len + 1)];\n      }\n    };\n  }, [prefixName]);\n\n  // User should not pass `children` as other type.\n  if (typeof children !== 'function') {\n    warning(false, 'Form.List only accepts function as children.');\n    return null;\n  }\n  var shouldUpdate = function shouldUpdate(prevValue, nextValue, _ref2) {\n    var source = _ref2.source;\n    if (source === 'internal') {\n      return false;\n    }\n    return prevValue !== nextValue;\n  };\n  return /*#__PURE__*/React.createElement(ListContext.Provider, {\n    value: listContext\n  }, /*#__PURE__*/React.createElement(FieldContext.Provider, {\n    value: fieldContext\n  }, /*#__PURE__*/React.createElement(Field, {\n    name: [],\n    shouldUpdate: shouldUpdate,\n    rules: rules,\n    validateTrigger: validateTrigger,\n    initialValue: initialValue,\n    isList: true,\n    isListField: isListField !== null && isListField !== void 0 ? isListField : !!wrapperListContext\n  }, function (_ref3, meta) {\n    var _ref3$value = _ref3.value,\n      value = _ref3$value === void 0 ? [] : _ref3$value,\n      onChange = _ref3.onChange;\n    var getFieldValue = context.getFieldValue;\n    var getNewValue = function getNewValue() {\n      var values = getFieldValue(prefixName || []);\n      return values || [];\n    };\n    /**\n     * Always get latest value in case user update fields by `form` api.\n     */\n    var operations = {\n      add: function add(defaultValue, index) {\n        // Mapping keys\n        var newValue = getNewValue();\n        if (index >= 0 && index <= newValue.length) {\n          keyManager.keys = [].concat(_toConsumableArray(keyManager.keys.slice(0, index)), [keyManager.id], _toConsumableArray(keyManager.keys.slice(index)));\n          onChange([].concat(_toConsumableArray(newValue.slice(0, index)), [defaultValue], _toConsumableArray(newValue.slice(index))));\n        } else {\n          if (process.env.NODE_ENV !== 'production' && (index < 0 || index > newValue.length)) {\n            warning(false, 'The second parameter of the add function should be a valid positive number.');\n          }\n          keyManager.keys = [].concat(_toConsumableArray(keyManager.keys), [keyManager.id]);\n          onChange([].concat(_toConsumableArray(newValue), [defaultValue]));\n        }\n        keyManager.id += 1;\n      },\n      remove: function remove(index) {\n        var newValue = getNewValue();\n        var indexSet = new Set(Array.isArray(index) ? index : [index]);\n        if (indexSet.size <= 0) {\n          return;\n        }\n        keyManager.keys = keyManager.keys.filter(function (_, keysIndex) {\n          return !indexSet.has(keysIndex);\n        });\n\n        // Trigger store change\n        onChange(newValue.filter(function (_, valueIndex) {\n          return !indexSet.has(valueIndex);\n        }));\n      },\n      move: function move(from, to) {\n        if (from === to) {\n          return;\n        }\n        var newValue = getNewValue();\n\n        // Do not handle out of range\n        if (from < 0 || from >= newValue.length || to < 0 || to >= newValue.length) {\n          return;\n        }\n        keyManager.keys = _move(keyManager.keys, from, to);\n\n        // Trigger store change\n        onChange(_move(newValue, from, to));\n      }\n    };\n    var listValue = value || [];\n    if (!Array.isArray(listValue)) {\n      listValue = [];\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, \"Current value of '\".concat(prefixName.join(' > '), \"' is not an array type.\"));\n      }\n    }\n    return children(listValue.map(function (__, index) {\n      var key = keyManager.keys[index];\n      if (key === undefined) {\n        keyManager.keys[index] = keyManager.id;\n        key = keyManager.keys[index];\n        keyManager.id += 1;\n      }\n      return {\n        name: index,\n        key: key,\n        isListField: true\n      };\n    }), operations, meta);\n  })));\n}\nexport default List;"],"mappings":"AAAA,MAAO,CAAAA,aAAa,KAAM,0CAA0C,CACpE,MAAO,CAAAC,kBAAkB,KAAM,8CAA8C,CAC7E,MAAO,GAAK,CAAAC,KAAK,KAAM,OAAO,CAC9B,MAAO,CAAAC,OAAO,KAAM,oBAAoB,CACxC,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,OAASC,IAAI,GAAI,CAAAC,KAAK,CAAEC,WAAW,KAAQ,mBAAmB,CAC9D,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,QAAS,CAAAC,IAAIA,CAACC,IAAI,CAAE,CAClB,GAAI,CAAAC,IAAI,CAAGD,IAAI,CAACC,IAAI,CAClBC,YAAY,CAAGF,IAAI,CAACE,YAAY,CAChCC,QAAQ,CAAGH,IAAI,CAACG,QAAQ,CACxBC,KAAK,CAAGJ,IAAI,CAACI,KAAK,CAClBC,eAAe,CAAGL,IAAI,CAACK,eAAe,CACtCC,WAAW,CAAGN,IAAI,CAACM,WAAW,CAChC,GAAI,CAAAC,OAAO,CAAGhB,KAAK,CAACiB,UAAU,CAACf,YAAY,CAAC,CAC5C,GAAI,CAAAgB,kBAAkB,CAAGlB,KAAK,CAACiB,UAAU,CAACV,WAAW,CAAC,CACtD,GAAI,CAAAY,MAAM,CAAGnB,KAAK,CAACoB,MAAM,CAAC,CACxBC,IAAI,CAAE,EAAE,CACRC,EAAE,CAAE,CACN,CAAC,CAAC,CACF,GAAI,CAAAC,UAAU,CAAGJ,MAAM,CAACK,OAAO,CAC/B,GAAI,CAAAC,UAAU,CAAGzB,KAAK,CAAC0B,OAAO,CAAC,UAAY,CACzC,GAAI,CAAAC,gBAAgB,CAAGrB,WAAW,CAACU,OAAO,CAACS,UAAU,CAAC,EAAI,EAAE,CAC5D,MAAO,EAAE,CAACG,MAAM,CAAC7B,kBAAkB,CAAC4B,gBAAgB,CAAC,CAAE5B,kBAAkB,CAACO,WAAW,CAACI,IAAI,CAAC,CAAC,CAAC,CAC/F,CAAC,CAAE,CAACM,OAAO,CAACS,UAAU,CAAEf,IAAI,CAAC,CAAC,CAC9B,GAAI,CAAAmB,YAAY,CAAG7B,KAAK,CAAC0B,OAAO,CAAC,UAAY,CAC3C,MAAO,CAAA5B,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,CAAEkB,OAAO,CAAC,CAAE,CAAC,CAAC,CAAE,CACnDS,UAAU,CAAEA,UACd,CAAC,CAAC,CACJ,CAAC,CAAE,CAACT,OAAO,CAAES,UAAU,CAAC,CAAC,CAEzB;AACA,GAAI,CAAAK,WAAW,CAAG9B,KAAK,CAAC0B,OAAO,CAAC,UAAY,CAC1C,MAAO,CACLK,MAAM,CAAE,QAAS,CAAAA,MAAMA,CAACC,QAAQ,CAAE,CAChC,GAAI,CAAAC,GAAG,CAAGR,UAAU,CAACS,MAAM,CAC3B,GAAI,CAAAC,QAAQ,CAAGH,QAAQ,CAACC,GAAG,CAAC,CAC5B,MAAO,CAACV,UAAU,CAACF,IAAI,CAACc,QAAQ,CAAC,CAAEH,QAAQ,CAACI,KAAK,CAACH,GAAG,CAAG,CAAC,CAAC,CAAC,CAC7D,CACF,CAAC,CACH,CAAC,CAAE,CAACR,UAAU,CAAC,CAAC,CAEhB;AACA,GAAI,MAAO,CAAAb,QAAQ,GAAK,UAAU,CAAE,CAClCX,OAAO,CAAC,KAAK,CAAE,8CAA8C,CAAC,CAC9D,MAAO,KAAI,CACb,CACA,GAAI,CAAAoC,YAAY,CAAG,QAAS,CAAAA,YAAYA,CAACC,SAAS,CAAEC,SAAS,CAAEC,KAAK,CAAE,CACpE,GAAI,CAAAC,MAAM,CAAGD,KAAK,CAACC,MAAM,CACzB,GAAIA,MAAM,GAAK,UAAU,CAAE,CACzB,MAAO,MAAK,CACd,CACA,MAAO,CAAAH,SAAS,GAAKC,SAAS,CAChC,CAAC,CACD,MAAO,aAAavC,KAAK,CAAC0C,aAAa,CAACnC,WAAW,CAACoC,QAAQ,CAAE,CAC5DC,KAAK,CAAEd,WACT,CAAC,CAAE,aAAa9B,KAAK,CAAC0C,aAAa,CAACxC,YAAY,CAACyC,QAAQ,CAAE,CACzDC,KAAK,CAAEf,YACT,CAAC,CAAE,aAAa7B,KAAK,CAAC0C,aAAa,CAACvC,KAAK,CAAE,CACzCO,IAAI,CAAE,EAAE,CACR2B,YAAY,CAAEA,YAAY,CAC1BxB,KAAK,CAAEA,KAAK,CACZC,eAAe,CAAEA,eAAe,CAChCH,YAAY,CAAEA,YAAY,CAC1BkC,MAAM,CAAE,IAAI,CACZ9B,WAAW,CAAEA,WAAW,GAAK,IAAI,EAAIA,WAAW,GAAK,IAAK,EAAC,CAAGA,WAAW,CAAG,CAAC,CAACG,kBAChF,CAAC,CAAE,SAAU4B,KAAK,CAAEC,IAAI,CAAE,CACxB,GAAI,CAAAC,WAAW,CAAGF,KAAK,CAACF,KAAK,CAC3BA,KAAK,CAAGI,WAAW,GAAK,IAAK,EAAC,CAAG,EAAE,CAAGA,WAAW,CACjDC,QAAQ,CAAGH,KAAK,CAACG,QAAQ,CAC3B,GAAI,CAAAC,aAAa,CAAGlC,OAAO,CAACkC,aAAa,CACzC,GAAI,CAAAC,WAAW,CAAG,QAAS,CAAAA,WAAWA,CAAA,CAAG,CACvC,GAAI,CAAAC,MAAM,CAAGF,aAAa,CAACzB,UAAU,EAAI,EAAE,CAAC,CAC5C,MAAO,CAAA2B,MAAM,EAAI,EAAE,CACrB,CAAC,CACD;AACJ;AACA,OACI,GAAI,CAAAC,UAAU,CAAG,CACfC,GAAG,CAAE,QAAS,CAAAA,GAAGA,CAACC,YAAY,CAAEC,KAAK,CAAE,CACrC;AACA,GAAI,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC5B,GAAIK,KAAK,EAAI,CAAC,EAAIA,KAAK,EAAIC,QAAQ,CAACvB,MAAM,CAAE,CAC1CX,UAAU,CAACF,IAAI,CAAG,EAAE,CAACO,MAAM,CAAC7B,kBAAkB,CAACwB,UAAU,CAACF,IAAI,CAACe,KAAK,CAAC,CAAC,CAAEoB,KAAK,CAAC,CAAC,CAAE,CAACjC,UAAU,CAACD,EAAE,CAAC,CAAEvB,kBAAkB,CAACwB,UAAU,CAACF,IAAI,CAACe,KAAK,CAACoB,KAAK,CAAC,CAAC,CAAC,CACnJP,QAAQ,CAAC,EAAE,CAACrB,MAAM,CAAC7B,kBAAkB,CAAC0D,QAAQ,CAACrB,KAAK,CAAC,CAAC,CAAEoB,KAAK,CAAC,CAAC,CAAE,CAACD,YAAY,CAAC,CAAExD,kBAAkB,CAAC0D,QAAQ,CAACrB,KAAK,CAACoB,KAAK,CAAC,CAAC,CAAC,CAAC,CAC9H,CAAC,IAAM,CACL,GAAIE,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAK,YAAY,GAAKJ,KAAK,CAAG,CAAC,EAAIA,KAAK,CAAGC,QAAQ,CAACvB,MAAM,CAAC,CAAE,CACnFjC,OAAO,CAAC,KAAK,CAAE,6EAA6E,CAAC,CAC/F,CACAsB,UAAU,CAACF,IAAI,CAAG,EAAE,CAACO,MAAM,CAAC7B,kBAAkB,CAACwB,UAAU,CAACF,IAAI,CAAC,CAAE,CAACE,UAAU,CAACD,EAAE,CAAC,CAAC,CACjF2B,QAAQ,CAAC,EAAE,CAACrB,MAAM,CAAC7B,kBAAkB,CAAC0D,QAAQ,CAAC,CAAE,CAACF,YAAY,CAAC,CAAC,CAAC,CACnE,CACAhC,UAAU,CAACD,EAAE,EAAI,CAAC,CACpB,CAAC,CACDuC,MAAM,CAAE,QAAS,CAAAA,MAAMA,CAACL,KAAK,CAAE,CAC7B,GAAI,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC5B,GAAI,CAAAW,QAAQ,CAAG,GAAI,CAAAC,GAAG,CAACC,KAAK,CAACC,OAAO,CAACT,KAAK,CAAC,CAAGA,KAAK,CAAG,CAACA,KAAK,CAAC,CAAC,CAC9D,GAAIM,QAAQ,CAACI,IAAI,EAAI,CAAC,CAAE,CACtB,OACF,CACA3C,UAAU,CAACF,IAAI,CAAGE,UAAU,CAACF,IAAI,CAAC8C,MAAM,CAAC,SAAUC,CAAC,CAAEC,SAAS,CAAE,CAC/D,MAAO,CAACP,QAAQ,CAACQ,GAAG,CAACD,SAAS,CAAC,CACjC,CAAC,CAAC,CAEF;AACApB,QAAQ,CAACQ,QAAQ,CAACU,MAAM,CAAC,SAAUC,CAAC,CAAEG,UAAU,CAAE,CAChD,MAAO,CAACT,QAAQ,CAACQ,GAAG,CAACC,UAAU,CAAC,CAClC,CAAC,CAAC,CAAC,CACL,CAAC,CACDnE,IAAI,CAAE,QAAS,CAAAA,IAAIA,CAACoE,IAAI,CAAEC,EAAE,CAAE,CAC5B,GAAID,IAAI,GAAKC,EAAE,CAAE,CACf,OACF,CACA,GAAI,CAAAhB,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAE5B;AACA,GAAIqB,IAAI,CAAG,CAAC,EAAIA,IAAI,EAAIf,QAAQ,CAACvB,MAAM,EAAIuC,EAAE,CAAG,CAAC,EAAIA,EAAE,EAAIhB,QAAQ,CAACvB,MAAM,CAAE,CAC1E,OACF,CACAX,UAAU,CAACF,IAAI,CAAGhB,KAAK,CAACkB,UAAU,CAACF,IAAI,CAAEmD,IAAI,CAAEC,EAAE,CAAC,CAElD;AACAxB,QAAQ,CAAC5C,KAAK,CAACoD,QAAQ,CAAEe,IAAI,CAAEC,EAAE,CAAC,CAAC,CACrC,CACF,CAAC,CACD,GAAI,CAAAC,SAAS,CAAG9B,KAAK,EAAI,EAAE,CAC3B,GAAI,CAACoB,KAAK,CAACC,OAAO,CAACS,SAAS,CAAC,CAAE,CAC7BA,SAAS,CAAG,EAAE,CACd,GAAIhB,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAK,YAAY,CAAE,CACzC3D,OAAO,CAAC,KAAK,CAAE,oBAAoB,CAAC2B,MAAM,CAACH,UAAU,CAACkD,IAAI,CAAC,KAAK,CAAC,CAAE,yBAAyB,CAAC,CAAC,CAChG,CACF,CACA,MAAO,CAAA/D,QAAQ,CAAC8D,SAAS,CAACE,GAAG,CAAC,SAAUC,EAAE,CAAErB,KAAK,CAAE,CACjD,GAAI,CAAAsB,GAAG,CAAGvD,UAAU,CAACF,IAAI,CAACmC,KAAK,CAAC,CAChC,GAAIsB,GAAG,GAAKC,SAAS,CAAE,CACrBxD,UAAU,CAACF,IAAI,CAACmC,KAAK,CAAC,CAAGjC,UAAU,CAACD,EAAE,CACtCwD,GAAG,CAAGvD,UAAU,CAACF,IAAI,CAACmC,KAAK,CAAC,CAC5BjC,UAAU,CAACD,EAAE,EAAI,CAAC,CACpB,CACA,MAAO,CACLZ,IAAI,CAAE8C,KAAK,CACXsB,GAAG,CAAEA,GAAG,CACR/D,WAAW,CAAE,IACf,CAAC,CACH,CAAC,CAAC,CAAEsC,UAAU,CAAEN,IAAI,CAAC,CACvB,CAAC,CAAC,CAAC,CAAC,CACN,CACA,cAAe,CAAAvC,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}