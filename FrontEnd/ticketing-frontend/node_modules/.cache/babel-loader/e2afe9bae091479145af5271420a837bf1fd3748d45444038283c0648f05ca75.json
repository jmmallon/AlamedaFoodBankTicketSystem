{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";import useLayoutEffect from\"rc-util/es/hooks/useLayoutEffect\";import{collectScroller,getWin}from\"../util\";export default function useWatch(open,target,popup,onAlign,onScroll){useLayoutEffect(function(){if(open&&target&&popup){var targetElement=target;var popupElement=popup;var targetScrollList=collectScroller(targetElement);var popupScrollList=collectScroller(popupElement);var win=getWin(popupElement);var mergedList=new Set([win].concat(_toConsumableArray(targetScrollList),_toConsumableArray(popupScrollList)));function notifyScroll(){onAlign();onScroll();}mergedList.forEach(function(scroller){scroller.addEventListener('scroll',notifyScroll,{passive:true});});win.addEventListener('resize',notifyScroll,{passive:true});// First time always do align\nonAlign();return function(){mergedList.forEach(function(scroller){scroller.removeEventListener('scroll',notifyScroll);win.removeEventListener('resize',notifyScroll);});};}},[open,target,popup]);}","map":{"version":3,"names":["_toConsumableArray","useLayoutEffect","collectScroller","getWin","useWatch","open","target","popup","onAlign","onScroll","targetElement","popupElement","targetScrollList","popupScrollList","win","mergedList","Set","concat","notifyScroll","forEach","scroller","addEventListener","passive","removeEventListener"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/@rc-component/trigger/es/hooks/useWatch.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport { collectScroller, getWin } from \"../util\";\nexport default function useWatch(open, target, popup, onAlign, onScroll) {\n  useLayoutEffect(function () {\n    if (open && target && popup) {\n      var targetElement = target;\n      var popupElement = popup;\n      var targetScrollList = collectScroller(targetElement);\n      var popupScrollList = collectScroller(popupElement);\n      var win = getWin(popupElement);\n      var mergedList = new Set([win].concat(_toConsumableArray(targetScrollList), _toConsumableArray(popupScrollList)));\n      function notifyScroll() {\n        onAlign();\n        onScroll();\n      }\n      mergedList.forEach(function (scroller) {\n        scroller.addEventListener('scroll', notifyScroll, {\n          passive: true\n        });\n      });\n      win.addEventListener('resize', notifyScroll, {\n        passive: true\n      });\n\n      // First time always do align\n      onAlign();\n      return function () {\n        mergedList.forEach(function (scroller) {\n          scroller.removeEventListener('scroll', notifyScroll);\n          win.removeEventListener('resize', notifyScroll);\n        });\n      };\n    }\n  }, [open, target, popup]);\n}"],"mappings":"AAAA,MAAO,CAAAA,kBAAkB,KAAM,8CAA8C,CAC7E,MAAO,CAAAC,eAAe,KAAM,kCAAkC,CAC9D,OAASC,eAAe,CAAEC,MAAM,KAAQ,SAAS,CACjD,cAAe,SAAS,CAAAC,QAAQA,CAACC,IAAI,CAAEC,MAAM,CAAEC,KAAK,CAAEC,OAAO,CAAEC,QAAQ,CAAE,CACvER,eAAe,CAAC,UAAY,CAC1B,GAAII,IAAI,EAAIC,MAAM,EAAIC,KAAK,CAAE,CAC3B,GAAI,CAAAG,aAAa,CAAGJ,MAAM,CAC1B,GAAI,CAAAK,YAAY,CAAGJ,KAAK,CACxB,GAAI,CAAAK,gBAAgB,CAAGV,eAAe,CAACQ,aAAa,CAAC,CACrD,GAAI,CAAAG,eAAe,CAAGX,eAAe,CAACS,YAAY,CAAC,CACnD,GAAI,CAAAG,GAAG,CAAGX,MAAM,CAACQ,YAAY,CAAC,CAC9B,GAAI,CAAAI,UAAU,CAAG,GAAI,CAAAC,GAAG,CAAC,CAACF,GAAG,CAAC,CAACG,MAAM,CAACjB,kBAAkB,CAACY,gBAAgB,CAAC,CAAEZ,kBAAkB,CAACa,eAAe,CAAC,CAAC,CAAC,CACjH,QAAS,CAAAK,YAAYA,CAAA,CAAG,CACtBV,OAAO,CAAC,CAAC,CACTC,QAAQ,CAAC,CAAC,CACZ,CACAM,UAAU,CAACI,OAAO,CAAC,SAAUC,QAAQ,CAAE,CACrCA,QAAQ,CAACC,gBAAgB,CAAC,QAAQ,CAAEH,YAAY,CAAE,CAChDI,OAAO,CAAE,IACX,CAAC,CAAC,CACJ,CAAC,CAAC,CACFR,GAAG,CAACO,gBAAgB,CAAC,QAAQ,CAAEH,YAAY,CAAE,CAC3CI,OAAO,CAAE,IACX,CAAC,CAAC,CAEF;AACAd,OAAO,CAAC,CAAC,CACT,MAAO,WAAY,CACjBO,UAAU,CAACI,OAAO,CAAC,SAAUC,QAAQ,CAAE,CACrCA,QAAQ,CAACG,mBAAmB,CAAC,QAAQ,CAAEL,YAAY,CAAC,CACpDJ,GAAG,CAACS,mBAAmB,CAAC,QAAQ,CAAEL,YAAY,CAAC,CACjD,CAAC,CAAC,CACJ,CAAC,CACH,CACF,CAAC,CAAE,CAACb,IAAI,CAAEC,MAAM,CAAEC,KAAK,CAAC,CAAC,CAC3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}