{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import useEvent from\"rc-util/es/hooks/useEvent\";import useLayoutEffect from\"rc-util/es/hooks/useLayoutEffect\";import isEqual from\"rc-util/es/isEqual\";import*as React from'react';import{unstable_batchedUpdates}from'react-dom';export function createContext(defaultValue){var Context=/*#__PURE__*/React.createContext(undefined);var Provider=function Provider(_ref){var value=_ref.value,children=_ref.children;var valueRef=React.useRef(value);valueRef.current=value;var _React$useState=React.useState(function(){return{getValue:function getValue(){return valueRef.current;},listeners:new Set()};}),_React$useState2=_slicedToArray(_React$useState,1),context=_React$useState2[0];useLayoutEffect(function(){unstable_batchedUpdates(function(){context.listeners.forEach(function(listener){listener(value);});});},[value]);return/*#__PURE__*/React.createElement(Context.Provider,{value:context},children);};return{Context:Context,Provider:Provider,defaultValue:defaultValue};}/** e.g. useSelect(userContext) => user */ /** e.g. useSelect(userContext, user => user.name) => user.name */ /** e.g. useSelect(userContext, ['name', 'age']) => user { name, age } */ /** e.g. useSelect(userContext, 'name') => user.name */export function useContext(holder,selector){var eventSelector=useEvent(typeof selector==='function'?selector:function(ctx){if(selector===undefined){return ctx;}if(!Array.isArray(selector)){return ctx[selector];}var obj={};selector.forEach(function(key){obj[key]=ctx[key];});return obj;});var context=React.useContext(holder===null||holder===void 0?void 0:holder.Context);var _ref2=context||{},listeners=_ref2.listeners,getValue=_ref2.getValue;var valueRef=React.useRef();valueRef.current=eventSelector(context?getValue():holder===null||holder===void 0?void 0:holder.defaultValue);var _React$useState3=React.useState({}),_React$useState4=_slicedToArray(_React$useState3,2),forceUpdate=_React$useState4[1];useLayoutEffect(function(){if(!context){return;}function trigger(nextValue){var nextSelectorValue=eventSelector(nextValue);if(!isEqual(valueRef.current,nextSelectorValue,true)){forceUpdate({});}}listeners.add(trigger);return function(){listeners.delete(trigger);};},[context]);return valueRef.current;}","map":{"version":3,"names":["_slicedToArray","useEvent","useLayoutEffect","isEqual","React","unstable_batchedUpdates","createContext","defaultValue","Context","undefined","Provider","_ref","value","children","valueRef","useRef","current","_React$useState","useState","getValue","listeners","Set","_React$useState2","context","forEach","listener","createElement","useContext","holder","selector","eventSelector","ctx","Array","isArray","obj","key","_ref2","_React$useState3","_React$useState4","forceUpdate","trigger","nextValue","nextSelectorValue","add","delete"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/@rc-component/context/es/context.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport isEqual from \"rc-util/es/isEqual\";\nimport * as React from 'react';\nimport { unstable_batchedUpdates } from 'react-dom';\nexport function createContext(defaultValue) {\n  var Context = /*#__PURE__*/React.createContext(undefined);\n  var Provider = function Provider(_ref) {\n    var value = _ref.value,\n      children = _ref.children;\n    var valueRef = React.useRef(value);\n    valueRef.current = value;\n    var _React$useState = React.useState(function () {\n        return {\n          getValue: function getValue() {\n            return valueRef.current;\n          },\n          listeners: new Set()\n        };\n      }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      context = _React$useState2[0];\n    useLayoutEffect(function () {\n      unstable_batchedUpdates(function () {\n        context.listeners.forEach(function (listener) {\n          listener(value);\n        });\n      });\n    }, [value]);\n    return /*#__PURE__*/React.createElement(Context.Provider, {\n      value: context\n    }, children);\n  };\n  return {\n    Context: Context,\n    Provider: Provider,\n    defaultValue: defaultValue\n  };\n}\n\n/** e.g. useSelect(userContext) => user */\n\n/** e.g. useSelect(userContext, user => user.name) => user.name */\n\n/** e.g. useSelect(userContext, ['name', 'age']) => user { name, age } */\n\n/** e.g. useSelect(userContext, 'name') => user.name */\n\nexport function useContext(holder, selector) {\n  var eventSelector = useEvent(typeof selector === 'function' ? selector : function (ctx) {\n    if (selector === undefined) {\n      return ctx;\n    }\n    if (!Array.isArray(selector)) {\n      return ctx[selector];\n    }\n    var obj = {};\n    selector.forEach(function (key) {\n      obj[key] = ctx[key];\n    });\n    return obj;\n  });\n  var context = React.useContext(holder === null || holder === void 0 ? void 0 : holder.Context);\n  var _ref2 = context || {},\n    listeners = _ref2.listeners,\n    getValue = _ref2.getValue;\n  var valueRef = React.useRef();\n  valueRef.current = eventSelector(context ? getValue() : holder === null || holder === void 0 ? void 0 : holder.defaultValue);\n  var _React$useState3 = React.useState({}),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    forceUpdate = _React$useState4[1];\n  useLayoutEffect(function () {\n    if (!context) {\n      return;\n    }\n    function trigger(nextValue) {\n      var nextSelectorValue = eventSelector(nextValue);\n      if (!isEqual(valueRef.current, nextSelectorValue, true)) {\n        forceUpdate({});\n      }\n    }\n    listeners.add(trigger);\n    return function () {\n      listeners.delete(trigger);\n    };\n  }, [context]);\n  return valueRef.current;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}