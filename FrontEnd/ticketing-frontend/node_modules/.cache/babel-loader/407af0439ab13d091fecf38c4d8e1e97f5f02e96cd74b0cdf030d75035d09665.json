{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/esm/extends\";import _objectSpread from\"@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import*as React from'react';import CSSMotion from'rc-motion';import{getMotion}from\"../utils/motionUtil\";import MenuContextProvider,{MenuContext}from\"../context/MenuContext\";import SubMenuList from\"./SubMenuList\";export default function InlineSubMenuList(_ref){var id=_ref.id,open=_ref.open,keyPath=_ref.keyPath,children=_ref.children;var fixedMode='inline';var _React$useContext=React.useContext(MenuContext),prefixCls=_React$useContext.prefixCls,forceSubMenuRender=_React$useContext.forceSubMenuRender,motion=_React$useContext.motion,defaultMotions=_React$useContext.defaultMotions,mode=_React$useContext.mode;// Always use latest mode check\nvar sameModeRef=React.useRef(false);sameModeRef.current=mode===fixedMode;// We record `destroy` mark here since when mode change from `inline` to others.\n// The inline list should remove when motion end.\nvar _React$useState=React.useState(!sameModeRef.current),_React$useState2=_slicedToArray(_React$useState,2),destroy=_React$useState2[0],setDestroy=_React$useState2[1];var mergedOpen=sameModeRef.current?open:false;// ================================= Effect =================================\n// Reset destroy state when mode change back\nReact.useEffect(function(){if(sameModeRef.current){setDestroy(false);}},[mode]);// ================================= Render =================================\nvar mergedMotion=_objectSpread({},getMotion(fixedMode,motion,defaultMotions));// No need appear since nest inlineCollapse changed\nif(keyPath.length>1){mergedMotion.motionAppear=false;}// Hide inline list when mode changed and motion end\nvar originOnVisibleChanged=mergedMotion.onVisibleChanged;mergedMotion.onVisibleChanged=function(newVisible){if(!sameModeRef.current&&!newVisible){setDestroy(true);}return originOnVisibleChanged===null||originOnVisibleChanged===void 0?void 0:originOnVisibleChanged(newVisible);};if(destroy){return null;}return/*#__PURE__*/React.createElement(MenuContextProvider,{mode:fixedMode,locked:!sameModeRef.current},/*#__PURE__*/React.createElement(CSSMotion,_extends({visible:mergedOpen},mergedMotion,{forceRender:forceSubMenuRender,removeOnLeave:false,leavedClassName:\"\".concat(prefixCls,\"-hidden\")}),function(_ref2){var motionClassName=_ref2.className,motionStyle=_ref2.style;return/*#__PURE__*/React.createElement(SubMenuList,{id:id,className:motionClassName,style:motionStyle},children);}));}","map":{"version":3,"names":["_extends","_objectSpread","_slicedToArray","React","CSSMotion","getMotion","MenuContextProvider","MenuContext","SubMenuList","InlineSubMenuList","_ref","id","open","keyPath","children","fixedMode","_React$useContext","useContext","prefixCls","forceSubMenuRender","motion","defaultMotions","mode","sameModeRef","useRef","current","_React$useState","useState","_React$useState2","destroy","setDestroy","mergedOpen","useEffect","mergedMotion","length","motionAppear","originOnVisibleChanged","onVisibleChanged","newVisible","createElement","locked","visible","forceRender","removeOnLeave","leavedClassName","concat","_ref2","motionClassName","className","motionStyle","style"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-menu/es/SubMenu/InlineSubMenuList.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport CSSMotion from 'rc-motion';\nimport { getMotion } from \"../utils/motionUtil\";\nimport MenuContextProvider, { MenuContext } from \"../context/MenuContext\";\nimport SubMenuList from \"./SubMenuList\";\nexport default function InlineSubMenuList(_ref) {\n  var id = _ref.id,\n    open = _ref.open,\n    keyPath = _ref.keyPath,\n    children = _ref.children;\n  var fixedMode = 'inline';\n  var _React$useContext = React.useContext(MenuContext),\n    prefixCls = _React$useContext.prefixCls,\n    forceSubMenuRender = _React$useContext.forceSubMenuRender,\n    motion = _React$useContext.motion,\n    defaultMotions = _React$useContext.defaultMotions,\n    mode = _React$useContext.mode;\n\n  // Always use latest mode check\n  var sameModeRef = React.useRef(false);\n  sameModeRef.current = mode === fixedMode;\n\n  // We record `destroy` mark here since when mode change from `inline` to others.\n  // The inline list should remove when motion end.\n  var _React$useState = React.useState(!sameModeRef.current),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    destroy = _React$useState2[0],\n    setDestroy = _React$useState2[1];\n  var mergedOpen = sameModeRef.current ? open : false;\n\n  // ================================= Effect =================================\n  // Reset destroy state when mode change back\n  React.useEffect(function () {\n    if (sameModeRef.current) {\n      setDestroy(false);\n    }\n  }, [mode]);\n\n  // ================================= Render =================================\n  var mergedMotion = _objectSpread({}, getMotion(fixedMode, motion, defaultMotions));\n\n  // No need appear since nest inlineCollapse changed\n  if (keyPath.length > 1) {\n    mergedMotion.motionAppear = false;\n  }\n\n  // Hide inline list when mode changed and motion end\n  var originOnVisibleChanged = mergedMotion.onVisibleChanged;\n  mergedMotion.onVisibleChanged = function (newVisible) {\n    if (!sameModeRef.current && !newVisible) {\n      setDestroy(true);\n    }\n    return originOnVisibleChanged === null || originOnVisibleChanged === void 0 ? void 0 : originOnVisibleChanged(newVisible);\n  };\n  if (destroy) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(MenuContextProvider, {\n    mode: fixedMode,\n    locked: !sameModeRef.current\n  }, /*#__PURE__*/React.createElement(CSSMotion, _extends({\n    visible: mergedOpen\n  }, mergedMotion, {\n    forceRender: forceSubMenuRender,\n    removeOnLeave: false,\n    leavedClassName: \"\".concat(prefixCls, \"-hidden\")\n  }), function (_ref2) {\n    var motionClassName = _ref2.className,\n      motionStyle = _ref2.style;\n    return /*#__PURE__*/React.createElement(SubMenuList, {\n      id: id,\n      className: motionClassName,\n      style: motionStyle\n    }, children);\n  }));\n}"],"mappings":"AAAA,MAAO,CAAAA,QAAQ,KAAM,oCAAoC,CACzD,MAAO,CAAAC,aAAa,KAAM,0CAA0C,CACpE,MAAO,CAAAC,cAAc,KAAM,0CAA0C,CACrE,MAAO,GAAK,CAAAC,KAAK,KAAM,OAAO,CAC9B,MAAO,CAAAC,SAAS,KAAM,WAAW,CACjC,OAASC,SAAS,KAAQ,qBAAqB,CAC/C,MAAO,CAAAC,mBAAmB,EAAIC,WAAW,KAAQ,wBAAwB,CACzE,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,cAAe,SAAS,CAAAC,iBAAiBA,CAACC,IAAI,CAAE,CAC9C,GAAI,CAAAC,EAAE,CAAGD,IAAI,CAACC,EAAE,CACdC,IAAI,CAAGF,IAAI,CAACE,IAAI,CAChBC,OAAO,CAAGH,IAAI,CAACG,OAAO,CACtBC,QAAQ,CAAGJ,IAAI,CAACI,QAAQ,CAC1B,GAAI,CAAAC,SAAS,CAAG,QAAQ,CACxB,GAAI,CAAAC,iBAAiB,CAAGb,KAAK,CAACc,UAAU,CAACV,WAAW,CAAC,CACnDW,SAAS,CAAGF,iBAAiB,CAACE,SAAS,CACvCC,kBAAkB,CAAGH,iBAAiB,CAACG,kBAAkB,CACzDC,MAAM,CAAGJ,iBAAiB,CAACI,MAAM,CACjCC,cAAc,CAAGL,iBAAiB,CAACK,cAAc,CACjDC,IAAI,CAAGN,iBAAiB,CAACM,IAAI,CAE/B;AACA,GAAI,CAAAC,WAAW,CAAGpB,KAAK,CAACqB,MAAM,CAAC,KAAK,CAAC,CACrCD,WAAW,CAACE,OAAO,CAAGH,IAAI,GAAKP,SAAS,CAExC;AACA;AACA,GAAI,CAAAW,eAAe,CAAGvB,KAAK,CAACwB,QAAQ,CAAC,CAACJ,WAAW,CAACE,OAAO,CAAC,CACxDG,gBAAgB,CAAG1B,cAAc,CAACwB,eAAe,CAAE,CAAC,CAAC,CACrDG,OAAO,CAAGD,gBAAgB,CAAC,CAAC,CAAC,CAC7BE,UAAU,CAAGF,gBAAgB,CAAC,CAAC,CAAC,CAClC,GAAI,CAAAG,UAAU,CAAGR,WAAW,CAACE,OAAO,CAAGb,IAAI,CAAG,KAAK,CAEnD;AACA;AACAT,KAAK,CAAC6B,SAAS,CAAC,UAAY,CAC1B,GAAIT,WAAW,CAACE,OAAO,CAAE,CACvBK,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACR,IAAI,CAAC,CAAC,CAEV;AACA,GAAI,CAAAW,YAAY,CAAGhC,aAAa,CAAC,CAAC,CAAC,CAAEI,SAAS,CAACU,SAAS,CAAEK,MAAM,CAAEC,cAAc,CAAC,CAAC,CAElF;AACA,GAAIR,OAAO,CAACqB,MAAM,CAAG,CAAC,CAAE,CACtBD,YAAY,CAACE,YAAY,CAAG,KAAK,CACnC,CAEA;AACA,GAAI,CAAAC,sBAAsB,CAAGH,YAAY,CAACI,gBAAgB,CAC1DJ,YAAY,CAACI,gBAAgB,CAAG,SAAUC,UAAU,CAAE,CACpD,GAAI,CAACf,WAAW,CAACE,OAAO,EAAI,CAACa,UAAU,CAAE,CACvCR,UAAU,CAAC,IAAI,CAAC,CAClB,CACA,MAAO,CAAAM,sBAAsB,GAAK,IAAI,EAAIA,sBAAsB,GAAK,IAAK,EAAC,CAAG,IAAK,EAAC,CAAGA,sBAAsB,CAACE,UAAU,CAAC,CAC3H,CAAC,CACD,GAAIT,OAAO,CAAE,CACX,MAAO,KAAI,CACb,CACA,MAAO,aAAa1B,KAAK,CAACoC,aAAa,CAACjC,mBAAmB,CAAE,CAC3DgB,IAAI,CAAEP,SAAS,CACfyB,MAAM,CAAE,CAACjB,WAAW,CAACE,OACvB,CAAC,CAAE,aAAatB,KAAK,CAACoC,aAAa,CAACnC,SAAS,CAAEJ,QAAQ,CAAC,CACtDyC,OAAO,CAAEV,UACX,CAAC,CAAEE,YAAY,CAAE,CACfS,WAAW,CAAEvB,kBAAkB,CAC/BwB,aAAa,CAAE,KAAK,CACpBC,eAAe,CAAE,EAAE,CAACC,MAAM,CAAC3B,SAAS,CAAE,SAAS,CACjD,CAAC,CAAC,CAAE,SAAU4B,KAAK,CAAE,CACnB,GAAI,CAAAC,eAAe,CAAGD,KAAK,CAACE,SAAS,CACnCC,WAAW,CAAGH,KAAK,CAACI,KAAK,CAC3B,MAAO,aAAa/C,KAAK,CAACoC,aAAa,CAAC/B,WAAW,CAAE,CACnDG,EAAE,CAAEA,EAAE,CACNqC,SAAS,CAAED,eAAe,CAC1BG,KAAK,CAAED,WACT,CAAC,CAAEnC,QAAQ,CAAC,CACd,CAAC,CAAC,CAAC,CACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}