{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/esm/extends\";import _typeof from\"@babel/runtime/helpers/esm/typeof\";import _objectSpread from\"@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/esm/inherits\";import _createSuper from\"@babel/runtime/helpers/esm/createSuper\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";// TODO: https://www.w3.org/TR/2017/NOTE-wai-aria-practices-1.1-20171214/examples/treeview/treeview-2/treeview-2a.html\n// Fully accessibility support\nimport classNames from'classnames';import KeyCode from\"rc-util/es/KeyCode\";import pickAttrs from\"rc-util/es/pickAttrs\";import warning from\"rc-util/es/warning\";import*as React from'react';import{TreeContext}from\"./contextTypes\";import DropIndicator from\"./DropIndicator\";import NodeList,{MotionEntity,MOTION_KEY}from\"./NodeList\";import TreeNode from\"./TreeNode\";import{arrAdd,arrDel,calcDropPosition,calcSelectedKeys,conductExpandParent,getDragChildrenKeys,parseCheckedKeys,posToArr}from\"./util\";import{conductCheck}from\"./utils/conductUtil\";import getEntity from\"./utils/keyUtil\";import{convertDataToEntities,convertNodePropsToEventData,convertTreeToData,fillFieldNames,flattenTreeData,getTreeNodeProps,warningWithoutKey}from\"./utils/treeUtil\";var MAX_RETRY_TIMES=10;var Tree=/*#__PURE__*/function(_React$Component){_inherits(Tree,_React$Component);var _super=_createSuper(Tree);function Tree(){var _this;_classCallCheck(this,Tree);for(var _len=arguments.length,_args=new Array(_len),_key=0;_key<_len;_key++){_args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(_args));_defineProperty(_assertThisInitialized(_this),\"destroyed\",false);_defineProperty(_assertThisInitialized(_this),\"delayedDragEnterLogic\",void 0);_defineProperty(_assertThisInitialized(_this),\"loadingRetryTimes\",{});_defineProperty(_assertThisInitialized(_this),\"state\",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],// dropTargetKey is the key of abstract-drop-node\n// the abstract-drop-node is the real drop node when drag and drop\n// not the DOM drag over node\ndropTargetKey:null,dropPosition:null,// the drop position of abstract-drop-node, inside 0, top -1, bottom 1\ndropContainerKey:null,// the container key of abstract-drop-node if dropPosition is -1 or 1\ndropLevelOffset:null,// the drop level offset of abstract-drag-over-node\ndropTargetPos:null,// the pos of abstract-drop-node\ndropAllowed:true,// if drop to abstract-drop-node is allowed\n// the abstract-drag-over-node\n// if mouse is on the bottom of top dom node or no the top of the bottom dom node\n// abstract-drag-over-node is the top node\ndragOverNodeKey:null,treeData:[],flattenNodes:[],focused:false,activeKey:null,listChanging:false,prevProps:null,fieldNames:fillFieldNames()});_defineProperty(_assertThisInitialized(_this),\"dragStartMousePosition\",null);_defineProperty(_assertThisInitialized(_this),\"dragNode\",void 0);_defineProperty(_assertThisInitialized(_this),\"currentMouseOverDroppableNodeKey\",null);_defineProperty(_assertThisInitialized(_this),\"listRef\",/*#__PURE__*/React.createRef());_defineProperty(_assertThisInitialized(_this),\"onNodeDragStart\",function(event,node){var _this$state=_this.state,expandedKeys=_this$state.expandedKeys,keyEntities=_this$state.keyEntities;var onDragStart=_this.props.onDragStart;var eventKey=node.props.eventKey;_this.dragNode=node;_this.dragStartMousePosition={x:event.clientX,y:event.clientY};var newExpandedKeys=arrDel(expandedKeys,eventKey);_this.setState({draggingNodeKey:eventKey,dragChildrenKeys:getDragChildrenKeys(eventKey,keyEntities),indent:_this.listRef.current.getIndentWidth()});_this.setExpandedKeys(newExpandedKeys);window.addEventListener('dragend',_this.onWindowDragEnd);onDragStart===null||onDragStart===void 0||onDragStart({event:event,node:convertNodePropsToEventData(node.props)});});/**\n     * [Legacy] Select handler is smaller than node,\n     * so that this will trigger when drag enter node or select handler.\n     * This is a little tricky if customize css without padding.\n     * Better for use mouse move event to refresh drag state.\n     * But let's just keep it to avoid event trigger logic change.\n     */_defineProperty(_assertThisInitialized(_this),\"onNodeDragEnter\",function(event,node){var _this$state2=_this.state,expandedKeys=_this$state2.expandedKeys,keyEntities=_this$state2.keyEntities,dragChildrenKeys=_this$state2.dragChildrenKeys,flattenNodes=_this$state2.flattenNodes,indent=_this$state2.indent;var _this$props=_this.props,onDragEnter=_this$props.onDragEnter,onExpand=_this$props.onExpand,allowDrop=_this$props.allowDrop,direction=_this$props.direction;var _node$props=node.props,pos=_node$props.pos,eventKey=_node$props.eventKey;var _assertThisInitialize=_assertThisInitialized(_this),dragNode=_assertThisInitialize.dragNode;// record the key of node which is latest entered, used in dragleave event.\nif(_this.currentMouseOverDroppableNodeKey!==eventKey){_this.currentMouseOverDroppableNodeKey=eventKey;}if(!dragNode){_this.resetDragState();return;}var _calcDropPosition=calcDropPosition(event,dragNode,node,indent,_this.dragStartMousePosition,allowDrop,flattenNodes,keyEntities,expandedKeys,direction),dropPosition=_calcDropPosition.dropPosition,dropLevelOffset=_calcDropPosition.dropLevelOffset,dropTargetKey=_calcDropPosition.dropTargetKey,dropContainerKey=_calcDropPosition.dropContainerKey,dropTargetPos=_calcDropPosition.dropTargetPos,dropAllowed=_calcDropPosition.dropAllowed,dragOverNodeKey=_calcDropPosition.dragOverNodeKey;if(// don't allow drop inside its children\ndragChildrenKeys.indexOf(dropTargetKey)!==-1||// don't allow drop when drop is not allowed caculated by calcDropPosition\n!dropAllowed){_this.resetDragState();return;}// Side effect for delay drag\nif(!_this.delayedDragEnterLogic){_this.delayedDragEnterLogic={};}Object.keys(_this.delayedDragEnterLogic).forEach(function(key){clearTimeout(_this.delayedDragEnterLogic[key]);});if(dragNode.props.eventKey!==node.props.eventKey){// hoist expand logic here\n// since if logic is on the bottom\n// it will be blocked by abstract dragover node check\n//   => if you dragenter from top, you mouse will still be consider as in the top node\nevent.persist();_this.delayedDragEnterLogic[pos]=window.setTimeout(function(){if(_this.state.draggingNodeKey===null)return;var newExpandedKeys=_toConsumableArray(expandedKeys);var entity=getEntity(keyEntities,node.props.eventKey);if(entity&&(entity.children||[]).length){newExpandedKeys=arrAdd(expandedKeys,node.props.eventKey);}if(!('expandedKeys'in _this.props)){_this.setExpandedKeys(newExpandedKeys);}onExpand===null||onExpand===void 0||onExpand(newExpandedKeys,{node:convertNodePropsToEventData(node.props),expanded:true,nativeEvent:event.nativeEvent});},800);}// Skip if drag node is self\nif(dragNode.props.eventKey===dropTargetKey&&dropLevelOffset===0){_this.resetDragState();return;}// Update drag over node and drag state\n_this.setState({dragOverNodeKey:dragOverNodeKey,dropPosition:dropPosition,dropLevelOffset:dropLevelOffset,dropTargetKey:dropTargetKey,dropContainerKey:dropContainerKey,dropTargetPos:dropTargetPos,dropAllowed:dropAllowed});onDragEnter===null||onDragEnter===void 0||onDragEnter({event:event,node:convertNodePropsToEventData(node.props),expandedKeys:expandedKeys});});_defineProperty(_assertThisInitialized(_this),\"onNodeDragOver\",function(event,node){var _this$state3=_this.state,dragChildrenKeys=_this$state3.dragChildrenKeys,flattenNodes=_this$state3.flattenNodes,keyEntities=_this$state3.keyEntities,expandedKeys=_this$state3.expandedKeys,indent=_this$state3.indent;var _this$props2=_this.props,onDragOver=_this$props2.onDragOver,allowDrop=_this$props2.allowDrop,direction=_this$props2.direction;var _assertThisInitialize2=_assertThisInitialized(_this),dragNode=_assertThisInitialize2.dragNode;if(!dragNode){return;}var _calcDropPosition2=calcDropPosition(event,dragNode,node,indent,_this.dragStartMousePosition,allowDrop,flattenNodes,keyEntities,expandedKeys,direction),dropPosition=_calcDropPosition2.dropPosition,dropLevelOffset=_calcDropPosition2.dropLevelOffset,dropTargetKey=_calcDropPosition2.dropTargetKey,dropContainerKey=_calcDropPosition2.dropContainerKey,dropAllowed=_calcDropPosition2.dropAllowed,dropTargetPos=_calcDropPosition2.dropTargetPos,dragOverNodeKey=_calcDropPosition2.dragOverNodeKey;if(dragChildrenKeys.indexOf(dropTargetKey)!==-1||!dropAllowed){// don't allow drop inside its children\n// don't allow drop when drop is not allowed calculated by calcDropPosition\nreturn;}// Update drag position\nif(dragNode.props.eventKey===dropTargetKey&&dropLevelOffset===0){if(!(_this.state.dropPosition===null&&_this.state.dropLevelOffset===null&&_this.state.dropTargetKey===null&&_this.state.dropContainerKey===null&&_this.state.dropTargetPos===null&&_this.state.dropAllowed===false&&_this.state.dragOverNodeKey===null)){_this.resetDragState();}}else if(!(dropPosition===_this.state.dropPosition&&dropLevelOffset===_this.state.dropLevelOffset&&dropTargetKey===_this.state.dropTargetKey&&dropContainerKey===_this.state.dropContainerKey&&dropTargetPos===_this.state.dropTargetPos&&dropAllowed===_this.state.dropAllowed&&dragOverNodeKey===_this.state.dragOverNodeKey)){_this.setState({dropPosition:dropPosition,dropLevelOffset:dropLevelOffset,dropTargetKey:dropTargetKey,dropContainerKey:dropContainerKey,dropTargetPos:dropTargetPos,dropAllowed:dropAllowed,dragOverNodeKey:dragOverNodeKey});}onDragOver===null||onDragOver===void 0||onDragOver({event:event,node:convertNodePropsToEventData(node.props)});});_defineProperty(_assertThisInitialized(_this),\"onNodeDragLeave\",function(event,node){// if it is outside the droppable area\n// currentMouseOverDroppableNodeKey will be updated in dragenter event when into another droppable receiver.\nif(_this.currentMouseOverDroppableNodeKey===node.props.eventKey&&!event.currentTarget.contains(event.relatedTarget)){_this.resetDragState();_this.currentMouseOverDroppableNodeKey=null;}var onDragLeave=_this.props.onDragLeave;onDragLeave===null||onDragLeave===void 0||onDragLeave({event:event,node:convertNodePropsToEventData(node.props)});});// since stopPropagation() is called in treeNode\n// if onWindowDrag is called, whice means state is keeped, drag state should be cleared\n_defineProperty(_assertThisInitialized(_this),\"onWindowDragEnd\",function(event){_this.onNodeDragEnd(event,null,true);window.removeEventListener('dragend',_this.onWindowDragEnd);});// if onNodeDragEnd is called, onWindowDragEnd won't be called since stopPropagation() is called\n_defineProperty(_assertThisInitialized(_this),\"onNodeDragEnd\",function(event,node){var onDragEnd=_this.props.onDragEnd;_this.setState({dragOverNodeKey:null});_this.cleanDragState();onDragEnd===null||onDragEnd===void 0||onDragEnd({event:event,node:convertNodePropsToEventData(node.props)});_this.dragNode=null;window.removeEventListener('dragend',_this.onWindowDragEnd);});_defineProperty(_assertThisInitialized(_this),\"onNodeDrop\",function(event,node){var _this$getActiveItem;var outsideTree=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var _this$state4=_this.state,dragChildrenKeys=_this$state4.dragChildrenKeys,dropPosition=_this$state4.dropPosition,dropTargetKey=_this$state4.dropTargetKey,dropTargetPos=_this$state4.dropTargetPos,dropAllowed=_this$state4.dropAllowed;if(!dropAllowed)return;var onDrop=_this.props.onDrop;_this.setState({dragOverNodeKey:null});_this.cleanDragState();if(dropTargetKey===null)return;var abstractDropNodeProps=_objectSpread(_objectSpread({},getTreeNodeProps(dropTargetKey,_this.getTreeNodeRequiredProps())),{},{active:((_this$getActiveItem=_this.getActiveItem())===null||_this$getActiveItem===void 0?void 0:_this$getActiveItem.key)===dropTargetKey,data:getEntity(_this.state.keyEntities,dropTargetKey).node});var dropToChild=dragChildrenKeys.indexOf(dropTargetKey)!==-1;warning(!dropToChild,\"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.\");var posArr=posToArr(dropTargetPos);var dropResult={event:event,node:convertNodePropsToEventData(abstractDropNodeProps),dragNode:_this.dragNode?convertNodePropsToEventData(_this.dragNode.props):null,dragNodesKeys:[_this.dragNode.props.eventKey].concat(dragChildrenKeys),dropToGap:dropPosition!==0,dropPosition:dropPosition+Number(posArr[posArr.length-1])};if(!outsideTree){onDrop===null||onDrop===void 0||onDrop(dropResult);}_this.dragNode=null;});_defineProperty(_assertThisInitialized(_this),\"cleanDragState\",function(){var draggingNodeKey=_this.state.draggingNodeKey;if(draggingNodeKey!==null){_this.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:true,dragOverNodeKey:null});}_this.dragStartMousePosition=null;_this.currentMouseOverDroppableNodeKey=null;});_defineProperty(_assertThisInitialized(_this),\"triggerExpandActionExpand\",function(e,treeNode){var _this$state5=_this.state,expandedKeys=_this$state5.expandedKeys,flattenNodes=_this$state5.flattenNodes;var expanded=treeNode.expanded,key=treeNode.key,isLeaf=treeNode.isLeaf;if(isLeaf||e.shiftKey||e.metaKey||e.ctrlKey){return;}var node=flattenNodes.filter(function(nodeItem){return nodeItem.key===key;})[0];var eventNode=convertNodePropsToEventData(_objectSpread(_objectSpread({},getTreeNodeProps(key,_this.getTreeNodeRequiredProps())),{},{data:node.data}));_this.setExpandedKeys(expanded?arrDel(expandedKeys,key):arrAdd(expandedKeys,key));_this.onNodeExpand(e,eventNode);});_defineProperty(_assertThisInitialized(_this),\"onNodeClick\",function(e,treeNode){var _this$props3=_this.props,onClick=_this$props3.onClick,expandAction=_this$props3.expandAction;if(expandAction==='click'){_this.triggerExpandActionExpand(e,treeNode);}onClick===null||onClick===void 0||onClick(e,treeNode);});_defineProperty(_assertThisInitialized(_this),\"onNodeDoubleClick\",function(e,treeNode){var _this$props4=_this.props,onDoubleClick=_this$props4.onDoubleClick,expandAction=_this$props4.expandAction;if(expandAction==='doubleClick'){_this.triggerExpandActionExpand(e,treeNode);}onDoubleClick===null||onDoubleClick===void 0||onDoubleClick(e,treeNode);});_defineProperty(_assertThisInitialized(_this),\"onNodeSelect\",function(e,treeNode){var selectedKeys=_this.state.selectedKeys;var _this$state6=_this.state,keyEntities=_this$state6.keyEntities,fieldNames=_this$state6.fieldNames;var _this$props5=_this.props,onSelect=_this$props5.onSelect,multiple=_this$props5.multiple;var selected=treeNode.selected;var key=treeNode[fieldNames.key];var targetSelected=!selected;// Update selected keys\nif(!targetSelected){selectedKeys=arrDel(selectedKeys,key);}else if(!multiple){selectedKeys=[key];}else{selectedKeys=arrAdd(selectedKeys,key);}// [Legacy] Not found related usage in doc or upper libs\nvar selectedNodes=selectedKeys.map(function(selectedKey){var entity=getEntity(keyEntities,selectedKey);if(!entity)return null;return entity.node;}).filter(function(node){return node;});_this.setUncontrolledState({selectedKeys:selectedKeys});onSelect===null||onSelect===void 0||onSelect(selectedKeys,{event:'select',selected:targetSelected,node:treeNode,selectedNodes:selectedNodes,nativeEvent:e.nativeEvent});});_defineProperty(_assertThisInitialized(_this),\"onNodeCheck\",function(e,treeNode,checked){var _this$state7=_this.state,keyEntities=_this$state7.keyEntities,oriCheckedKeys=_this$state7.checkedKeys,oriHalfCheckedKeys=_this$state7.halfCheckedKeys;var _this$props6=_this.props,checkStrictly=_this$props6.checkStrictly,onCheck=_this$props6.onCheck;var key=treeNode.key;// Prepare trigger arguments\nvar checkedObj;var eventObj={event:'check',node:treeNode,checked:checked,nativeEvent:e.nativeEvent};if(checkStrictly){var checkedKeys=checked?arrAdd(oriCheckedKeys,key):arrDel(oriCheckedKeys,key);var halfCheckedKeys=arrDel(oriHalfCheckedKeys,key);checkedObj={checked:checkedKeys,halfChecked:halfCheckedKeys};eventObj.checkedNodes=checkedKeys.map(function(checkedKey){return getEntity(keyEntities,checkedKey);}).filter(function(entity){return entity;}).map(function(entity){return entity.node;});_this.setUncontrolledState({checkedKeys:checkedKeys});}else{// Always fill first\nvar _conductCheck=conductCheck([].concat(_toConsumableArray(oriCheckedKeys),[key]),true,keyEntities),_checkedKeys=_conductCheck.checkedKeys,_halfCheckedKeys=_conductCheck.halfCheckedKeys;// If remove, we do it again to correction\nif(!checked){var keySet=new Set(_checkedKeys);keySet.delete(key);var _conductCheck2=conductCheck(Array.from(keySet),{checked:false,halfCheckedKeys:_halfCheckedKeys},keyEntities);_checkedKeys=_conductCheck2.checkedKeys;_halfCheckedKeys=_conductCheck2.halfCheckedKeys;}checkedObj=_checkedKeys;// [Legacy] This is used for `rc-tree-select`\neventObj.checkedNodes=[];eventObj.checkedNodesPositions=[];eventObj.halfCheckedKeys=_halfCheckedKeys;_checkedKeys.forEach(function(checkedKey){var entity=getEntity(keyEntities,checkedKey);if(!entity)return;var node=entity.node,pos=entity.pos;eventObj.checkedNodes.push(node);eventObj.checkedNodesPositions.push({node:node,pos:pos});});_this.setUncontrolledState({checkedKeys:_checkedKeys},false,{halfCheckedKeys:_halfCheckedKeys});}onCheck===null||onCheck===void 0||onCheck(checkedObj,eventObj);});_defineProperty(_assertThisInitialized(_this),\"onNodeLoad\",function(treeNode){var key=treeNode.key;var loadPromise=new Promise(function(resolve,reject){// We need to get the latest state of loading/loaded keys\n_this.setState(function(_ref){var _ref$loadedKeys=_ref.loadedKeys,loadedKeys=_ref$loadedKeys===void 0?[]:_ref$loadedKeys,_ref$loadingKeys=_ref.loadingKeys,loadingKeys=_ref$loadingKeys===void 0?[]:_ref$loadingKeys;var _this$props7=_this.props,loadData=_this$props7.loadData,onLoad=_this$props7.onLoad;if(!loadData||loadedKeys.indexOf(key)!==-1||loadingKeys.indexOf(key)!==-1){return null;}// Process load data\nvar promise=loadData(treeNode);promise.then(function(){var currentLoadedKeys=_this.state.loadedKeys;var newLoadedKeys=arrAdd(currentLoadedKeys,key);// onLoad should trigger before internal setState to avoid `loadData` trigger twice.\n// https://github.com/ant-design/ant-design/issues/12464\nonLoad===null||onLoad===void 0||onLoad(newLoadedKeys,{event:'load',node:treeNode});_this.setUncontrolledState({loadedKeys:newLoadedKeys});_this.setState(function(prevState){return{loadingKeys:arrDel(prevState.loadingKeys,key)};});resolve();}).catch(function(e){_this.setState(function(prevState){return{loadingKeys:arrDel(prevState.loadingKeys,key)};});// If exceed max retry times, we give up retry\n_this.loadingRetryTimes[key]=(_this.loadingRetryTimes[key]||0)+1;if(_this.loadingRetryTimes[key]>=MAX_RETRY_TIMES){var currentLoadedKeys=_this.state.loadedKeys;warning(false,'Retry for `loadData` many times but still failed. No more retry.');_this.setUncontrolledState({loadedKeys:arrAdd(currentLoadedKeys,key)});resolve();}reject(e);});return{loadingKeys:arrAdd(loadingKeys,key)};});});// Not care warning if we ignore this\nloadPromise.catch(function(){});return loadPromise;});_defineProperty(_assertThisInitialized(_this),\"onNodeMouseEnter\",function(event,node){var onMouseEnter=_this.props.onMouseEnter;onMouseEnter===null||onMouseEnter===void 0||onMouseEnter({event:event,node:node});});_defineProperty(_assertThisInitialized(_this),\"onNodeMouseLeave\",function(event,node){var onMouseLeave=_this.props.onMouseLeave;onMouseLeave===null||onMouseLeave===void 0||onMouseLeave({event:event,node:node});});_defineProperty(_assertThisInitialized(_this),\"onNodeContextMenu\",function(event,node){var onRightClick=_this.props.onRightClick;if(onRightClick){event.preventDefault();onRightClick({event:event,node:node});}});_defineProperty(_assertThisInitialized(_this),\"onFocus\",function(){var onFocus=_this.props.onFocus;_this.setState({focused:true});for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}onFocus===null||onFocus===void 0||onFocus.apply(void 0,args);});_defineProperty(_assertThisInitialized(_this),\"onBlur\",function(){var onBlur=_this.props.onBlur;_this.setState({focused:false});_this.onActiveChange(null);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}onBlur===null||onBlur===void 0||onBlur.apply(void 0,args);});_defineProperty(_assertThisInitialized(_this),\"getTreeNodeRequiredProps\",function(){var _this$state8=_this.state,expandedKeys=_this$state8.expandedKeys,selectedKeys=_this$state8.selectedKeys,loadedKeys=_this$state8.loadedKeys,loadingKeys=_this$state8.loadingKeys,checkedKeys=_this$state8.checkedKeys,halfCheckedKeys=_this$state8.halfCheckedKeys,dragOverNodeKey=_this$state8.dragOverNodeKey,dropPosition=_this$state8.dropPosition,keyEntities=_this$state8.keyEntities;return{expandedKeys:expandedKeys||[],selectedKeys:selectedKeys||[],loadedKeys:loadedKeys||[],loadingKeys:loadingKeys||[],checkedKeys:checkedKeys||[],halfCheckedKeys:halfCheckedKeys||[],dragOverNodeKey:dragOverNodeKey,dropPosition:dropPosition,keyEntities:keyEntities};});// =========================== Expanded ===========================\n/** Set uncontrolled `expandedKeys`. This will also auto update `flattenNodes`. */_defineProperty(_assertThisInitialized(_this),\"setExpandedKeys\",function(expandedKeys){var _this$state9=_this.state,treeData=_this$state9.treeData,fieldNames=_this$state9.fieldNames;var flattenNodes=flattenTreeData(treeData,expandedKeys,fieldNames);_this.setUncontrolledState({expandedKeys:expandedKeys,flattenNodes:flattenNodes},true);});_defineProperty(_assertThisInitialized(_this),\"onNodeExpand\",function(e,treeNode){var expandedKeys=_this.state.expandedKeys;var _this$state10=_this.state,listChanging=_this$state10.listChanging,fieldNames=_this$state10.fieldNames;var _this$props8=_this.props,onExpand=_this$props8.onExpand,loadData=_this$props8.loadData;var expanded=treeNode.expanded;var key=treeNode[fieldNames.key];// Do nothing when motion is in progress\nif(listChanging){return;}// Update selected keys\nvar index=expandedKeys.indexOf(key);var targetExpanded=!expanded;warning(expanded&&index!==-1||!expanded&&index===-1,'Expand state not sync with index check');if(targetExpanded){expandedKeys=arrAdd(expandedKeys,key);}else{expandedKeys=arrDel(expandedKeys,key);}_this.setExpandedKeys(expandedKeys);onExpand===null||onExpand===void 0||onExpand(expandedKeys,{node:treeNode,expanded:targetExpanded,nativeEvent:e.nativeEvent});// Async Load data\nif(targetExpanded&&loadData){var loadPromise=_this.onNodeLoad(treeNode);if(loadPromise){loadPromise.then(function(){// [Legacy] Refresh logic\nvar newFlattenTreeData=flattenTreeData(_this.state.treeData,expandedKeys,fieldNames);_this.setUncontrolledState({flattenNodes:newFlattenTreeData});}).catch(function(){var currentExpandedKeys=_this.state.expandedKeys;var expandedKeysToRestore=arrDel(currentExpandedKeys,key);_this.setExpandedKeys(expandedKeysToRestore);});}}});_defineProperty(_assertThisInitialized(_this),\"onListChangeStart\",function(){_this.setUncontrolledState({listChanging:true});});_defineProperty(_assertThisInitialized(_this),\"onListChangeEnd\",function(){setTimeout(function(){_this.setUncontrolledState({listChanging:false});});});// =========================== Keyboard ===========================\n_defineProperty(_assertThisInitialized(_this),\"onActiveChange\",function(newActiveKey){var activeKey=_this.state.activeKey;var _this$props9=_this.props,onActiveChange=_this$props9.onActiveChange,_this$props9$itemScro=_this$props9.itemScrollOffset,itemScrollOffset=_this$props9$itemScro===void 0?0:_this$props9$itemScro;if(activeKey===newActiveKey){return;}_this.setState({activeKey:newActiveKey});if(newActiveKey!==null){_this.scrollTo({key:newActiveKey,offset:itemScrollOffset});}onActiveChange===null||onActiveChange===void 0||onActiveChange(newActiveKey);});_defineProperty(_assertThisInitialized(_this),\"getActiveItem\",function(){var _this$state11=_this.state,activeKey=_this$state11.activeKey,flattenNodes=_this$state11.flattenNodes;if(activeKey===null){return null;}return flattenNodes.find(function(_ref2){var key=_ref2.key;return key===activeKey;})||null;});_defineProperty(_assertThisInitialized(_this),\"offsetActiveKey\",function(offset){var _this$state12=_this.state,flattenNodes=_this$state12.flattenNodes,activeKey=_this$state12.activeKey;var index=flattenNodes.findIndex(function(_ref3){var key=_ref3.key;return key===activeKey;});// Align with index\nif(index===-1&&offset<0){index=flattenNodes.length;}index=(index+offset+flattenNodes.length)%flattenNodes.length;var item=flattenNodes[index];if(item){var _key4=item.key;_this.onActiveChange(_key4);}else{_this.onActiveChange(null);}});_defineProperty(_assertThisInitialized(_this),\"onKeyDown\",function(event){var _this$state13=_this.state,activeKey=_this$state13.activeKey,expandedKeys=_this$state13.expandedKeys,checkedKeys=_this$state13.checkedKeys,fieldNames=_this$state13.fieldNames;var _this$props10=_this.props,onKeyDown=_this$props10.onKeyDown,checkable=_this$props10.checkable,selectable=_this$props10.selectable;// >>>>>>>>>> Direction\nswitch(event.which){case KeyCode.UP:{_this.offsetActiveKey(-1);event.preventDefault();break;}case KeyCode.DOWN:{_this.offsetActiveKey(1);event.preventDefault();break;}}// >>>>>>>>>> Expand & Selection\nvar activeItem=_this.getActiveItem();if(activeItem&&activeItem.data){var treeNodeRequiredProps=_this.getTreeNodeRequiredProps();var expandable=activeItem.data.isLeaf===false||!!(activeItem.data[fieldNames.children]||[]).length;var eventNode=convertNodePropsToEventData(_objectSpread(_objectSpread({},getTreeNodeProps(activeKey,treeNodeRequiredProps)),{},{data:activeItem.data,active:true}));switch(event.which){// >>> Expand\ncase KeyCode.LEFT:{// Collapse if possible\nif(expandable&&expandedKeys.includes(activeKey)){_this.onNodeExpand({},eventNode);}else if(activeItem.parent){_this.onActiveChange(activeItem.parent.key);}event.preventDefault();break;}case KeyCode.RIGHT:{// Expand if possible\nif(expandable&&!expandedKeys.includes(activeKey)){_this.onNodeExpand({},eventNode);}else if(activeItem.children&&activeItem.children.length){_this.onActiveChange(activeItem.children[0].key);}event.preventDefault();break;}// Selection\ncase KeyCode.ENTER:case KeyCode.SPACE:{if(checkable&&!eventNode.disabled&&eventNode.checkable!==false&&!eventNode.disableCheckbox){_this.onNodeCheck({},eventNode,!checkedKeys.includes(activeKey));}else if(!checkable&&selectable&&!eventNode.disabled&&eventNode.selectable!==false){_this.onNodeSelect({},eventNode);}break;}}}onKeyDown===null||onKeyDown===void 0||onKeyDown(event);});/**\n     * Only update the value which is not in props\n     */_defineProperty(_assertThisInitialized(_this),\"setUncontrolledState\",function(state){var atomic=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var forceState=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!_this.destroyed){var needSync=false;var allPassed=true;var newState={};Object.keys(state).forEach(function(name){if(name in _this.props){allPassed=false;return;}needSync=true;newState[name]=state[name];});if(needSync&&(!atomic||allPassed)){_this.setState(_objectSpread(_objectSpread({},newState),forceState));}}});_defineProperty(_assertThisInitialized(_this),\"scrollTo\",function(scroll){_this.listRef.current.scrollTo(scroll);});return _this;}_createClass(Tree,[{key:\"componentDidMount\",value:function componentDidMount(){this.destroyed=false;this.onUpdated();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.onUpdated();}},{key:\"onUpdated\",value:function onUpdated(){var _this$props11=this.props,activeKey=_this$props11.activeKey,_this$props11$itemScr=_this$props11.itemScrollOffset,itemScrollOffset=_this$props11$itemScr===void 0?0:_this$props11$itemScr;if(activeKey!==undefined&&activeKey!==this.state.activeKey){this.setState({activeKey:activeKey});if(activeKey!==null){this.scrollTo({key:activeKey,offset:itemScrollOffset});}}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener('dragend',this.onWindowDragEnd);this.destroyed=true;}},{key:\"resetDragState\",value:function resetDragState(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:false});}},{key:\"render\",value:function render(){var _this$state14=this.state,focused=_this$state14.focused,flattenNodes=_this$state14.flattenNodes,keyEntities=_this$state14.keyEntities,draggingNodeKey=_this$state14.draggingNodeKey,activeKey=_this$state14.activeKey,dropLevelOffset=_this$state14.dropLevelOffset,dropContainerKey=_this$state14.dropContainerKey,dropTargetKey=_this$state14.dropTargetKey,dropPosition=_this$state14.dropPosition,dragOverNodeKey=_this$state14.dragOverNodeKey,indent=_this$state14.indent;var _this$props12=this.props,prefixCls=_this$props12.prefixCls,className=_this$props12.className,style=_this$props12.style,showLine=_this$props12.showLine,focusable=_this$props12.focusable,_this$props12$tabInde=_this$props12.tabIndex,tabIndex=_this$props12$tabInde===void 0?0:_this$props12$tabInde,selectable=_this$props12.selectable,showIcon=_this$props12.showIcon,icon=_this$props12.icon,switcherIcon=_this$props12.switcherIcon,draggable=_this$props12.draggable,checkable=_this$props12.checkable,checkStrictly=_this$props12.checkStrictly,disabled=_this$props12.disabled,motion=_this$props12.motion,loadData=_this$props12.loadData,filterTreeNode=_this$props12.filterTreeNode,height=_this$props12.height,itemHeight=_this$props12.itemHeight,virtual=_this$props12.virtual,titleRender=_this$props12.titleRender,dropIndicatorRender=_this$props12.dropIndicatorRender,onContextMenu=_this$props12.onContextMenu,onScroll=_this$props12.onScroll,direction=_this$props12.direction,rootClassName=_this$props12.rootClassName,rootStyle=_this$props12.rootStyle;var domProps=pickAttrs(this.props,{aria:true,data:true});// It's better move to hooks but we just simply keep here\nvar draggableConfig;if(draggable){if(_typeof(draggable)==='object'){draggableConfig=draggable;}else if(typeof draggable==='function'){draggableConfig={nodeDraggable:draggable};}else{draggableConfig={};}}return/*#__PURE__*/React.createElement(TreeContext.Provider,{value:{prefixCls:prefixCls,selectable:selectable,showIcon:showIcon,icon:icon,switcherIcon:switcherIcon,draggable:draggableConfig,draggingNodeKey:draggingNodeKey,checkable:checkable,checkStrictly:checkStrictly,disabled:disabled,keyEntities:keyEntities,dropLevelOffset:dropLevelOffset,dropContainerKey:dropContainerKey,dropTargetKey:dropTargetKey,dropPosition:dropPosition,dragOverNodeKey:dragOverNodeKey,indent:indent,direction:direction,dropIndicatorRender:dropIndicatorRender,loadData:loadData,filterTreeNode:filterTreeNode,titleRender:titleRender,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},/*#__PURE__*/React.createElement(\"div\",{role:\"tree\",className:classNames(prefixCls,className,rootClassName,_defineProperty(_defineProperty(_defineProperty({},\"\".concat(prefixCls,\"-show-line\"),showLine),\"\".concat(prefixCls,\"-focused\"),focused),\"\".concat(prefixCls,\"-active-focused\"),activeKey!==null)),style:rootStyle},/*#__PURE__*/React.createElement(NodeList,_extends({ref:this.listRef,prefixCls:prefixCls,style:style,data:flattenNodes,disabled:disabled,selectable:selectable,checkable:!!checkable,motion:motion,dragging:draggingNodeKey!==null,height:height,itemHeight:itemHeight,virtual:virtual,focusable:focusable,focused:focused,tabIndex:tabIndex,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:onContextMenu,onScroll:onScroll},this.getTreeNodeRequiredProps(),domProps))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,prevState){var prevProps=prevState.prevProps;var newState={prevProps:props};function needSync(name){return!prevProps&&name in props||prevProps&&prevProps[name]!==props[name];}// ================== Tree Node ==================\nvar treeData;// fieldNames\nvar fieldNames=prevState.fieldNames;if(needSync('fieldNames')){fieldNames=fillFieldNames(props.fieldNames);newState.fieldNames=fieldNames;}// Check if `treeData` or `children` changed and save into the state.\nif(needSync('treeData')){treeData=props.treeData;}else if(needSync('children')){warning(false,'`children` of Tree is deprecated. Please use `treeData` instead.');treeData=convertTreeToData(props.children);}// Save flatten nodes info and convert `treeData` into keyEntities\nif(treeData){newState.treeData=treeData;var entitiesMap=convertDataToEntities(treeData,{fieldNames:fieldNames});newState.keyEntities=_objectSpread(_defineProperty({},MOTION_KEY,MotionEntity),entitiesMap.keyEntities);// Warning if treeNode not provide key\nif(process.env.NODE_ENV!=='production'){warningWithoutKey(treeData,fieldNames);}}var keyEntities=newState.keyEntities||prevState.keyEntities;// ================ expandedKeys =================\nif(needSync('expandedKeys')||prevProps&&needSync('autoExpandParent')){newState.expandedKeys=props.autoExpandParent||!prevProps&&props.defaultExpandParent?conductExpandParent(props.expandedKeys,keyEntities):props.expandedKeys;}else if(!prevProps&&props.defaultExpandAll){var cloneKeyEntities=_objectSpread({},keyEntities);delete cloneKeyEntities[MOTION_KEY];newState.expandedKeys=Object.keys(cloneKeyEntities).map(function(key){return cloneKeyEntities[key].key;});}else if(!prevProps&&props.defaultExpandedKeys){newState.expandedKeys=props.autoExpandParent||props.defaultExpandParent?conductExpandParent(props.defaultExpandedKeys,keyEntities):props.defaultExpandedKeys;}if(!newState.expandedKeys){delete newState.expandedKeys;}// ================ flattenNodes =================\nif(treeData||newState.expandedKeys){var flattenNodes=flattenTreeData(treeData||prevState.treeData,newState.expandedKeys||prevState.expandedKeys,fieldNames);newState.flattenNodes=flattenNodes;}// ================ selectedKeys =================\nif(props.selectable){if(needSync('selectedKeys')){newState.selectedKeys=calcSelectedKeys(props.selectedKeys,props);}else if(!prevProps&&props.defaultSelectedKeys){newState.selectedKeys=calcSelectedKeys(props.defaultSelectedKeys,props);}}// ================= checkedKeys =================\nif(props.checkable){var checkedKeyEntity;if(needSync('checkedKeys')){checkedKeyEntity=parseCheckedKeys(props.checkedKeys)||{};}else if(!prevProps&&props.defaultCheckedKeys){checkedKeyEntity=parseCheckedKeys(props.defaultCheckedKeys)||{};}else if(treeData){// If `treeData` changed, we also need check it\ncheckedKeyEntity=parseCheckedKeys(props.checkedKeys)||{checkedKeys:prevState.checkedKeys,halfCheckedKeys:prevState.halfCheckedKeys};}if(checkedKeyEntity){var _checkedKeyEntity=checkedKeyEntity,_checkedKeyEntity$che=_checkedKeyEntity.checkedKeys,checkedKeys=_checkedKeyEntity$che===void 0?[]:_checkedKeyEntity$che,_checkedKeyEntity$hal=_checkedKeyEntity.halfCheckedKeys,halfCheckedKeys=_checkedKeyEntity$hal===void 0?[]:_checkedKeyEntity$hal;if(!props.checkStrictly){var conductKeys=conductCheck(checkedKeys,true,keyEntities);checkedKeys=conductKeys.checkedKeys;halfCheckedKeys=conductKeys.halfCheckedKeys;}newState.checkedKeys=checkedKeys;newState.halfCheckedKeys=halfCheckedKeys;}}// ================= loadedKeys ==================\nif(needSync('loadedKeys')){newState.loadedKeys=props.loadedKeys;}return newState;}}]);return Tree;}(React.Component);_defineProperty(Tree,\"defaultProps\",{prefixCls:'rc-tree',showLine:false,showIcon:true,selectable:true,multiple:false,checkable:false,disabled:false,checkStrictly:false,draggable:false,defaultExpandParent:true,autoExpandParent:false,defaultExpandAll:false,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:DropIndicator,allowDrop:function allowDrop(){return true;},expandAction:false});_defineProperty(Tree,\"TreeNode\",TreeNode);export default Tree;","map":{"version":3,"names":["_extends","_typeof","_objectSpread","_toConsumableArray","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_createSuper","_defineProperty","classNames","KeyCode","pickAttrs","warning","React","TreeContext","DropIndicator","NodeList","MotionEntity","MOTION_KEY","TreeNode","arrAdd","arrDel","calcDropPosition","calcSelectedKeys","conductExpandParent","getDragChildrenKeys","parseCheckedKeys","posToArr","conductCheck","getEntity","convertDataToEntities","convertNodePropsToEventData","convertTreeToData","fillFieldNames","flattenTreeData","getTreeNodeProps","warningWithoutKey","MAX_RETRY_TIMES","Tree","_React$Component","_super","_this","_len","arguments","length","_args","Array","_key","call","apply","concat","keyEntities","indent","selectedKeys","checkedKeys","halfCheckedKeys","loadedKeys","loadingKeys","expandedKeys","draggingNodeKey","dragChildrenKeys","dropTargetKey","dropPosition","dropContainerKey","dropLevelOffset","dropTargetPos","dropAllowed","dragOverNodeKey","treeData","flattenNodes","focused","activeKey","listChanging","prevProps","fieldNames","createRef","event","node","_this$state","state","onDragStart","props","eventKey","dragNode","dragStartMousePosition","x","clientX","y","clientY","newExpandedKeys","setState","listRef","current","getIndentWidth","setExpandedKeys","window","addEventListener","onWindowDragEnd","_this$state2","_this$props","onDragEnter","onExpand","allowDrop","direction","_node$props","pos","_assertThisInitialize","currentMouseOverDroppableNodeKey","resetDragState","_calcDropPosition","indexOf","delayedDragEnterLogic","Object","keys","forEach","key","clearTimeout","persist","setTimeout","entity","children","expanded","nativeEvent","_this$state3","_this$props2","onDragOver","_assertThisInitialize2","_calcDropPosition2","currentTarget","contains","relatedTarget","onDragLeave","onNodeDragEnd","removeEventListener","onDragEnd","cleanDragState","_this$getActiveItem","outsideTree","undefined","_this$state4","onDrop","abstractDropNodeProps","getTreeNodeRequiredProps","active","getActiveItem","data","dropToChild","posArr","dropResult","dragNodesKeys","dropToGap","Number","e","treeNode","_this$state5","isLeaf","shiftKey","metaKey","ctrlKey","filter","nodeItem","eventNode","onNodeExpand","_this$props3","onClick","expandAction","triggerExpandActionExpand","_this$props4","onDoubleClick","_this$state6","_this$props5","onSelect","multiple","selected","targetSelected","selectedNodes","map","selectedKey","setUncontrolledState","checked","_this$state7","oriCheckedKeys","oriHalfCheckedKeys","_this$props6","checkStrictly","onCheck","checkedObj","eventObj","halfChecked","checkedNodes","checkedKey","_conductCheck","_checkedKeys","_halfCheckedKeys","keySet","Set","delete","_conductCheck2","from","checkedNodesPositions","push","loadPromise","Promise","resolve","reject","_ref","_ref$loadedKeys","_ref$loadingKeys","_this$props7","loadData","onLoad","promise","then","currentLoadedKeys","newLoadedKeys","prevState","catch","loadingRetryTimes","onMouseEnter","onMouseLeave","onRightClick","preventDefault","onFocus","_len2","args","_key2","onBlur","onActiveChange","_len3","_key3","_this$state8","_this$state9","_this$state10","_this$props8","index","targetExpanded","onNodeLoad","newFlattenTreeData","currentExpandedKeys","expandedKeysToRestore","newActiveKey","_this$props9","_this$props9$itemScro","itemScrollOffset","scrollTo","offset","_this$state11","find","_ref2","_this$state12","findIndex","_ref3","item","_key4","_this$state13","_this$props10","onKeyDown","checkable","selectable","which","UP","offsetActiveKey","DOWN","activeItem","treeNodeRequiredProps","expandable","LEFT","includes","parent","RIGHT","ENTER","SPACE","disabled","disableCheckbox","onNodeCheck","onNodeSelect","atomic","forceState","destroyed","needSync","allPassed","newState","name","scroll","value","componentDidMount","onUpdated","componentDidUpdate","_this$props11","_this$props11$itemScr","componentWillUnmount","render","_this$state14","_this$props12","prefixCls","className","style","showLine","focusable","_this$props12$tabInde","tabIndex","showIcon","icon","switcherIcon","draggable","motion","filterTreeNode","height","itemHeight","virtual","titleRender","dropIndicatorRender","onContextMenu","onScroll","rootClassName","rootStyle","domProps","aria","draggableConfig","nodeDraggable","createElement","Provider","onNodeClick","onNodeDoubleClick","onNodeMouseEnter","onNodeMouseLeave","onNodeContextMenu","onNodeDragStart","onNodeDragEnter","onNodeDragOver","onNodeDragLeave","onNodeDrop","role","ref","dragging","onListChangeStart","onListChangeEnd","getDerivedStateFromProps","entitiesMap","process","env","NODE_ENV","autoExpandParent","defaultExpandParent","defaultExpandAll","cloneKeyEntities","defaultExpandedKeys","defaultSelectedKeys","checkedKeyEntity","defaultCheckedKeys","_checkedKeyEntity","_checkedKeyEntity$che","_checkedKeyEntity$hal","conductKeys","Component"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-tree/es/Tree.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n// TODO: https://www.w3.org/TR/2017/NOTE-wai-aria-practices-1.1-20171214/examples/treeview/treeview-2/treeview-2a.html\n// Fully accessibility support\n\nimport classNames from 'classnames';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { TreeContext } from \"./contextTypes\";\nimport DropIndicator from \"./DropIndicator\";\nimport NodeList, { MotionEntity, MOTION_KEY } from \"./NodeList\";\nimport TreeNode from \"./TreeNode\";\nimport { arrAdd, arrDel, calcDropPosition, calcSelectedKeys, conductExpandParent, getDragChildrenKeys, parseCheckedKeys, posToArr } from \"./util\";\nimport { conductCheck } from \"./utils/conductUtil\";\nimport getEntity from \"./utils/keyUtil\";\nimport { convertDataToEntities, convertNodePropsToEventData, convertTreeToData, fillFieldNames, flattenTreeData, getTreeNodeProps, warningWithoutKey } from \"./utils/treeUtil\";\nvar MAX_RETRY_TIMES = 10;\nvar Tree = /*#__PURE__*/function (_React$Component) {\n  _inherits(Tree, _React$Component);\n  var _super = _createSuper(Tree);\n  function Tree() {\n    var _this;\n    _classCallCheck(this, Tree);\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(_args));\n    _defineProperty(_assertThisInitialized(_this), \"destroyed\", false);\n    _defineProperty(_assertThisInitialized(_this), \"delayedDragEnterLogic\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"loadingRetryTimes\", {});\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      keyEntities: {},\n      indent: null,\n      selectedKeys: [],\n      checkedKeys: [],\n      halfCheckedKeys: [],\n      loadedKeys: [],\n      loadingKeys: [],\n      expandedKeys: [],\n      draggingNodeKey: null,\n      dragChildrenKeys: [],\n      // dropTargetKey is the key of abstract-drop-node\n      // the abstract-drop-node is the real drop node when drag and drop\n      // not the DOM drag over node\n      dropTargetKey: null,\n      dropPosition: null,\n      // the drop position of abstract-drop-node, inside 0, top -1, bottom 1\n      dropContainerKey: null,\n      // the container key of abstract-drop-node if dropPosition is -1 or 1\n      dropLevelOffset: null,\n      // the drop level offset of abstract-drag-over-node\n      dropTargetPos: null,\n      // the pos of abstract-drop-node\n      dropAllowed: true,\n      // if drop to abstract-drop-node is allowed\n      // the abstract-drag-over-node\n      // if mouse is on the bottom of top dom node or no the top of the bottom dom node\n      // abstract-drag-over-node is the top node\n      dragOverNodeKey: null,\n      treeData: [],\n      flattenNodes: [],\n      focused: false,\n      activeKey: null,\n      listChanging: false,\n      prevProps: null,\n      fieldNames: fillFieldNames()\n    });\n    _defineProperty(_assertThisInitialized(_this), \"dragStartMousePosition\", null);\n    _defineProperty(_assertThisInitialized(_this), \"dragNode\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"currentMouseOverDroppableNodeKey\", null);\n    _defineProperty(_assertThisInitialized(_this), \"listRef\", /*#__PURE__*/React.createRef());\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDragStart\", function (event, node) {\n      var _this$state = _this.state,\n        expandedKeys = _this$state.expandedKeys,\n        keyEntities = _this$state.keyEntities;\n      var onDragStart = _this.props.onDragStart;\n      var eventKey = node.props.eventKey;\n      _this.dragNode = node;\n      _this.dragStartMousePosition = {\n        x: event.clientX,\n        y: event.clientY\n      };\n      var newExpandedKeys = arrDel(expandedKeys, eventKey);\n      _this.setState({\n        draggingNodeKey: eventKey,\n        dragChildrenKeys: getDragChildrenKeys(eventKey, keyEntities),\n        indent: _this.listRef.current.getIndentWidth()\n      });\n      _this.setExpandedKeys(newExpandedKeys);\n      window.addEventListener('dragend', _this.onWindowDragEnd);\n      onDragStart === null || onDragStart === void 0 || onDragStart({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n    });\n    /**\n     * [Legacy] Select handler is smaller than node,\n     * so that this will trigger when drag enter node or select handler.\n     * This is a little tricky if customize css without padding.\n     * Better for use mouse move event to refresh drag state.\n     * But let's just keep it to avoid event trigger logic change.\n     */\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDragEnter\", function (event, node) {\n      var _this$state2 = _this.state,\n        expandedKeys = _this$state2.expandedKeys,\n        keyEntities = _this$state2.keyEntities,\n        dragChildrenKeys = _this$state2.dragChildrenKeys,\n        flattenNodes = _this$state2.flattenNodes,\n        indent = _this$state2.indent;\n      var _this$props = _this.props,\n        onDragEnter = _this$props.onDragEnter,\n        onExpand = _this$props.onExpand,\n        allowDrop = _this$props.allowDrop,\n        direction = _this$props.direction;\n      var _node$props = node.props,\n        pos = _node$props.pos,\n        eventKey = _node$props.eventKey;\n      var _assertThisInitialize = _assertThisInitialized(_this),\n        dragNode = _assertThisInitialize.dragNode;\n\n      // record the key of node which is latest entered, used in dragleave event.\n      if (_this.currentMouseOverDroppableNodeKey !== eventKey) {\n        _this.currentMouseOverDroppableNodeKey = eventKey;\n      }\n      if (!dragNode) {\n        _this.resetDragState();\n        return;\n      }\n      var _calcDropPosition = calcDropPosition(event, dragNode, node, indent, _this.dragStartMousePosition, allowDrop, flattenNodes, keyEntities, expandedKeys, direction),\n        dropPosition = _calcDropPosition.dropPosition,\n        dropLevelOffset = _calcDropPosition.dropLevelOffset,\n        dropTargetKey = _calcDropPosition.dropTargetKey,\n        dropContainerKey = _calcDropPosition.dropContainerKey,\n        dropTargetPos = _calcDropPosition.dropTargetPos,\n        dropAllowed = _calcDropPosition.dropAllowed,\n        dragOverNodeKey = _calcDropPosition.dragOverNodeKey;\n      if (\n      // don't allow drop inside its children\n      dragChildrenKeys.indexOf(dropTargetKey) !== -1 ||\n      // don't allow drop when drop is not allowed caculated by calcDropPosition\n      !dropAllowed) {\n        _this.resetDragState();\n        return;\n      }\n\n      // Side effect for delay drag\n      if (!_this.delayedDragEnterLogic) {\n        _this.delayedDragEnterLogic = {};\n      }\n      Object.keys(_this.delayedDragEnterLogic).forEach(function (key) {\n        clearTimeout(_this.delayedDragEnterLogic[key]);\n      });\n      if (dragNode.props.eventKey !== node.props.eventKey) {\n        // hoist expand logic here\n        // since if logic is on the bottom\n        // it will be blocked by abstract dragover node check\n        //   => if you dragenter from top, you mouse will still be consider as in the top node\n        event.persist();\n        _this.delayedDragEnterLogic[pos] = window.setTimeout(function () {\n          if (_this.state.draggingNodeKey === null) return;\n          var newExpandedKeys = _toConsumableArray(expandedKeys);\n          var entity = getEntity(keyEntities, node.props.eventKey);\n          if (entity && (entity.children || []).length) {\n            newExpandedKeys = arrAdd(expandedKeys, node.props.eventKey);\n          }\n          if (!('expandedKeys' in _this.props)) {\n            _this.setExpandedKeys(newExpandedKeys);\n          }\n          onExpand === null || onExpand === void 0 || onExpand(newExpandedKeys, {\n            node: convertNodePropsToEventData(node.props),\n            expanded: true,\n            nativeEvent: event.nativeEvent\n          });\n        }, 800);\n      }\n\n      // Skip if drag node is self\n      if (dragNode.props.eventKey === dropTargetKey && dropLevelOffset === 0) {\n        _this.resetDragState();\n        return;\n      }\n\n      // Update drag over node and drag state\n      _this.setState({\n        dragOverNodeKey: dragOverNodeKey,\n        dropPosition: dropPosition,\n        dropLevelOffset: dropLevelOffset,\n        dropTargetKey: dropTargetKey,\n        dropContainerKey: dropContainerKey,\n        dropTargetPos: dropTargetPos,\n        dropAllowed: dropAllowed\n      });\n      onDragEnter === null || onDragEnter === void 0 || onDragEnter({\n        event: event,\n        node: convertNodePropsToEventData(node.props),\n        expandedKeys: expandedKeys\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDragOver\", function (event, node) {\n      var _this$state3 = _this.state,\n        dragChildrenKeys = _this$state3.dragChildrenKeys,\n        flattenNodes = _this$state3.flattenNodes,\n        keyEntities = _this$state3.keyEntities,\n        expandedKeys = _this$state3.expandedKeys,\n        indent = _this$state3.indent;\n      var _this$props2 = _this.props,\n        onDragOver = _this$props2.onDragOver,\n        allowDrop = _this$props2.allowDrop,\n        direction = _this$props2.direction;\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n        dragNode = _assertThisInitialize2.dragNode;\n      if (!dragNode) {\n        return;\n      }\n      var _calcDropPosition2 = calcDropPosition(event, dragNode, node, indent, _this.dragStartMousePosition, allowDrop, flattenNodes, keyEntities, expandedKeys, direction),\n        dropPosition = _calcDropPosition2.dropPosition,\n        dropLevelOffset = _calcDropPosition2.dropLevelOffset,\n        dropTargetKey = _calcDropPosition2.dropTargetKey,\n        dropContainerKey = _calcDropPosition2.dropContainerKey,\n        dropAllowed = _calcDropPosition2.dropAllowed,\n        dropTargetPos = _calcDropPosition2.dropTargetPos,\n        dragOverNodeKey = _calcDropPosition2.dragOverNodeKey;\n      if (dragChildrenKeys.indexOf(dropTargetKey) !== -1 || !dropAllowed) {\n        // don't allow drop inside its children\n        // don't allow drop when drop is not allowed calculated by calcDropPosition\n        return;\n      }\n\n      // Update drag position\n\n      if (dragNode.props.eventKey === dropTargetKey && dropLevelOffset === 0) {\n        if (!(_this.state.dropPosition === null && _this.state.dropLevelOffset === null && _this.state.dropTargetKey === null && _this.state.dropContainerKey === null && _this.state.dropTargetPos === null && _this.state.dropAllowed === false && _this.state.dragOverNodeKey === null)) {\n          _this.resetDragState();\n        }\n      } else if (!(dropPosition === _this.state.dropPosition && dropLevelOffset === _this.state.dropLevelOffset && dropTargetKey === _this.state.dropTargetKey && dropContainerKey === _this.state.dropContainerKey && dropTargetPos === _this.state.dropTargetPos && dropAllowed === _this.state.dropAllowed && dragOverNodeKey === _this.state.dragOverNodeKey)) {\n        _this.setState({\n          dropPosition: dropPosition,\n          dropLevelOffset: dropLevelOffset,\n          dropTargetKey: dropTargetKey,\n          dropContainerKey: dropContainerKey,\n          dropTargetPos: dropTargetPos,\n          dropAllowed: dropAllowed,\n          dragOverNodeKey: dragOverNodeKey\n        });\n      }\n      onDragOver === null || onDragOver === void 0 || onDragOver({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDragLeave\", function (event, node) {\n      // if it is outside the droppable area\n      // currentMouseOverDroppableNodeKey will be updated in dragenter event when into another droppable receiver.\n      if (_this.currentMouseOverDroppableNodeKey === node.props.eventKey && !event.currentTarget.contains(event.relatedTarget)) {\n        _this.resetDragState();\n        _this.currentMouseOverDroppableNodeKey = null;\n      }\n      var onDragLeave = _this.props.onDragLeave;\n      onDragLeave === null || onDragLeave === void 0 || onDragLeave({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n    });\n    // since stopPropagation() is called in treeNode\n    // if onWindowDrag is called, whice means state is keeped, drag state should be cleared\n    _defineProperty(_assertThisInitialized(_this), \"onWindowDragEnd\", function (event) {\n      _this.onNodeDragEnd(event, null, true);\n      window.removeEventListener('dragend', _this.onWindowDragEnd);\n    });\n    // if onNodeDragEnd is called, onWindowDragEnd won't be called since stopPropagation() is called\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDragEnd\", function (event, node) {\n      var onDragEnd = _this.props.onDragEnd;\n      _this.setState({\n        dragOverNodeKey: null\n      });\n      _this.cleanDragState();\n      onDragEnd === null || onDragEnd === void 0 || onDragEnd({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n      _this.dragNode = null;\n      window.removeEventListener('dragend', _this.onWindowDragEnd);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDrop\", function (event, node) {\n      var _this$getActiveItem;\n      var outsideTree = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var _this$state4 = _this.state,\n        dragChildrenKeys = _this$state4.dragChildrenKeys,\n        dropPosition = _this$state4.dropPosition,\n        dropTargetKey = _this$state4.dropTargetKey,\n        dropTargetPos = _this$state4.dropTargetPos,\n        dropAllowed = _this$state4.dropAllowed;\n      if (!dropAllowed) return;\n      var onDrop = _this.props.onDrop;\n      _this.setState({\n        dragOverNodeKey: null\n      });\n      _this.cleanDragState();\n      if (dropTargetKey === null) return;\n      var abstractDropNodeProps = _objectSpread(_objectSpread({}, getTreeNodeProps(dropTargetKey, _this.getTreeNodeRequiredProps())), {}, {\n        active: ((_this$getActiveItem = _this.getActiveItem()) === null || _this$getActiveItem === void 0 ? void 0 : _this$getActiveItem.key) === dropTargetKey,\n        data: getEntity(_this.state.keyEntities, dropTargetKey).node\n      });\n      var dropToChild = dragChildrenKeys.indexOf(dropTargetKey) !== -1;\n      warning(!dropToChild, \"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.\");\n      var posArr = posToArr(dropTargetPos);\n      var dropResult = {\n        event: event,\n        node: convertNodePropsToEventData(abstractDropNodeProps),\n        dragNode: _this.dragNode ? convertNodePropsToEventData(_this.dragNode.props) : null,\n        dragNodesKeys: [_this.dragNode.props.eventKey].concat(dragChildrenKeys),\n        dropToGap: dropPosition !== 0,\n        dropPosition: dropPosition + Number(posArr[posArr.length - 1])\n      };\n      if (!outsideTree) {\n        onDrop === null || onDrop === void 0 || onDrop(dropResult);\n      }\n      _this.dragNode = null;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"cleanDragState\", function () {\n      var draggingNodeKey = _this.state.draggingNodeKey;\n      if (draggingNodeKey !== null) {\n        _this.setState({\n          draggingNodeKey: null,\n          dropPosition: null,\n          dropContainerKey: null,\n          dropTargetKey: null,\n          dropLevelOffset: null,\n          dropAllowed: true,\n          dragOverNodeKey: null\n        });\n      }\n      _this.dragStartMousePosition = null;\n      _this.currentMouseOverDroppableNodeKey = null;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"triggerExpandActionExpand\", function (e, treeNode) {\n      var _this$state5 = _this.state,\n        expandedKeys = _this$state5.expandedKeys,\n        flattenNodes = _this$state5.flattenNodes;\n      var expanded = treeNode.expanded,\n        key = treeNode.key,\n        isLeaf = treeNode.isLeaf;\n      if (isLeaf || e.shiftKey || e.metaKey || e.ctrlKey) {\n        return;\n      }\n      var node = flattenNodes.filter(function (nodeItem) {\n        return nodeItem.key === key;\n      })[0];\n      var eventNode = convertNodePropsToEventData(_objectSpread(_objectSpread({}, getTreeNodeProps(key, _this.getTreeNodeRequiredProps())), {}, {\n        data: node.data\n      }));\n      _this.setExpandedKeys(expanded ? arrDel(expandedKeys, key) : arrAdd(expandedKeys, key));\n      _this.onNodeExpand(e, eventNode);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeClick\", function (e, treeNode) {\n      var _this$props3 = _this.props,\n        onClick = _this$props3.onClick,\n        expandAction = _this$props3.expandAction;\n      if (expandAction === 'click') {\n        _this.triggerExpandActionExpand(e, treeNode);\n      }\n      onClick === null || onClick === void 0 || onClick(e, treeNode);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDoubleClick\", function (e, treeNode) {\n      var _this$props4 = _this.props,\n        onDoubleClick = _this$props4.onDoubleClick,\n        expandAction = _this$props4.expandAction;\n      if (expandAction === 'doubleClick') {\n        _this.triggerExpandActionExpand(e, treeNode);\n      }\n      onDoubleClick === null || onDoubleClick === void 0 || onDoubleClick(e, treeNode);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeSelect\", function (e, treeNode) {\n      var selectedKeys = _this.state.selectedKeys;\n      var _this$state6 = _this.state,\n        keyEntities = _this$state6.keyEntities,\n        fieldNames = _this$state6.fieldNames;\n      var _this$props5 = _this.props,\n        onSelect = _this$props5.onSelect,\n        multiple = _this$props5.multiple;\n      var selected = treeNode.selected;\n      var key = treeNode[fieldNames.key];\n      var targetSelected = !selected;\n\n      // Update selected keys\n      if (!targetSelected) {\n        selectedKeys = arrDel(selectedKeys, key);\n      } else if (!multiple) {\n        selectedKeys = [key];\n      } else {\n        selectedKeys = arrAdd(selectedKeys, key);\n      }\n\n      // [Legacy] Not found related usage in doc or upper libs\n      var selectedNodes = selectedKeys.map(function (selectedKey) {\n        var entity = getEntity(keyEntities, selectedKey);\n        if (!entity) return null;\n        return entity.node;\n      }).filter(function (node) {\n        return node;\n      });\n      _this.setUncontrolledState({\n        selectedKeys: selectedKeys\n      });\n      onSelect === null || onSelect === void 0 || onSelect(selectedKeys, {\n        event: 'select',\n        selected: targetSelected,\n        node: treeNode,\n        selectedNodes: selectedNodes,\n        nativeEvent: e.nativeEvent\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeCheck\", function (e, treeNode, checked) {\n      var _this$state7 = _this.state,\n        keyEntities = _this$state7.keyEntities,\n        oriCheckedKeys = _this$state7.checkedKeys,\n        oriHalfCheckedKeys = _this$state7.halfCheckedKeys;\n      var _this$props6 = _this.props,\n        checkStrictly = _this$props6.checkStrictly,\n        onCheck = _this$props6.onCheck;\n      var key = treeNode.key;\n\n      // Prepare trigger arguments\n      var checkedObj;\n      var eventObj = {\n        event: 'check',\n        node: treeNode,\n        checked: checked,\n        nativeEvent: e.nativeEvent\n      };\n      if (checkStrictly) {\n        var checkedKeys = checked ? arrAdd(oriCheckedKeys, key) : arrDel(oriCheckedKeys, key);\n        var halfCheckedKeys = arrDel(oriHalfCheckedKeys, key);\n        checkedObj = {\n          checked: checkedKeys,\n          halfChecked: halfCheckedKeys\n        };\n        eventObj.checkedNodes = checkedKeys.map(function (checkedKey) {\n          return getEntity(keyEntities, checkedKey);\n        }).filter(function (entity) {\n          return entity;\n        }).map(function (entity) {\n          return entity.node;\n        });\n        _this.setUncontrolledState({\n          checkedKeys: checkedKeys\n        });\n      } else {\n        // Always fill first\n        var _conductCheck = conductCheck([].concat(_toConsumableArray(oriCheckedKeys), [key]), true, keyEntities),\n          _checkedKeys = _conductCheck.checkedKeys,\n          _halfCheckedKeys = _conductCheck.halfCheckedKeys;\n\n        // If remove, we do it again to correction\n        if (!checked) {\n          var keySet = new Set(_checkedKeys);\n          keySet.delete(key);\n          var _conductCheck2 = conductCheck(Array.from(keySet), {\n            checked: false,\n            halfCheckedKeys: _halfCheckedKeys\n          }, keyEntities);\n          _checkedKeys = _conductCheck2.checkedKeys;\n          _halfCheckedKeys = _conductCheck2.halfCheckedKeys;\n        }\n        checkedObj = _checkedKeys;\n\n        // [Legacy] This is used for `rc-tree-select`\n        eventObj.checkedNodes = [];\n        eventObj.checkedNodesPositions = [];\n        eventObj.halfCheckedKeys = _halfCheckedKeys;\n        _checkedKeys.forEach(function (checkedKey) {\n          var entity = getEntity(keyEntities, checkedKey);\n          if (!entity) return;\n          var node = entity.node,\n            pos = entity.pos;\n          eventObj.checkedNodes.push(node);\n          eventObj.checkedNodesPositions.push({\n            node: node,\n            pos: pos\n          });\n        });\n        _this.setUncontrolledState({\n          checkedKeys: _checkedKeys\n        }, false, {\n          halfCheckedKeys: _halfCheckedKeys\n        });\n      }\n      onCheck === null || onCheck === void 0 || onCheck(checkedObj, eventObj);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeLoad\", function (treeNode) {\n      var key = treeNode.key;\n      var loadPromise = new Promise(function (resolve, reject) {\n        // We need to get the latest state of loading/loaded keys\n        _this.setState(function (_ref) {\n          var _ref$loadedKeys = _ref.loadedKeys,\n            loadedKeys = _ref$loadedKeys === void 0 ? [] : _ref$loadedKeys,\n            _ref$loadingKeys = _ref.loadingKeys,\n            loadingKeys = _ref$loadingKeys === void 0 ? [] : _ref$loadingKeys;\n          var _this$props7 = _this.props,\n            loadData = _this$props7.loadData,\n            onLoad = _this$props7.onLoad;\n          if (!loadData || loadedKeys.indexOf(key) !== -1 || loadingKeys.indexOf(key) !== -1) {\n            return null;\n          }\n\n          // Process load data\n          var promise = loadData(treeNode);\n          promise.then(function () {\n            var currentLoadedKeys = _this.state.loadedKeys;\n            var newLoadedKeys = arrAdd(currentLoadedKeys, key);\n\n            // onLoad should trigger before internal setState to avoid `loadData` trigger twice.\n            // https://github.com/ant-design/ant-design/issues/12464\n            onLoad === null || onLoad === void 0 || onLoad(newLoadedKeys, {\n              event: 'load',\n              node: treeNode\n            });\n            _this.setUncontrolledState({\n              loadedKeys: newLoadedKeys\n            });\n            _this.setState(function (prevState) {\n              return {\n                loadingKeys: arrDel(prevState.loadingKeys, key)\n              };\n            });\n            resolve();\n          }).catch(function (e) {\n            _this.setState(function (prevState) {\n              return {\n                loadingKeys: arrDel(prevState.loadingKeys, key)\n              };\n            });\n\n            // If exceed max retry times, we give up retry\n            _this.loadingRetryTimes[key] = (_this.loadingRetryTimes[key] || 0) + 1;\n            if (_this.loadingRetryTimes[key] >= MAX_RETRY_TIMES) {\n              var currentLoadedKeys = _this.state.loadedKeys;\n              warning(false, 'Retry for `loadData` many times but still failed. No more retry.');\n              _this.setUncontrolledState({\n                loadedKeys: arrAdd(currentLoadedKeys, key)\n              });\n              resolve();\n            }\n            reject(e);\n          });\n          return {\n            loadingKeys: arrAdd(loadingKeys, key)\n          };\n        });\n      });\n\n      // Not care warning if we ignore this\n      loadPromise.catch(function () {});\n      return loadPromise;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeMouseEnter\", function (event, node) {\n      var onMouseEnter = _this.props.onMouseEnter;\n      onMouseEnter === null || onMouseEnter === void 0 || onMouseEnter({\n        event: event,\n        node: node\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeMouseLeave\", function (event, node) {\n      var onMouseLeave = _this.props.onMouseLeave;\n      onMouseLeave === null || onMouseLeave === void 0 || onMouseLeave({\n        event: event,\n        node: node\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeContextMenu\", function (event, node) {\n      var onRightClick = _this.props.onRightClick;\n      if (onRightClick) {\n        event.preventDefault();\n        onRightClick({\n          event: event,\n          node: node\n        });\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function () {\n      var onFocus = _this.props.onFocus;\n      _this.setState({\n        focused: true\n      });\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      onFocus === null || onFocus === void 0 || onFocus.apply(void 0, args);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onBlur\", function () {\n      var onBlur = _this.props.onBlur;\n      _this.setState({\n        focused: false\n      });\n      _this.onActiveChange(null);\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      onBlur === null || onBlur === void 0 || onBlur.apply(void 0, args);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getTreeNodeRequiredProps\", function () {\n      var _this$state8 = _this.state,\n        expandedKeys = _this$state8.expandedKeys,\n        selectedKeys = _this$state8.selectedKeys,\n        loadedKeys = _this$state8.loadedKeys,\n        loadingKeys = _this$state8.loadingKeys,\n        checkedKeys = _this$state8.checkedKeys,\n        halfCheckedKeys = _this$state8.halfCheckedKeys,\n        dragOverNodeKey = _this$state8.dragOverNodeKey,\n        dropPosition = _this$state8.dropPosition,\n        keyEntities = _this$state8.keyEntities;\n      return {\n        expandedKeys: expandedKeys || [],\n        selectedKeys: selectedKeys || [],\n        loadedKeys: loadedKeys || [],\n        loadingKeys: loadingKeys || [],\n        checkedKeys: checkedKeys || [],\n        halfCheckedKeys: halfCheckedKeys || [],\n        dragOverNodeKey: dragOverNodeKey,\n        dropPosition: dropPosition,\n        keyEntities: keyEntities\n      };\n    });\n    // =========================== Expanded ===========================\n    /** Set uncontrolled `expandedKeys`. This will also auto update `flattenNodes`. */\n    _defineProperty(_assertThisInitialized(_this), \"setExpandedKeys\", function (expandedKeys) {\n      var _this$state9 = _this.state,\n        treeData = _this$state9.treeData,\n        fieldNames = _this$state9.fieldNames;\n      var flattenNodes = flattenTreeData(treeData, expandedKeys, fieldNames);\n      _this.setUncontrolledState({\n        expandedKeys: expandedKeys,\n        flattenNodes: flattenNodes\n      }, true);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeExpand\", function (e, treeNode) {\n      var expandedKeys = _this.state.expandedKeys;\n      var _this$state10 = _this.state,\n        listChanging = _this$state10.listChanging,\n        fieldNames = _this$state10.fieldNames;\n      var _this$props8 = _this.props,\n        onExpand = _this$props8.onExpand,\n        loadData = _this$props8.loadData;\n      var expanded = treeNode.expanded;\n      var key = treeNode[fieldNames.key];\n\n      // Do nothing when motion is in progress\n      if (listChanging) {\n        return;\n      }\n\n      // Update selected keys\n      var index = expandedKeys.indexOf(key);\n      var targetExpanded = !expanded;\n      warning(expanded && index !== -1 || !expanded && index === -1, 'Expand state not sync with index check');\n      if (targetExpanded) {\n        expandedKeys = arrAdd(expandedKeys, key);\n      } else {\n        expandedKeys = arrDel(expandedKeys, key);\n      }\n      _this.setExpandedKeys(expandedKeys);\n      onExpand === null || onExpand === void 0 || onExpand(expandedKeys, {\n        node: treeNode,\n        expanded: targetExpanded,\n        nativeEvent: e.nativeEvent\n      });\n\n      // Async Load data\n      if (targetExpanded && loadData) {\n        var loadPromise = _this.onNodeLoad(treeNode);\n        if (loadPromise) {\n          loadPromise.then(function () {\n            // [Legacy] Refresh logic\n            var newFlattenTreeData = flattenTreeData(_this.state.treeData, expandedKeys, fieldNames);\n            _this.setUncontrolledState({\n              flattenNodes: newFlattenTreeData\n            });\n          }).catch(function () {\n            var currentExpandedKeys = _this.state.expandedKeys;\n            var expandedKeysToRestore = arrDel(currentExpandedKeys, key);\n            _this.setExpandedKeys(expandedKeysToRestore);\n          });\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onListChangeStart\", function () {\n      _this.setUncontrolledState({\n        listChanging: true\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onListChangeEnd\", function () {\n      setTimeout(function () {\n        _this.setUncontrolledState({\n          listChanging: false\n        });\n      });\n    });\n    // =========================== Keyboard ===========================\n    _defineProperty(_assertThisInitialized(_this), \"onActiveChange\", function (newActiveKey) {\n      var activeKey = _this.state.activeKey;\n      var _this$props9 = _this.props,\n        onActiveChange = _this$props9.onActiveChange,\n        _this$props9$itemScro = _this$props9.itemScrollOffset,\n        itemScrollOffset = _this$props9$itemScro === void 0 ? 0 : _this$props9$itemScro;\n      if (activeKey === newActiveKey) {\n        return;\n      }\n      _this.setState({\n        activeKey: newActiveKey\n      });\n      if (newActiveKey !== null) {\n        _this.scrollTo({\n          key: newActiveKey,\n          offset: itemScrollOffset\n        });\n      }\n      onActiveChange === null || onActiveChange === void 0 || onActiveChange(newActiveKey);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getActiveItem\", function () {\n      var _this$state11 = _this.state,\n        activeKey = _this$state11.activeKey,\n        flattenNodes = _this$state11.flattenNodes;\n      if (activeKey === null) {\n        return null;\n      }\n      return flattenNodes.find(function (_ref2) {\n        var key = _ref2.key;\n        return key === activeKey;\n      }) || null;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"offsetActiveKey\", function (offset) {\n      var _this$state12 = _this.state,\n        flattenNodes = _this$state12.flattenNodes,\n        activeKey = _this$state12.activeKey;\n      var index = flattenNodes.findIndex(function (_ref3) {\n        var key = _ref3.key;\n        return key === activeKey;\n      });\n\n      // Align with index\n      if (index === -1 && offset < 0) {\n        index = flattenNodes.length;\n      }\n      index = (index + offset + flattenNodes.length) % flattenNodes.length;\n      var item = flattenNodes[index];\n      if (item) {\n        var _key4 = item.key;\n        _this.onActiveChange(_key4);\n      } else {\n        _this.onActiveChange(null);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (event) {\n      var _this$state13 = _this.state,\n        activeKey = _this$state13.activeKey,\n        expandedKeys = _this$state13.expandedKeys,\n        checkedKeys = _this$state13.checkedKeys,\n        fieldNames = _this$state13.fieldNames;\n      var _this$props10 = _this.props,\n        onKeyDown = _this$props10.onKeyDown,\n        checkable = _this$props10.checkable,\n        selectable = _this$props10.selectable;\n\n      // >>>>>>>>>> Direction\n      switch (event.which) {\n        case KeyCode.UP:\n          {\n            _this.offsetActiveKey(-1);\n            event.preventDefault();\n            break;\n          }\n        case KeyCode.DOWN:\n          {\n            _this.offsetActiveKey(1);\n            event.preventDefault();\n            break;\n          }\n      }\n\n      // >>>>>>>>>> Expand & Selection\n      var activeItem = _this.getActiveItem();\n      if (activeItem && activeItem.data) {\n        var treeNodeRequiredProps = _this.getTreeNodeRequiredProps();\n        var expandable = activeItem.data.isLeaf === false || !!(activeItem.data[fieldNames.children] || []).length;\n        var eventNode = convertNodePropsToEventData(_objectSpread(_objectSpread({}, getTreeNodeProps(activeKey, treeNodeRequiredProps)), {}, {\n          data: activeItem.data,\n          active: true\n        }));\n        switch (event.which) {\n          // >>> Expand\n          case KeyCode.LEFT:\n            {\n              // Collapse if possible\n              if (expandable && expandedKeys.includes(activeKey)) {\n                _this.onNodeExpand({}, eventNode);\n              } else if (activeItem.parent) {\n                _this.onActiveChange(activeItem.parent.key);\n              }\n              event.preventDefault();\n              break;\n            }\n          case KeyCode.RIGHT:\n            {\n              // Expand if possible\n              if (expandable && !expandedKeys.includes(activeKey)) {\n                _this.onNodeExpand({}, eventNode);\n              } else if (activeItem.children && activeItem.children.length) {\n                _this.onActiveChange(activeItem.children[0].key);\n              }\n              event.preventDefault();\n              break;\n            }\n\n          // Selection\n          case KeyCode.ENTER:\n          case KeyCode.SPACE:\n            {\n              if (checkable && !eventNode.disabled && eventNode.checkable !== false && !eventNode.disableCheckbox) {\n                _this.onNodeCheck({}, eventNode, !checkedKeys.includes(activeKey));\n              } else if (!checkable && selectable && !eventNode.disabled && eventNode.selectable !== false) {\n                _this.onNodeSelect({}, eventNode);\n              }\n              break;\n            }\n        }\n      }\n      onKeyDown === null || onKeyDown === void 0 || onKeyDown(event);\n    });\n    /**\n     * Only update the value which is not in props\n     */\n    _defineProperty(_assertThisInitialized(_this), \"setUncontrolledState\", function (state) {\n      var atomic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var forceState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      if (!_this.destroyed) {\n        var needSync = false;\n        var allPassed = true;\n        var newState = {};\n        Object.keys(state).forEach(function (name) {\n          if (name in _this.props) {\n            allPassed = false;\n            return;\n          }\n          needSync = true;\n          newState[name] = state[name];\n        });\n        if (needSync && (!atomic || allPassed)) {\n          _this.setState(_objectSpread(_objectSpread({}, newState), forceState));\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"scrollTo\", function (scroll) {\n      _this.listRef.current.scrollTo(scroll);\n    });\n    return _this;\n  }\n  _createClass(Tree, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.destroyed = false;\n      this.onUpdated();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.onUpdated();\n    }\n  }, {\n    key: \"onUpdated\",\n    value: function onUpdated() {\n      var _this$props11 = this.props,\n        activeKey = _this$props11.activeKey,\n        _this$props11$itemScr = _this$props11.itemScrollOffset,\n        itemScrollOffset = _this$props11$itemScr === void 0 ? 0 : _this$props11$itemScr;\n      if (activeKey !== undefined && activeKey !== this.state.activeKey) {\n        this.setState({\n          activeKey: activeKey\n        });\n        if (activeKey !== null) {\n          this.scrollTo({\n            key: activeKey,\n            offset: itemScrollOffset\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('dragend', this.onWindowDragEnd);\n      this.destroyed = true;\n    }\n  }, {\n    key: \"resetDragState\",\n    value: function resetDragState() {\n      this.setState({\n        dragOverNodeKey: null,\n        dropPosition: null,\n        dropLevelOffset: null,\n        dropTargetKey: null,\n        dropContainerKey: null,\n        dropTargetPos: null,\n        dropAllowed: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state14 = this.state,\n        focused = _this$state14.focused,\n        flattenNodes = _this$state14.flattenNodes,\n        keyEntities = _this$state14.keyEntities,\n        draggingNodeKey = _this$state14.draggingNodeKey,\n        activeKey = _this$state14.activeKey,\n        dropLevelOffset = _this$state14.dropLevelOffset,\n        dropContainerKey = _this$state14.dropContainerKey,\n        dropTargetKey = _this$state14.dropTargetKey,\n        dropPosition = _this$state14.dropPosition,\n        dragOverNodeKey = _this$state14.dragOverNodeKey,\n        indent = _this$state14.indent;\n      var _this$props12 = this.props,\n        prefixCls = _this$props12.prefixCls,\n        className = _this$props12.className,\n        style = _this$props12.style,\n        showLine = _this$props12.showLine,\n        focusable = _this$props12.focusable,\n        _this$props12$tabInde = _this$props12.tabIndex,\n        tabIndex = _this$props12$tabInde === void 0 ? 0 : _this$props12$tabInde,\n        selectable = _this$props12.selectable,\n        showIcon = _this$props12.showIcon,\n        icon = _this$props12.icon,\n        switcherIcon = _this$props12.switcherIcon,\n        draggable = _this$props12.draggable,\n        checkable = _this$props12.checkable,\n        checkStrictly = _this$props12.checkStrictly,\n        disabled = _this$props12.disabled,\n        motion = _this$props12.motion,\n        loadData = _this$props12.loadData,\n        filterTreeNode = _this$props12.filterTreeNode,\n        height = _this$props12.height,\n        itemHeight = _this$props12.itemHeight,\n        virtual = _this$props12.virtual,\n        titleRender = _this$props12.titleRender,\n        dropIndicatorRender = _this$props12.dropIndicatorRender,\n        onContextMenu = _this$props12.onContextMenu,\n        onScroll = _this$props12.onScroll,\n        direction = _this$props12.direction,\n        rootClassName = _this$props12.rootClassName,\n        rootStyle = _this$props12.rootStyle;\n      var domProps = pickAttrs(this.props, {\n        aria: true,\n        data: true\n      });\n\n      // It's better move to hooks but we just simply keep here\n      var draggableConfig;\n      if (draggable) {\n        if (_typeof(draggable) === 'object') {\n          draggableConfig = draggable;\n        } else if (typeof draggable === 'function') {\n          draggableConfig = {\n            nodeDraggable: draggable\n          };\n        } else {\n          draggableConfig = {};\n        }\n      }\n      return /*#__PURE__*/React.createElement(TreeContext.Provider, {\n        value: {\n          prefixCls: prefixCls,\n          selectable: selectable,\n          showIcon: showIcon,\n          icon: icon,\n          switcherIcon: switcherIcon,\n          draggable: draggableConfig,\n          draggingNodeKey: draggingNodeKey,\n          checkable: checkable,\n          checkStrictly: checkStrictly,\n          disabled: disabled,\n          keyEntities: keyEntities,\n          dropLevelOffset: dropLevelOffset,\n          dropContainerKey: dropContainerKey,\n          dropTargetKey: dropTargetKey,\n          dropPosition: dropPosition,\n          dragOverNodeKey: dragOverNodeKey,\n          indent: indent,\n          direction: direction,\n          dropIndicatorRender: dropIndicatorRender,\n          loadData: loadData,\n          filterTreeNode: filterTreeNode,\n          titleRender: titleRender,\n          onNodeClick: this.onNodeClick,\n          onNodeDoubleClick: this.onNodeDoubleClick,\n          onNodeExpand: this.onNodeExpand,\n          onNodeSelect: this.onNodeSelect,\n          onNodeCheck: this.onNodeCheck,\n          onNodeLoad: this.onNodeLoad,\n          onNodeMouseEnter: this.onNodeMouseEnter,\n          onNodeMouseLeave: this.onNodeMouseLeave,\n          onNodeContextMenu: this.onNodeContextMenu,\n          onNodeDragStart: this.onNodeDragStart,\n          onNodeDragEnter: this.onNodeDragEnter,\n          onNodeDragOver: this.onNodeDragOver,\n          onNodeDragLeave: this.onNodeDragLeave,\n          onNodeDragEnd: this.onNodeDragEnd,\n          onNodeDrop: this.onNodeDrop\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        role: \"tree\",\n        className: classNames(prefixCls, className, rootClassName, _defineProperty(_defineProperty(_defineProperty({}, \"\".concat(prefixCls, \"-show-line\"), showLine), \"\".concat(prefixCls, \"-focused\"), focused), \"\".concat(prefixCls, \"-active-focused\"), activeKey !== null)),\n        style: rootStyle\n      }, /*#__PURE__*/React.createElement(NodeList, _extends({\n        ref: this.listRef,\n        prefixCls: prefixCls,\n        style: style,\n        data: flattenNodes,\n        disabled: disabled,\n        selectable: selectable,\n        checkable: !!checkable,\n        motion: motion,\n        dragging: draggingNodeKey !== null,\n        height: height,\n        itemHeight: itemHeight,\n        virtual: virtual,\n        focusable: focusable,\n        focused: focused,\n        tabIndex: tabIndex,\n        activeItem: this.getActiveItem(),\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n        onKeyDown: this.onKeyDown,\n        onActiveChange: this.onActiveChange,\n        onListChangeStart: this.onListChangeStart,\n        onListChangeEnd: this.onListChangeEnd,\n        onContextMenu: onContextMenu,\n        onScroll: onScroll\n      }, this.getTreeNodeRequiredProps(), domProps))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, prevState) {\n      var prevProps = prevState.prevProps;\n      var newState = {\n        prevProps: props\n      };\n      function needSync(name) {\n        return !prevProps && name in props || prevProps && prevProps[name] !== props[name];\n      }\n\n      // ================== Tree Node ==================\n      var treeData;\n\n      // fieldNames\n      var fieldNames = prevState.fieldNames;\n      if (needSync('fieldNames')) {\n        fieldNames = fillFieldNames(props.fieldNames);\n        newState.fieldNames = fieldNames;\n      }\n\n      // Check if `treeData` or `children` changed and save into the state.\n      if (needSync('treeData')) {\n        treeData = props.treeData;\n      } else if (needSync('children')) {\n        warning(false, '`children` of Tree is deprecated. Please use `treeData` instead.');\n        treeData = convertTreeToData(props.children);\n      }\n\n      // Save flatten nodes info and convert `treeData` into keyEntities\n      if (treeData) {\n        newState.treeData = treeData;\n        var entitiesMap = convertDataToEntities(treeData, {\n          fieldNames: fieldNames\n        });\n        newState.keyEntities = _objectSpread(_defineProperty({}, MOTION_KEY, MotionEntity), entitiesMap.keyEntities);\n\n        // Warning if treeNode not provide key\n        if (process.env.NODE_ENV !== 'production') {\n          warningWithoutKey(treeData, fieldNames);\n        }\n      }\n      var keyEntities = newState.keyEntities || prevState.keyEntities;\n\n      // ================ expandedKeys =================\n      if (needSync('expandedKeys') || prevProps && needSync('autoExpandParent')) {\n        newState.expandedKeys = props.autoExpandParent || !prevProps && props.defaultExpandParent ? conductExpandParent(props.expandedKeys, keyEntities) : props.expandedKeys;\n      } else if (!prevProps && props.defaultExpandAll) {\n        var cloneKeyEntities = _objectSpread({}, keyEntities);\n        delete cloneKeyEntities[MOTION_KEY];\n        newState.expandedKeys = Object.keys(cloneKeyEntities).map(function (key) {\n          return cloneKeyEntities[key].key;\n        });\n      } else if (!prevProps && props.defaultExpandedKeys) {\n        newState.expandedKeys = props.autoExpandParent || props.defaultExpandParent ? conductExpandParent(props.defaultExpandedKeys, keyEntities) : props.defaultExpandedKeys;\n      }\n      if (!newState.expandedKeys) {\n        delete newState.expandedKeys;\n      }\n\n      // ================ flattenNodes =================\n      if (treeData || newState.expandedKeys) {\n        var flattenNodes = flattenTreeData(treeData || prevState.treeData, newState.expandedKeys || prevState.expandedKeys, fieldNames);\n        newState.flattenNodes = flattenNodes;\n      }\n\n      // ================ selectedKeys =================\n      if (props.selectable) {\n        if (needSync('selectedKeys')) {\n          newState.selectedKeys = calcSelectedKeys(props.selectedKeys, props);\n        } else if (!prevProps && props.defaultSelectedKeys) {\n          newState.selectedKeys = calcSelectedKeys(props.defaultSelectedKeys, props);\n        }\n      }\n\n      // ================= checkedKeys =================\n      if (props.checkable) {\n        var checkedKeyEntity;\n        if (needSync('checkedKeys')) {\n          checkedKeyEntity = parseCheckedKeys(props.checkedKeys) || {};\n        } else if (!prevProps && props.defaultCheckedKeys) {\n          checkedKeyEntity = parseCheckedKeys(props.defaultCheckedKeys) || {};\n        } else if (treeData) {\n          // If `treeData` changed, we also need check it\n          checkedKeyEntity = parseCheckedKeys(props.checkedKeys) || {\n            checkedKeys: prevState.checkedKeys,\n            halfCheckedKeys: prevState.halfCheckedKeys\n          };\n        }\n        if (checkedKeyEntity) {\n          var _checkedKeyEntity = checkedKeyEntity,\n            _checkedKeyEntity$che = _checkedKeyEntity.checkedKeys,\n            checkedKeys = _checkedKeyEntity$che === void 0 ? [] : _checkedKeyEntity$che,\n            _checkedKeyEntity$hal = _checkedKeyEntity.halfCheckedKeys,\n            halfCheckedKeys = _checkedKeyEntity$hal === void 0 ? [] : _checkedKeyEntity$hal;\n          if (!props.checkStrictly) {\n            var conductKeys = conductCheck(checkedKeys, true, keyEntities);\n            checkedKeys = conductKeys.checkedKeys;\n            halfCheckedKeys = conductKeys.halfCheckedKeys;\n          }\n          newState.checkedKeys = checkedKeys;\n          newState.halfCheckedKeys = halfCheckedKeys;\n        }\n      }\n\n      // ================= loadedKeys ==================\n      if (needSync('loadedKeys')) {\n        newState.loadedKeys = props.loadedKeys;\n      }\n      return newState;\n    }\n  }]);\n  return Tree;\n}(React.Component);\n_defineProperty(Tree, \"defaultProps\", {\n  prefixCls: 'rc-tree',\n  showLine: false,\n  showIcon: true,\n  selectable: true,\n  multiple: false,\n  checkable: false,\n  disabled: false,\n  checkStrictly: false,\n  draggable: false,\n  defaultExpandParent: true,\n  autoExpandParent: false,\n  defaultExpandAll: false,\n  defaultExpandedKeys: [],\n  defaultCheckedKeys: [],\n  defaultSelectedKeys: [],\n  dropIndicatorRender: DropIndicator,\n  allowDrop: function allowDrop() {\n    return true;\n  },\n  expandAction: false\n});\n_defineProperty(Tree, \"TreeNode\", TreeNode);\nexport default Tree;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}