{"ast":null,"code":"import _objectSpread from\"@babel/runtime/helpers/esm/objectSpread2\";import _typeof from\"@babel/runtime/helpers/esm/typeof\";import findDOMNode from\"rc-util/es/Dom/findDOMNode\";import{supportRef,useComposeRef}from\"rc-util/es/ref\";import*as React from'react';import{CollectionContext}from\"../Collection\";import{observe,unobserve}from\"../utils/observerUtil\";import DomWrapper from\"./DomWrapper\";function SingleObserver(props,ref){var children=props.children,disabled=props.disabled;var elementRef=React.useRef(null);var wrapperRef=React.useRef(null);var onCollectionResize=React.useContext(CollectionContext);// =========================== Children ===========================\nvar isRenderProps=typeof children==='function';var mergedChildren=isRenderProps?children(elementRef):children;// ============================= Size =============================\nvar sizeRef=React.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1});// ============================= Ref ==============================\nvar canRef=!isRenderProps&&/*#__PURE__*/React.isValidElement(mergedChildren)&&supportRef(mergedChildren);var originRef=canRef?mergedChildren.ref:null;var mergedRef=useComposeRef(originRef,elementRef);var getDom=function getDom(){var _elementRef$current;return findDOMNode(elementRef.current)||(// Support `nativeElement` format\nelementRef.current&&_typeof(elementRef.current)==='object'?findDOMNode((_elementRef$current=elementRef.current)===null||_elementRef$current===void 0?void 0:_elementRef$current.nativeElement):null)||findDOMNode(wrapperRef.current);};React.useImperativeHandle(ref,function(){return getDom();});// =========================== Observe ============================\nvar propsRef=React.useRef(props);propsRef.current=props;// Handler\nvar onInternalResize=React.useCallback(function(target){var _propsRef$current=propsRef.current,onResize=_propsRef$current.onResize,data=_propsRef$current.data;var _target$getBoundingCl=target.getBoundingClientRect(),width=_target$getBoundingCl.width,height=_target$getBoundingCl.height;var offsetWidth=target.offsetWidth,offsetHeight=target.offsetHeight;/**\n     * Resize observer trigger when content size changed.\n     * In most case we just care about element size,\n     * let's use `boundary` instead of `contentRect` here to avoid shaking.\n     */var fixedWidth=Math.floor(width);var fixedHeight=Math.floor(height);if(sizeRef.current.width!==fixedWidth||sizeRef.current.height!==fixedHeight||sizeRef.current.offsetWidth!==offsetWidth||sizeRef.current.offsetHeight!==offsetHeight){var size={width:fixedWidth,height:fixedHeight,offsetWidth:offsetWidth,offsetHeight:offsetHeight};sizeRef.current=size;// IE is strange, right?\nvar mergedOffsetWidth=offsetWidth===Math.round(width)?width:offsetWidth;var mergedOffsetHeight=offsetHeight===Math.round(height)?height:offsetHeight;var sizeInfo=_objectSpread(_objectSpread({},size),{},{offsetWidth:mergedOffsetWidth,offsetHeight:mergedOffsetHeight});// Let collection know what happened\nonCollectionResize===null||onCollectionResize===void 0||onCollectionResize(sizeInfo,target,data);if(onResize){// defer the callback but not defer to next frame\nPromise.resolve().then(function(){onResize(sizeInfo,target);});}}},[]);// Dynamic observe\nReact.useEffect(function(){var currentElement=getDom();if(currentElement&&!disabled){observe(currentElement,onInternalResize);}return function(){return unobserve(currentElement,onInternalResize);};},[elementRef.current,disabled]);// ============================ Render ============================\nreturn/*#__PURE__*/React.createElement(DomWrapper,{ref:wrapperRef},canRef?/*#__PURE__*/React.cloneElement(mergedChildren,{ref:mergedRef}):mergedChildren);}var RefSingleObserver=/*#__PURE__*/React.forwardRef(SingleObserver);if(process.env.NODE_ENV!=='production'){RefSingleObserver.displayName='SingleObserver';}export default RefSingleObserver;","map":{"version":3,"names":["_objectSpread","_typeof","findDOMNode","supportRef","useComposeRef","React","CollectionContext","observe","unobserve","DomWrapper","SingleObserver","props","ref","children","disabled","elementRef","useRef","wrapperRef","onCollectionResize","useContext","isRenderProps","mergedChildren","sizeRef","width","height","offsetWidth","offsetHeight","canRef","isValidElement","originRef","mergedRef","getDom","_elementRef$current","current","nativeElement","useImperativeHandle","propsRef","onInternalResize","useCallback","target","_propsRef$current","onResize","data","_target$getBoundingCl","getBoundingClientRect","fixedWidth","Math","floor","fixedHeight","size","mergedOffsetWidth","round","mergedOffsetHeight","sizeInfo","Promise","resolve","then","useEffect","currentElement","createElement","cloneElement","RefSingleObserver","forwardRef","process","env","NODE_ENV","displayName"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-resize-observer/es/SingleObserver/index.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport findDOMNode from \"rc-util/es/Dom/findDOMNode\";\nimport { supportRef, useComposeRef } from \"rc-util/es/ref\";\nimport * as React from 'react';\nimport { CollectionContext } from \"../Collection\";\nimport { observe, unobserve } from \"../utils/observerUtil\";\nimport DomWrapper from \"./DomWrapper\";\nfunction SingleObserver(props, ref) {\n  var children = props.children,\n    disabled = props.disabled;\n  var elementRef = React.useRef(null);\n  var wrapperRef = React.useRef(null);\n  var onCollectionResize = React.useContext(CollectionContext);\n\n  // =========================== Children ===========================\n  var isRenderProps = typeof children === 'function';\n  var mergedChildren = isRenderProps ? children(elementRef) : children;\n\n  // ============================= Size =============================\n  var sizeRef = React.useRef({\n    width: -1,\n    height: -1,\n    offsetWidth: -1,\n    offsetHeight: -1\n  });\n\n  // ============================= Ref ==============================\n  var canRef = !isRenderProps && /*#__PURE__*/React.isValidElement(mergedChildren) && supportRef(mergedChildren);\n  var originRef = canRef ? mergedChildren.ref : null;\n  var mergedRef = useComposeRef(originRef, elementRef);\n  var getDom = function getDom() {\n    var _elementRef$current;\n    return findDOMNode(elementRef.current) || (\n    // Support `nativeElement` format\n    elementRef.current && _typeof(elementRef.current) === 'object' ? findDOMNode((_elementRef$current = elementRef.current) === null || _elementRef$current === void 0 ? void 0 : _elementRef$current.nativeElement) : null) || findDOMNode(wrapperRef.current);\n  };\n  React.useImperativeHandle(ref, function () {\n    return getDom();\n  });\n\n  // =========================== Observe ============================\n  var propsRef = React.useRef(props);\n  propsRef.current = props;\n\n  // Handler\n  var onInternalResize = React.useCallback(function (target) {\n    var _propsRef$current = propsRef.current,\n      onResize = _propsRef$current.onResize,\n      data = _propsRef$current.data;\n    var _target$getBoundingCl = target.getBoundingClientRect(),\n      width = _target$getBoundingCl.width,\n      height = _target$getBoundingCl.height;\n    var offsetWidth = target.offsetWidth,\n      offsetHeight = target.offsetHeight;\n\n    /**\n     * Resize observer trigger when content size changed.\n     * In most case we just care about element size,\n     * let's use `boundary` instead of `contentRect` here to avoid shaking.\n     */\n    var fixedWidth = Math.floor(width);\n    var fixedHeight = Math.floor(height);\n    if (sizeRef.current.width !== fixedWidth || sizeRef.current.height !== fixedHeight || sizeRef.current.offsetWidth !== offsetWidth || sizeRef.current.offsetHeight !== offsetHeight) {\n      var size = {\n        width: fixedWidth,\n        height: fixedHeight,\n        offsetWidth: offsetWidth,\n        offsetHeight: offsetHeight\n      };\n      sizeRef.current = size;\n\n      // IE is strange, right?\n      var mergedOffsetWidth = offsetWidth === Math.round(width) ? width : offsetWidth;\n      var mergedOffsetHeight = offsetHeight === Math.round(height) ? height : offsetHeight;\n      var sizeInfo = _objectSpread(_objectSpread({}, size), {}, {\n        offsetWidth: mergedOffsetWidth,\n        offsetHeight: mergedOffsetHeight\n      });\n\n      // Let collection know what happened\n      onCollectionResize === null || onCollectionResize === void 0 || onCollectionResize(sizeInfo, target, data);\n      if (onResize) {\n        // defer the callback but not defer to next frame\n        Promise.resolve().then(function () {\n          onResize(sizeInfo, target);\n        });\n      }\n    }\n  }, []);\n\n  // Dynamic observe\n  React.useEffect(function () {\n    var currentElement = getDom();\n    if (currentElement && !disabled) {\n      observe(currentElement, onInternalResize);\n    }\n    return function () {\n      return unobserve(currentElement, onInternalResize);\n    };\n  }, [elementRef.current, disabled]);\n\n  // ============================ Render ============================\n  return /*#__PURE__*/React.createElement(DomWrapper, {\n    ref: wrapperRef\n  }, canRef ? /*#__PURE__*/React.cloneElement(mergedChildren, {\n    ref: mergedRef\n  }) : mergedChildren);\n}\nvar RefSingleObserver = /*#__PURE__*/React.forwardRef(SingleObserver);\nif (process.env.NODE_ENV !== 'production') {\n  RefSingleObserver.displayName = 'SingleObserver';\n}\nexport default RefSingleObserver;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}