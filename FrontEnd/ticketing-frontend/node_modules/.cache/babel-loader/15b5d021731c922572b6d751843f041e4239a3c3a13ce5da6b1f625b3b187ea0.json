{"ast":null,"code":"import{useRef}from'react';import raf from\"rc-util/es/raf\";import isFF from\"../utils/isFirefox\";import useOriginScroll from\"./useOriginScroll\";export default function useFrameWheel(inVirtual,isScrollAtTop,isScrollAtBottom,horizontalScroll,/***\n * Return `true` when you need to prevent default event\n */onWheelDelta){var offsetRef=useRef(0);var nextFrameRef=useRef(null);// Firefox patch\nvar wheelValueRef=useRef(null);var isMouseScrollRef=useRef(false);// Scroll status sync\nvar originScroll=useOriginScroll(isScrollAtTop,isScrollAtBottom);function onWheelY(event,deltaY){raf.cancel(nextFrameRef.current);offsetRef.current+=deltaY;wheelValueRef.current=deltaY;// Do nothing when scroll at the edge, Skip check when is in scroll\nif(originScroll(deltaY))return;// Proxy of scroll events\nif(!isFF){event.preventDefault();}nextFrameRef.current=raf(function(){// Patch a multiple for Firefox to fix wheel number too small\n// ref: https://github.com/ant-design/ant-design/issues/26372#issuecomment-679460266\nvar patchMultiple=isMouseScrollRef.current?10:1;onWheelDelta(offsetRef.current*patchMultiple);offsetRef.current=0;});}function onWheelX(event,deltaX){onWheelDelta(deltaX,true);if(!isFF){event.preventDefault();}}// Check for which direction does wheel do. `sx` means `shift + wheel`\nvar wheelDirectionRef=useRef(null);var wheelDirectionCleanRef=useRef(null);function onWheel(event){if(!inVirtual)return;// Wait for 2 frame to clean direction\nraf.cancel(wheelDirectionCleanRef.current);wheelDirectionCleanRef.current=raf(function(){wheelDirectionRef.current=null;},2);var deltaX=event.deltaX,deltaY=event.deltaY,shiftKey=event.shiftKey;var mergedDeltaX=deltaX;var mergedDeltaY=deltaY;if(wheelDirectionRef.current==='sx'||!wheelDirectionRef.current&&(shiftKey||false)&&deltaY&&!deltaX){mergedDeltaX=deltaY;mergedDeltaY=0;wheelDirectionRef.current='sx';}var absX=Math.abs(mergedDeltaX);var absY=Math.abs(mergedDeltaY);if(wheelDirectionRef.current===null){wheelDirectionRef.current=horizontalScroll&&absX>absY?'x':'y';}if(wheelDirectionRef.current==='y'){onWheelY(event,mergedDeltaY);}else{onWheelX(event,mergedDeltaX);}}// A patch for firefox\nfunction onFireFoxScroll(event){if(!inVirtual)return;isMouseScrollRef.current=event.detail===wheelValueRef.current;}return[onWheel,onFireFoxScroll];}","map":{"version":3,"names":["useRef","raf","isFF","useOriginScroll","useFrameWheel","inVirtual","isScrollAtTop","isScrollAtBottom","horizontalScroll","onWheelDelta","offsetRef","nextFrameRef","wheelValueRef","isMouseScrollRef","originScroll","onWheelY","event","deltaY","cancel","current","preventDefault","patchMultiple","onWheelX","deltaX","wheelDirectionRef","wheelDirectionCleanRef","onWheel","shiftKey","mergedDeltaX","mergedDeltaY","absX","Math","abs","absY","onFireFoxScroll","detail"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-virtual-list/es/hooks/useFrameWheel.js"],"sourcesContent":["import { useRef } from 'react';\nimport raf from \"rc-util/es/raf\";\nimport isFF from \"../utils/isFirefox\";\nimport useOriginScroll from \"./useOriginScroll\";\nexport default function useFrameWheel(inVirtual, isScrollAtTop, isScrollAtBottom, horizontalScroll,\n/***\n * Return `true` when you need to prevent default event\n */\nonWheelDelta) {\n  var offsetRef = useRef(0);\n  var nextFrameRef = useRef(null);\n\n  // Firefox patch\n  var wheelValueRef = useRef(null);\n  var isMouseScrollRef = useRef(false);\n\n  // Scroll status sync\n  var originScroll = useOriginScroll(isScrollAtTop, isScrollAtBottom);\n  function onWheelY(event, deltaY) {\n    raf.cancel(nextFrameRef.current);\n    offsetRef.current += deltaY;\n    wheelValueRef.current = deltaY;\n\n    // Do nothing when scroll at the edge, Skip check when is in scroll\n    if (originScroll(deltaY)) return;\n\n    // Proxy of scroll events\n    if (!isFF) {\n      event.preventDefault();\n    }\n    nextFrameRef.current = raf(function () {\n      // Patch a multiple for Firefox to fix wheel number too small\n      // ref: https://github.com/ant-design/ant-design/issues/26372#issuecomment-679460266\n      var patchMultiple = isMouseScrollRef.current ? 10 : 1;\n      onWheelDelta(offsetRef.current * patchMultiple);\n      offsetRef.current = 0;\n    });\n  }\n  function onWheelX(event, deltaX) {\n    onWheelDelta(deltaX, true);\n    if (!isFF) {\n      event.preventDefault();\n    }\n  }\n\n  // Check for which direction does wheel do. `sx` means `shift + wheel`\n  var wheelDirectionRef = useRef(null);\n  var wheelDirectionCleanRef = useRef(null);\n  function onWheel(event) {\n    if (!inVirtual) return;\n\n    // Wait for 2 frame to clean direction\n    raf.cancel(wheelDirectionCleanRef.current);\n    wheelDirectionCleanRef.current = raf(function () {\n      wheelDirectionRef.current = null;\n    }, 2);\n    var deltaX = event.deltaX,\n      deltaY = event.deltaY,\n      shiftKey = event.shiftKey;\n    var mergedDeltaX = deltaX;\n    var mergedDeltaY = deltaY;\n    if (wheelDirectionRef.current === 'sx' || !wheelDirectionRef.current && (shiftKey || false) && deltaY && !deltaX) {\n      mergedDeltaX = deltaY;\n      mergedDeltaY = 0;\n      wheelDirectionRef.current = 'sx';\n    }\n    var absX = Math.abs(mergedDeltaX);\n    var absY = Math.abs(mergedDeltaY);\n    if (wheelDirectionRef.current === null) {\n      wheelDirectionRef.current = horizontalScroll && absX > absY ? 'x' : 'y';\n    }\n    if (wheelDirectionRef.current === 'y') {\n      onWheelY(event, mergedDeltaY);\n    } else {\n      onWheelX(event, mergedDeltaX);\n    }\n  }\n\n  // A patch for firefox\n  function onFireFoxScroll(event) {\n    if (!inVirtual) return;\n    isMouseScrollRef.current = event.detail === wheelValueRef.current;\n  }\n  return [onWheel, onFireFoxScroll];\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}