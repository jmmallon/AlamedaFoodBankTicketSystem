{"ast":null,"code":"import{useEvent}from'rc-util';import raf from\"rc-util/es/raf\";import isVisible from\"rc-util/es/Dom/isVisible\";import*as React from'react';var SPEED_PTG=1/3;export default function useScrollTo(ulRef,value){// ========================= Scroll =========================\nvar scrollingRef=React.useRef(false);var scrollRafRef=React.useRef(null);var scrollDistRef=React.useRef(null);var isScrolling=function isScrolling(){return scrollingRef.current;};var stopScroll=function stopScroll(){raf.cancel(scrollRafRef.current);scrollingRef.current=false;};var scrollRafTimesRef=React.useRef();var startScroll=function startScroll(){var ul=ulRef.current;scrollDistRef.current=null;scrollRafTimesRef.current=0;if(ul){var targetLi=ul.querySelector(\"[data-value=\\\"\".concat(value,\"\\\"]\"));var firstLi=ul.querySelector(\"li\");var doScroll=function doScroll(){stopScroll();scrollingRef.current=true;scrollRafTimesRef.current+=1;var currentTop=ul.scrollTop;var firstLiTop=firstLi.offsetTop;var targetLiTop=targetLi.offsetTop;var targetTop=targetLiTop-firstLiTop;// Wait for element exist. 5 frames is enough\nif(targetLiTop===0&&targetLi!==firstLi||!isVisible(ul)){if(scrollRafTimesRef.current<=5){scrollRafRef.current=raf(doScroll);}return;}var nextTop=currentTop+(targetTop-currentTop)*SPEED_PTG;var dist=Math.abs(targetTop-nextTop);// Break if dist get larger, which means user is scrolling\nif(scrollDistRef.current!==null&&scrollDistRef.current<dist){stopScroll();return;}scrollDistRef.current=dist;// Stop when dist is less than 1\nif(dist<=1){ul.scrollTop=targetTop;stopScroll();return;}// IE not support `scrollTo`\nul.scrollTop=nextTop;scrollRafRef.current=raf(doScroll);};if(targetLi&&firstLi){doScroll();}}};// ======================== Trigger =========================\nvar syncScroll=useEvent(startScroll);return[syncScroll,stopScroll,isScrolling];}","map":{"version":3,"names":["useEvent","raf","isVisible","React","SPEED_PTG","useScrollTo","ulRef","value","scrollingRef","useRef","scrollRafRef","scrollDistRef","isScrolling","current","stopScroll","cancel","scrollRafTimesRef","startScroll","ul","targetLi","querySelector","concat","firstLi","doScroll","currentTop","scrollTop","firstLiTop","offsetTop","targetLiTop","targetTop","nextTop","dist","Math","abs","syncScroll"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-picker/es/PickerPanel/TimePanel/TimePanelBody/useScrollTo.js"],"sourcesContent":["import { useEvent } from 'rc-util';\nimport raf from \"rc-util/es/raf\";\nimport isVisible from \"rc-util/es/Dom/isVisible\";\nimport * as React from 'react';\nvar SPEED_PTG = 1 / 3;\nexport default function useScrollTo(ulRef, value) {\n  // ========================= Scroll =========================\n  var scrollingRef = React.useRef(false);\n  var scrollRafRef = React.useRef(null);\n  var scrollDistRef = React.useRef(null);\n  var isScrolling = function isScrolling() {\n    return scrollingRef.current;\n  };\n  var stopScroll = function stopScroll() {\n    raf.cancel(scrollRafRef.current);\n    scrollingRef.current = false;\n  };\n  var scrollRafTimesRef = React.useRef();\n  var startScroll = function startScroll() {\n    var ul = ulRef.current;\n    scrollDistRef.current = null;\n    scrollRafTimesRef.current = 0;\n    if (ul) {\n      var targetLi = ul.querySelector(\"[data-value=\\\"\".concat(value, \"\\\"]\"));\n      var firstLi = ul.querySelector(\"li\");\n      var doScroll = function doScroll() {\n        stopScroll();\n        scrollingRef.current = true;\n        scrollRafTimesRef.current += 1;\n        var currentTop = ul.scrollTop;\n        var firstLiTop = firstLi.offsetTop;\n        var targetLiTop = targetLi.offsetTop;\n        var targetTop = targetLiTop - firstLiTop;\n\n        // Wait for element exist. 5 frames is enough\n        if (targetLiTop === 0 && targetLi !== firstLi || !isVisible(ul)) {\n          if (scrollRafTimesRef.current <= 5) {\n            scrollRafRef.current = raf(doScroll);\n          }\n          return;\n        }\n        var nextTop = currentTop + (targetTop - currentTop) * SPEED_PTG;\n        var dist = Math.abs(targetTop - nextTop);\n\n        // Break if dist get larger, which means user is scrolling\n        if (scrollDistRef.current !== null && scrollDistRef.current < dist) {\n          stopScroll();\n          return;\n        }\n        scrollDistRef.current = dist;\n\n        // Stop when dist is less than 1\n        if (dist <= 1) {\n          ul.scrollTop = targetTop;\n          stopScroll();\n          return;\n        }\n\n        // IE not support `scrollTo`\n        ul.scrollTop = nextTop;\n        scrollRafRef.current = raf(doScroll);\n      };\n      if (targetLi && firstLi) {\n        doScroll();\n      }\n    }\n  };\n\n  // ======================== Trigger =========================\n  var syncScroll = useEvent(startScroll);\n  return [syncScroll, stopScroll, isScrolling];\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}