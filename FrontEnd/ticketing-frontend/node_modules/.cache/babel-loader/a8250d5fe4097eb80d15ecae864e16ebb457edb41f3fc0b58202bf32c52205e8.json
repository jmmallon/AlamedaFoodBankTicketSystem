{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import useEvent from\"./useEvent\";import{useLayoutUpdateEffect}from\"./useLayoutEffect\";import useState from\"./useState\";/** We only think `undefined` is empty */function hasValue(value){return value!==undefined;}/**\n * Similar to `useState` but will use props value if provided.\n * Note that internal use rc-util `useState` hook.\n */export default function useMergedState(defaultStateValue,option){var _ref=option||{},defaultValue=_ref.defaultValue,value=_ref.value,onChange=_ref.onChange,postState=_ref.postState;// ======================= Init =======================\nvar _useState=useState(function(){if(hasValue(value)){return value;}else if(hasValue(defaultValue)){return typeof defaultValue==='function'?defaultValue():defaultValue;}else{return typeof defaultStateValue==='function'?defaultStateValue():defaultStateValue;}}),_useState2=_slicedToArray(_useState,2),innerValue=_useState2[0],setInnerValue=_useState2[1];var mergedValue=value!==undefined?value:innerValue;var postMergedValue=postState?postState(mergedValue):mergedValue;// ====================== Change ======================\nvar onChangeFn=useEvent(onChange);var _useState3=useState([mergedValue]),_useState4=_slicedToArray(_useState3,2),prevValue=_useState4[0],setPrevValue=_useState4[1];useLayoutUpdateEffect(function(){var prev=prevValue[0];if(innerValue!==prev){onChangeFn(innerValue,prev);}},[prevValue]);// Sync value back to `undefined` when it from control to un-control\nuseLayoutUpdateEffect(function(){if(!hasValue(value)){setInnerValue(value);}},[value]);// ====================== Update ======================\nvar triggerChange=useEvent(function(updater,ignoreDestroy){setInnerValue(updater,ignoreDestroy);setPrevValue([mergedValue],ignoreDestroy);});return[postMergedValue,triggerChange];}","map":{"version":3,"names":["_slicedToArray","useEvent","useLayoutUpdateEffect","useState","hasValue","value","undefined","useMergedState","defaultStateValue","option","_ref","defaultValue","onChange","postState","_useState","_useState2","innerValue","setInnerValue","mergedValue","postMergedValue","onChangeFn","_useState3","_useState4","prevValue","setPrevValue","prev","triggerChange","updater","ignoreDestroy"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-util/es/hooks/useMergedState.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport useEvent from \"./useEvent\";\nimport { useLayoutUpdateEffect } from \"./useLayoutEffect\";\nimport useState from \"./useState\";\n/** We only think `undefined` is empty */\nfunction hasValue(value) {\n  return value !== undefined;\n}\n\n/**\n * Similar to `useState` but will use props value if provided.\n * Note that internal use rc-util `useState` hook.\n */\nexport default function useMergedState(defaultStateValue, option) {\n  var _ref = option || {},\n    defaultValue = _ref.defaultValue,\n    value = _ref.value,\n    onChange = _ref.onChange,\n    postState = _ref.postState;\n\n  // ======================= Init =======================\n  var _useState = useState(function () {\n      if (hasValue(value)) {\n        return value;\n      } else if (hasValue(defaultValue)) {\n        return typeof defaultValue === 'function' ? defaultValue() : defaultValue;\n      } else {\n        return typeof defaultStateValue === 'function' ? defaultStateValue() : defaultStateValue;\n      }\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    innerValue = _useState2[0],\n    setInnerValue = _useState2[1];\n  var mergedValue = value !== undefined ? value : innerValue;\n  var postMergedValue = postState ? postState(mergedValue) : mergedValue;\n\n  // ====================== Change ======================\n  var onChangeFn = useEvent(onChange);\n  var _useState3 = useState([mergedValue]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    prevValue = _useState4[0],\n    setPrevValue = _useState4[1];\n  useLayoutUpdateEffect(function () {\n    var prev = prevValue[0];\n    if (innerValue !== prev) {\n      onChangeFn(innerValue, prev);\n    }\n  }, [prevValue]);\n\n  // Sync value back to `undefined` when it from control to un-control\n  useLayoutUpdateEffect(function () {\n    if (!hasValue(value)) {\n      setInnerValue(value);\n    }\n  }, [value]);\n\n  // ====================== Update ======================\n  var triggerChange = useEvent(function (updater, ignoreDestroy) {\n    setInnerValue(updater, ignoreDestroy);\n    setPrevValue([mergedValue], ignoreDestroy);\n  });\n  return [postMergedValue, triggerChange];\n}"],"mappings":"AAAA,MAAO,CAAAA,cAAc,KAAM,0CAA0C,CACrE,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,OAASC,qBAAqB,KAAQ,mBAAmB,CACzD,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,yCACA,QAAS,CAAAC,QAAQA,CAACC,KAAK,CAAE,CACvB,MAAO,CAAAA,KAAK,GAAKC,SAAS,CAC5B,CAEA;AACA;AACA;AACA,GACA,cAAe,SAAS,CAAAC,cAAcA,CAACC,iBAAiB,CAAEC,MAAM,CAAE,CAChE,GAAI,CAAAC,IAAI,CAAGD,MAAM,EAAI,CAAC,CAAC,CACrBE,YAAY,CAAGD,IAAI,CAACC,YAAY,CAChCN,KAAK,CAAGK,IAAI,CAACL,KAAK,CAClBO,QAAQ,CAAGF,IAAI,CAACE,QAAQ,CACxBC,SAAS,CAAGH,IAAI,CAACG,SAAS,CAE5B;AACA,GAAI,CAAAC,SAAS,CAAGX,QAAQ,CAAC,UAAY,CACjC,GAAIC,QAAQ,CAACC,KAAK,CAAC,CAAE,CACnB,MAAO,CAAAA,KAAK,CACd,CAAC,IAAM,IAAID,QAAQ,CAACO,YAAY,CAAC,CAAE,CACjC,MAAO,OAAO,CAAAA,YAAY,GAAK,UAAU,CAAGA,YAAY,CAAC,CAAC,CAAGA,YAAY,CAC3E,CAAC,IAAM,CACL,MAAO,OAAO,CAAAH,iBAAiB,GAAK,UAAU,CAAGA,iBAAiB,CAAC,CAAC,CAAGA,iBAAiB,CAC1F,CACF,CAAC,CAAC,CACFO,UAAU,CAAGf,cAAc,CAACc,SAAS,CAAE,CAAC,CAAC,CACzCE,UAAU,CAAGD,UAAU,CAAC,CAAC,CAAC,CAC1BE,aAAa,CAAGF,UAAU,CAAC,CAAC,CAAC,CAC/B,GAAI,CAAAG,WAAW,CAAGb,KAAK,GAAKC,SAAS,CAAGD,KAAK,CAAGW,UAAU,CAC1D,GAAI,CAAAG,eAAe,CAAGN,SAAS,CAAGA,SAAS,CAACK,WAAW,CAAC,CAAGA,WAAW,CAEtE;AACA,GAAI,CAAAE,UAAU,CAAGnB,QAAQ,CAACW,QAAQ,CAAC,CACnC,GAAI,CAAAS,UAAU,CAAGlB,QAAQ,CAAC,CAACe,WAAW,CAAC,CAAC,CACtCI,UAAU,CAAGtB,cAAc,CAACqB,UAAU,CAAE,CAAC,CAAC,CAC1CE,SAAS,CAAGD,UAAU,CAAC,CAAC,CAAC,CACzBE,YAAY,CAAGF,UAAU,CAAC,CAAC,CAAC,CAC9BpB,qBAAqB,CAAC,UAAY,CAChC,GAAI,CAAAuB,IAAI,CAAGF,SAAS,CAAC,CAAC,CAAC,CACvB,GAAIP,UAAU,GAAKS,IAAI,CAAE,CACvBL,UAAU,CAACJ,UAAU,CAAES,IAAI,CAAC,CAC9B,CACF,CAAC,CAAE,CAACF,SAAS,CAAC,CAAC,CAEf;AACArB,qBAAqB,CAAC,UAAY,CAChC,GAAI,CAACE,QAAQ,CAACC,KAAK,CAAC,CAAE,CACpBY,aAAa,CAACZ,KAAK,CAAC,CACtB,CACF,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAEX;AACA,GAAI,CAAAqB,aAAa,CAAGzB,QAAQ,CAAC,SAAU0B,OAAO,CAAEC,aAAa,CAAE,CAC7DX,aAAa,CAACU,OAAO,CAAEC,aAAa,CAAC,CACrCJ,YAAY,CAAC,CAACN,WAAW,CAAC,CAAEU,aAAa,CAAC,CAC5C,CAAC,CAAC,CACF,MAAO,CAACT,eAAe,CAAEO,aAAa,CAAC,CACzC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}