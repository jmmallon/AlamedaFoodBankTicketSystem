{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/esm/extends\";import _objectSpread from\"@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"prefixCls\",\"className\",\"style\",\"prefix\",\"split\",\"notFoundContent\",\"value\",\"defaultValue\",\"children\",\"options\",\"open\",\"allowClear\",\"validateSearch\",\"filterOption\",\"onChange\",\"onKeyDown\",\"onKeyUp\",\"onPressEnter\",\"onSearch\",\"onSelect\",\"onFocus\",\"onBlur\",\"transitionName\",\"placement\",\"direction\",\"getPopupContainer\",\"dropdownClassName\",\"rows\"],_excluded2=[\"suffix\",\"prefixCls\",\"defaultValue\",\"value\",\"allowClear\",\"onChange\",\"classNames\",\"className\",\"disabled\"];import classNames from'classnames';import{BaseInput}from'rc-input';import TextArea from'rc-textarea';import toArray from\"rc-util/es/Children/toArray\";import useMergedState from\"rc-util/es/hooks/useMergedState\";import KeyCode from\"rc-util/es/KeyCode\";import warning from\"rc-util/es/warning\";import React,{forwardRef,useEffect,useMemo,useRef,useState}from'react';import useEffectState from\"./hooks/useEffectState\";import KeywordTrigger from\"./KeywordTrigger\";import MentionsContext from\"./MentionsContext\";import Option from\"./Option\";import{filterOption as defaultFilterOption,getBeforeSelectionText,getLastMeasureIndex,replaceWithMeasure,setInputSelection,validateSearch as defaultValidateSearch}from\"./util\";var InternalMentions=/*#__PURE__*/forwardRef(function(props,ref){var prefixCls=props.prefixCls,className=props.className,style=props.style,_props$prefix=props.prefix,prefix=_props$prefix===void 0?'@':_props$prefix,_props$split=props.split,split=_props$split===void 0?' ':_props$split,_props$notFoundConten=props.notFoundContent,notFoundContent=_props$notFoundConten===void 0?'Not Found':_props$notFoundConten,value=props.value,defaultValue=props.defaultValue,children=props.children,options=props.options,open=props.open,allowClear=props.allowClear,_props$validateSearch=props.validateSearch,validateSearch=_props$validateSearch===void 0?defaultValidateSearch:_props$validateSearch,_props$filterOption=props.filterOption,filterOption=_props$filterOption===void 0?defaultFilterOption:_props$filterOption,onChange=props.onChange,onKeyDown=props.onKeyDown,onKeyUp=props.onKeyUp,onPressEnter=props.onPressEnter,onSearch=props.onSearch,onSelect=props.onSelect,onFocus=props.onFocus,onBlur=props.onBlur,transitionName=props.transitionName,placement=props.placement,direction=props.direction,getPopupContainer=props.getPopupContainer,dropdownClassName=props.dropdownClassName,_props$rows=props.rows,rows=_props$rows===void 0?1:_props$rows,restProps=_objectWithoutProperties(props,_excluded);var mergedPrefix=useMemo(function(){return Array.isArray(prefix)?prefix:[prefix];},[prefix]);// =============================== Refs ===============================\nvar textareaRef=useRef(null);var measureRef=useRef(null);var getTextArea=function getTextArea(){var _textareaRef$current;return(_textareaRef$current=textareaRef.current)===null||_textareaRef$current===void 0||(_textareaRef$current=_textareaRef$current.resizableTextArea)===null||_textareaRef$current===void 0?void 0:_textareaRef$current.textArea;};React.useImperativeHandle(ref,function(){var _textareaRef$current4;return{focus:function focus(){var _textareaRef$current2;return(_textareaRef$current2=textareaRef.current)===null||_textareaRef$current2===void 0?void 0:_textareaRef$current2.focus();},blur:function blur(){var _textareaRef$current3;return(_textareaRef$current3=textareaRef.current)===null||_textareaRef$current3===void 0?void 0:_textareaRef$current3.blur();},textarea:(_textareaRef$current4=textareaRef.current)===null||_textareaRef$current4===void 0||(_textareaRef$current4=_textareaRef$current4.resizableTextArea)===null||_textareaRef$current4===void 0?void 0:_textareaRef$current4.textArea};});// ============================== State ===============================\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),measuring=_useState2[0],setMeasuring=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),measureText=_useState4[0],setMeasureText=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),measurePrefix=_useState6[0],setMeasurePrefix=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),measureLocation=_useState8[0],setMeasureLocation=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),activeIndex=_useState10[0],setActiveIndex=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isFocus=_useState12[0],setIsFocus=_useState12[1];// ============================== Value ===============================\nvar _useMergedState=useMergedState('',{defaultValue:defaultValue,value:value}),_useMergedState2=_slicedToArray(_useMergedState,2),mergedValue=_useMergedState2[0],setMergedValue=_useMergedState2[1];// =============================== Open ===============================\nuseEffect(function(){// Sync measure div top with textarea for rc-trigger usage\nif(measuring&&measureRef.current){measureRef.current.scrollTop=getTextArea().scrollTop;}},[measuring]);var _React$useMemo=React.useMemo(function(){if(open){if(process.env.NODE_ENV!=='production'){warning(false,'`open` of Mentions is only used for debug usage. Do not use in you production.');}for(var i=0;i<mergedPrefix.length;i+=1){var curPrefix=mergedPrefix[i];var index=mergedValue.lastIndexOf(curPrefix);if(index>=0){return[true,'',curPrefix,index];}}}return[measuring,measureText,measurePrefix,measureLocation];},[open,measuring,mergedPrefix,mergedValue,measureText,measurePrefix,measureLocation]),_React$useMemo2=_slicedToArray(_React$useMemo,4),mergedMeasuring=_React$useMemo2[0],mergedMeasureText=_React$useMemo2[1],mergedMeasurePrefix=_React$useMemo2[2],mergedMeasureLocation=_React$useMemo2[3];// ============================== Option ==============================\nvar getOptions=React.useCallback(function(targetMeasureText){var list;if(options&&options.length>0){list=options.map(function(item){var _item$key;return _objectSpread(_objectSpread({},item),{},{key:(_item$key=item===null||item===void 0?void 0:item.key)!==null&&_item$key!==void 0?_item$key:item.value});});}else{list=toArray(children).map(function(_ref){var optionProps=_ref.props,key=_ref.key;return _objectSpread(_objectSpread({},optionProps),{},{label:optionProps.children,key:key||optionProps.value});});}return list.filter(function(option){/** Return all result if `filterOption` is false. */if(filterOption===false){return true;}return filterOption(targetMeasureText,option);});},[children,options,filterOption]);var mergedOptions=React.useMemo(function(){return getOptions(mergedMeasureText);},[getOptions,mergedMeasureText]);// ============================= Measure ==============================\n// Mark that we will reset input selection to target position when user select option\nvar onSelectionEffect=useEffectState();var startMeasure=function startMeasure(nextMeasureText,nextMeasurePrefix,nextMeasureLocation){setMeasuring(true);setMeasureText(nextMeasureText);setMeasurePrefix(nextMeasurePrefix);setMeasureLocation(nextMeasureLocation);setActiveIndex(0);};var stopMeasure=function stopMeasure(callback){setMeasuring(false);setMeasureLocation(0);setMeasureText('');onSelectionEffect(callback);};// ============================== Change ==============================\nvar triggerChange=function triggerChange(nextValue){setMergedValue(nextValue);onChange===null||onChange===void 0||onChange(nextValue);};var onInternalChange=function onInternalChange(_ref2){var nextValue=_ref2.target.value;triggerChange(nextValue);};var selectOption=function selectOption(option){var _getTextArea;var _option$value=option.value,mentionValue=_option$value===void 0?'':_option$value;var _replaceWithMeasure=replaceWithMeasure(mergedValue,{measureLocation:mergedMeasureLocation,targetText:mentionValue,prefix:mergedMeasurePrefix,selectionStart:(_getTextArea=getTextArea())===null||_getTextArea===void 0?void 0:_getTextArea.selectionStart,split:split}),text=_replaceWithMeasure.text,selectionLocation=_replaceWithMeasure.selectionLocation;triggerChange(text);stopMeasure(function(){// We need restore the selection position\nsetInputSelection(getTextArea(),selectionLocation);});onSelect===null||onSelect===void 0||onSelect(option,mergedMeasurePrefix);};// ============================= KeyEvent =============================\n// Check if hit the measure keyword\nvar onInternalKeyDown=function onInternalKeyDown(event){var which=event.which;onKeyDown===null||onKeyDown===void 0||onKeyDown(event);// Skip if not measuring\nif(!mergedMeasuring){return;}if(which===KeyCode.UP||which===KeyCode.DOWN){// Control arrow function\nvar optionLen=mergedOptions.length;var offset=which===KeyCode.UP?-1:1;var newActiveIndex=(activeIndex+offset+optionLen)%optionLen;setActiveIndex(newActiveIndex);event.preventDefault();}else if(which===KeyCode.ESC){stopMeasure();}else if(which===KeyCode.ENTER){// Measure hit\nevent.preventDefault();if(!mergedOptions.length){stopMeasure();return;}var _option=mergedOptions[activeIndex];selectOption(_option);}};/**\n   * When to start measure:\n   * 1. When user press `prefix`\n   * 2. When measureText !== prevMeasureText\n   *  - If measure hit\n   *  - If measuring\n   *\n   * When to stop measure:\n   * 1. Selection is out of range\n   * 2. Contains `space`\n   * 3. ESC or select one\n   */var onInternalKeyUp=function onInternalKeyUp(event){var key=event.key,which=event.which;var target=event.target;var selectionStartText=getBeforeSelectionText(target);var _getLastMeasureIndex=getLastMeasureIndex(selectionStartText,mergedPrefix),measureIndex=_getLastMeasureIndex.location,nextMeasurePrefix=_getLastMeasureIndex.prefix;// If the client implements an onKeyUp handler, call it\nonKeyUp===null||onKeyUp===void 0||onKeyUp(event);// Skip if match the white key list\nif([KeyCode.ESC,KeyCode.UP,KeyCode.DOWN,KeyCode.ENTER].indexOf(which)!==-1){return;}if(measureIndex!==-1){var nextMeasureText=selectionStartText.slice(measureIndex+nextMeasurePrefix.length);var validateMeasure=validateSearch(nextMeasureText,split);var matchOption=!!getOptions(nextMeasureText).length;if(validateMeasure){if(key===nextMeasurePrefix||key==='Shift'||mergedMeasuring||nextMeasureText!==mergedMeasureText&&matchOption){startMeasure(nextMeasureText,nextMeasurePrefix,measureIndex);}}else if(mergedMeasuring){// Stop if measureText is invalidate\nstopMeasure();}/**\n       * We will trigger `onSearch` to developer since they may use for async update.\n       * If met `space` means user finished searching.\n       */if(onSearch&&validateMeasure){onSearch(nextMeasureText,nextMeasurePrefix);}}else if(mergedMeasuring){stopMeasure();}};var onInternalPressEnter=function onInternalPressEnter(event){if(!mergedMeasuring&&onPressEnter){onPressEnter(event);}};// ============================ Focus Blur ============================\nvar focusRef=useRef();var onInternalFocus=function onInternalFocus(event){window.clearTimeout(focusRef.current);if(!isFocus&&event&&onFocus){onFocus(event);}setIsFocus(true);};var onInternalBlur=function onInternalBlur(event){focusRef.current=window.setTimeout(function(){setIsFocus(false);stopMeasure();onBlur===null||onBlur===void 0||onBlur(event);},0);};var onDropdownFocus=function onDropdownFocus(){onInternalFocus();};var onDropdownBlur=function onDropdownBlur(){onInternalBlur();};// ============================== Render ==============================\nreturn/*#__PURE__*/React.createElement(\"div\",{className:classNames(prefixCls,className),style:style},/*#__PURE__*/React.createElement(TextArea,_extends({ref:textareaRef,value:mergedValue},restProps,{rows:rows,onChange:onInternalChange,onKeyDown:onInternalKeyDown,onKeyUp:onInternalKeyUp,onPressEnter:onInternalPressEnter,onFocus:onInternalFocus,onBlur:onInternalBlur})),mergedMeasuring&&/*#__PURE__*/React.createElement(\"div\",{ref:measureRef,className:\"\".concat(prefixCls,\"-measure\")},mergedValue.slice(0,mergedMeasureLocation),/*#__PURE__*/React.createElement(MentionsContext.Provider,{value:{notFoundContent:notFoundContent,activeIndex:activeIndex,setActiveIndex:setActiveIndex,selectOption:selectOption,onFocus:onDropdownFocus,onBlur:onDropdownBlur}},/*#__PURE__*/React.createElement(KeywordTrigger,{prefixCls:prefixCls,transitionName:transitionName,placement:placement,direction:direction,options:mergedOptions,visible:true,getPopupContainer:getPopupContainer,dropdownClassName:dropdownClassName},/*#__PURE__*/React.createElement(\"span\",null,mergedMeasurePrefix))),mergedValue.slice(mergedMeasureLocation+mergedMeasurePrefix.length)));});var Mentions=/*#__PURE__*/forwardRef(function(_ref3,ref){var suffix=_ref3.suffix,_ref3$prefixCls=_ref3.prefixCls,prefixCls=_ref3$prefixCls===void 0?'rc-mentions':_ref3$prefixCls,defaultValue=_ref3.defaultValue,customValue=_ref3.value,allowClear=_ref3.allowClear,onChange=_ref3.onChange,classes=_ref3.classNames,className=_ref3.className,disabled=_ref3.disabled,rest=_objectWithoutProperties(_ref3,_excluded2);// ============================== Value ===============================\nvar _useMergedState3=useMergedState('',{defaultValue:defaultValue,value:customValue}),_useMergedState4=_slicedToArray(_useMergedState3,2),mergedValue=_useMergedState4[0],setMergedValue=_useMergedState4[1];// ============================== Change ==============================\nvar triggerChange=function triggerChange(currentValue){setMergedValue(currentValue);onChange===null||onChange===void 0||onChange(currentValue);};// ============================== Reset ===============================\nvar handleReset=function handleReset(){triggerChange('');};return/*#__PURE__*/React.createElement(BaseInput,{suffix:suffix,prefixCls:prefixCls,value:mergedValue,allowClear:allowClear,handleReset:handleReset,className:className,classNames:classes,disabled:disabled},/*#__PURE__*/React.createElement(InternalMentions,_extends({className:classes===null||classes===void 0?void 0:classes.mentions,prefixCls:prefixCls,ref:ref,onChange:triggerChange},rest)));});Mentions.Option=Option;export default Mentions;","map":{"version":3,"names":["_extends","_objectSpread","_slicedToArray","_objectWithoutProperties","_excluded","_excluded2","classNames","BaseInput","TextArea","toArray","useMergedState","KeyCode","warning","React","forwardRef","useEffect","useMemo","useRef","useState","useEffectState","KeywordTrigger","MentionsContext","Option","filterOption","defaultFilterOption","getBeforeSelectionText","getLastMeasureIndex","replaceWithMeasure","setInputSelection","validateSearch","defaultValidateSearch","InternalMentions","props","ref","prefixCls","className","style","_props$prefix","prefix","_props$split","split","_props$notFoundConten","notFoundContent","value","defaultValue","children","options","open","allowClear","_props$validateSearch","_props$filterOption","onChange","onKeyDown","onKeyUp","onPressEnter","onSearch","onSelect","onFocus","onBlur","transitionName","placement","direction","getPopupContainer","dropdownClassName","_props$rows","rows","restProps","mergedPrefix","Array","isArray","textareaRef","measureRef","getTextArea","_textareaRef$current","current","resizableTextArea","textArea","useImperativeHandle","_textareaRef$current4","focus","_textareaRef$current2","blur","_textareaRef$current3","textarea","_useState","_useState2","measuring","setMeasuring","_useState3","_useState4","measureText","setMeasureText","_useState5","_useState6","measurePrefix","setMeasurePrefix","_useState7","_useState8","measureLocation","setMeasureLocation","_useState9","_useState10","activeIndex","setActiveIndex","_useState11","_useState12","isFocus","setIsFocus","_useMergedState","_useMergedState2","mergedValue","setMergedValue","scrollTop","_React$useMemo","process","env","NODE_ENV","i","length","curPrefix","index","lastIndexOf","_React$useMemo2","mergedMeasuring","mergedMeasureText","mergedMeasurePrefix","mergedMeasureLocation","getOptions","useCallback","targetMeasureText","list","map","item","_item$key","key","_ref","optionProps","label","filter","option","mergedOptions","onSelectionEffect","startMeasure","nextMeasureText","nextMeasurePrefix","nextMeasureLocation","stopMeasure","callback","triggerChange","nextValue","onInternalChange","_ref2","target","selectOption","_getTextArea","_option$value","mentionValue","_replaceWithMeasure","targetText","selectionStart","text","selectionLocation","onInternalKeyDown","event","which","UP","DOWN","optionLen","offset","newActiveIndex","preventDefault","ESC","ENTER","_option","onInternalKeyUp","selectionStartText","_getLastMeasureIndex","measureIndex","location","indexOf","slice","validateMeasure","matchOption","onInternalPressEnter","focusRef","onInternalFocus","window","clearTimeout","onInternalBlur","setTimeout","onDropdownFocus","onDropdownBlur","createElement","concat","Provider","visible","Mentions","_ref3","suffix","_ref3$prefixCls","customValue","classes","disabled","rest","_useMergedState3","_useMergedState4","currentValue","handleReset","mentions"],"sources":["/Users/jmmallon/Downloads/js/ticketproject/src/node_modules/rc-mentions/es/Mentions.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"className\", \"style\", \"prefix\", \"split\", \"notFoundContent\", \"value\", \"defaultValue\", \"children\", \"options\", \"open\", \"allowClear\", \"validateSearch\", \"filterOption\", \"onChange\", \"onKeyDown\", \"onKeyUp\", \"onPressEnter\", \"onSearch\", \"onSelect\", \"onFocus\", \"onBlur\", \"transitionName\", \"placement\", \"direction\", \"getPopupContainer\", \"dropdownClassName\", \"rows\"],\n  _excluded2 = [\"suffix\", \"prefixCls\", \"defaultValue\", \"value\", \"allowClear\", \"onChange\", \"classNames\", \"className\", \"disabled\"];\nimport classNames from 'classnames';\nimport { BaseInput } from 'rc-input';\nimport TextArea from 'rc-textarea';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport warning from \"rc-util/es/warning\";\nimport React, { forwardRef, useEffect, useMemo, useRef, useState } from 'react';\nimport useEffectState from \"./hooks/useEffectState\";\nimport KeywordTrigger from \"./KeywordTrigger\";\nimport MentionsContext from \"./MentionsContext\";\nimport Option from \"./Option\";\nimport { filterOption as defaultFilterOption, getBeforeSelectionText, getLastMeasureIndex, replaceWithMeasure, setInputSelection, validateSearch as defaultValidateSearch } from \"./util\";\nvar InternalMentions = /*#__PURE__*/forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    className = props.className,\n    style = props.style,\n    _props$prefix = props.prefix,\n    prefix = _props$prefix === void 0 ? '@' : _props$prefix,\n    _props$split = props.split,\n    split = _props$split === void 0 ? ' ' : _props$split,\n    _props$notFoundConten = props.notFoundContent,\n    notFoundContent = _props$notFoundConten === void 0 ? 'Not Found' : _props$notFoundConten,\n    value = props.value,\n    defaultValue = props.defaultValue,\n    children = props.children,\n    options = props.options,\n    open = props.open,\n    allowClear = props.allowClear,\n    _props$validateSearch = props.validateSearch,\n    validateSearch = _props$validateSearch === void 0 ? defaultValidateSearch : _props$validateSearch,\n    _props$filterOption = props.filterOption,\n    filterOption = _props$filterOption === void 0 ? defaultFilterOption : _props$filterOption,\n    onChange = props.onChange,\n    onKeyDown = props.onKeyDown,\n    onKeyUp = props.onKeyUp,\n    onPressEnter = props.onPressEnter,\n    onSearch = props.onSearch,\n    onSelect = props.onSelect,\n    onFocus = props.onFocus,\n    onBlur = props.onBlur,\n    transitionName = props.transitionName,\n    placement = props.placement,\n    direction = props.direction,\n    getPopupContainer = props.getPopupContainer,\n    dropdownClassName = props.dropdownClassName,\n    _props$rows = props.rows,\n    rows = _props$rows === void 0 ? 1 : _props$rows,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var mergedPrefix = useMemo(function () {\n    return Array.isArray(prefix) ? prefix : [prefix];\n  }, [prefix]);\n\n  // =============================== Refs ===============================\n  var textareaRef = useRef(null);\n  var measureRef = useRef(null);\n  var getTextArea = function getTextArea() {\n    var _textareaRef$current;\n    return (_textareaRef$current = textareaRef.current) === null || _textareaRef$current === void 0 || (_textareaRef$current = _textareaRef$current.resizableTextArea) === null || _textareaRef$current === void 0 ? void 0 : _textareaRef$current.textArea;\n  };\n  React.useImperativeHandle(ref, function () {\n    var _textareaRef$current4;\n    return {\n      focus: function focus() {\n        var _textareaRef$current2;\n        return (_textareaRef$current2 = textareaRef.current) === null || _textareaRef$current2 === void 0 ? void 0 : _textareaRef$current2.focus();\n      },\n      blur: function blur() {\n        var _textareaRef$current3;\n        return (_textareaRef$current3 = textareaRef.current) === null || _textareaRef$current3 === void 0 ? void 0 : _textareaRef$current3.blur();\n      },\n      textarea: (_textareaRef$current4 = textareaRef.current) === null || _textareaRef$current4 === void 0 || (_textareaRef$current4 = _textareaRef$current4.resizableTextArea) === null || _textareaRef$current4 === void 0 ? void 0 : _textareaRef$current4.textArea\n    };\n  });\n\n  // ============================== State ===============================\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    measuring = _useState2[0],\n    setMeasuring = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    measureText = _useState4[0],\n    setMeasureText = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    measurePrefix = _useState6[0],\n    setMeasurePrefix = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    measureLocation = _useState8[0],\n    setMeasureLocation = _useState8[1];\n  var _useState9 = useState(0),\n    _useState10 = _slicedToArray(_useState9, 2),\n    activeIndex = _useState10[0],\n    setActiveIndex = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    isFocus = _useState12[0],\n    setIsFocus = _useState12[1];\n\n  // ============================== Value ===============================\n  var _useMergedState = useMergedState('', {\n      defaultValue: defaultValue,\n      value: value\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    mergedValue = _useMergedState2[0],\n    setMergedValue = _useMergedState2[1];\n\n  // =============================== Open ===============================\n  useEffect(function () {\n    // Sync measure div top with textarea for rc-trigger usage\n    if (measuring && measureRef.current) {\n      measureRef.current.scrollTop = getTextArea().scrollTop;\n    }\n  }, [measuring]);\n  var _React$useMemo = React.useMemo(function () {\n      if (open) {\n        if (process.env.NODE_ENV !== 'production') {\n          warning(false, '`open` of Mentions is only used for debug usage. Do not use in you production.');\n        }\n        for (var i = 0; i < mergedPrefix.length; i += 1) {\n          var curPrefix = mergedPrefix[i];\n          var index = mergedValue.lastIndexOf(curPrefix);\n          if (index >= 0) {\n            return [true, '', curPrefix, index];\n          }\n        }\n      }\n      return [measuring, measureText, measurePrefix, measureLocation];\n    }, [open, measuring, mergedPrefix, mergedValue, measureText, measurePrefix, measureLocation]),\n    _React$useMemo2 = _slicedToArray(_React$useMemo, 4),\n    mergedMeasuring = _React$useMemo2[0],\n    mergedMeasureText = _React$useMemo2[1],\n    mergedMeasurePrefix = _React$useMemo2[2],\n    mergedMeasureLocation = _React$useMemo2[3];\n\n  // ============================== Option ==============================\n  var getOptions = React.useCallback(function (targetMeasureText) {\n    var list;\n    if (options && options.length > 0) {\n      list = options.map(function (item) {\n        var _item$key;\n        return _objectSpread(_objectSpread({}, item), {}, {\n          key: (_item$key = item === null || item === void 0 ? void 0 : item.key) !== null && _item$key !== void 0 ? _item$key : item.value\n        });\n      });\n    } else {\n      list = toArray(children).map(function (_ref) {\n        var optionProps = _ref.props,\n          key = _ref.key;\n        return _objectSpread(_objectSpread({}, optionProps), {}, {\n          label: optionProps.children,\n          key: key || optionProps.value\n        });\n      });\n    }\n    return list.filter(function (option) {\n      /** Return all result if `filterOption` is false. */\n      if (filterOption === false) {\n        return true;\n      }\n      return filterOption(targetMeasureText, option);\n    });\n  }, [children, options, filterOption]);\n  var mergedOptions = React.useMemo(function () {\n    return getOptions(mergedMeasureText);\n  }, [getOptions, mergedMeasureText]);\n\n  // ============================= Measure ==============================\n  // Mark that we will reset input selection to target position when user select option\n  var onSelectionEffect = useEffectState();\n  var startMeasure = function startMeasure(nextMeasureText, nextMeasurePrefix, nextMeasureLocation) {\n    setMeasuring(true);\n    setMeasureText(nextMeasureText);\n    setMeasurePrefix(nextMeasurePrefix);\n    setMeasureLocation(nextMeasureLocation);\n    setActiveIndex(0);\n  };\n  var stopMeasure = function stopMeasure(callback) {\n    setMeasuring(false);\n    setMeasureLocation(0);\n    setMeasureText('');\n    onSelectionEffect(callback);\n  };\n\n  // ============================== Change ==============================\n  var triggerChange = function triggerChange(nextValue) {\n    setMergedValue(nextValue);\n    onChange === null || onChange === void 0 || onChange(nextValue);\n  };\n  var onInternalChange = function onInternalChange(_ref2) {\n    var nextValue = _ref2.target.value;\n    triggerChange(nextValue);\n  };\n  var selectOption = function selectOption(option) {\n    var _getTextArea;\n    var _option$value = option.value,\n      mentionValue = _option$value === void 0 ? '' : _option$value;\n    var _replaceWithMeasure = replaceWithMeasure(mergedValue, {\n        measureLocation: mergedMeasureLocation,\n        targetText: mentionValue,\n        prefix: mergedMeasurePrefix,\n        selectionStart: (_getTextArea = getTextArea()) === null || _getTextArea === void 0 ? void 0 : _getTextArea.selectionStart,\n        split: split\n      }),\n      text = _replaceWithMeasure.text,\n      selectionLocation = _replaceWithMeasure.selectionLocation;\n    triggerChange(text);\n    stopMeasure(function () {\n      // We need restore the selection position\n      setInputSelection(getTextArea(), selectionLocation);\n    });\n    onSelect === null || onSelect === void 0 || onSelect(option, mergedMeasurePrefix);\n  };\n\n  // ============================= KeyEvent =============================\n  // Check if hit the measure keyword\n  var onInternalKeyDown = function onInternalKeyDown(event) {\n    var which = event.which;\n    onKeyDown === null || onKeyDown === void 0 || onKeyDown(event);\n\n    // Skip if not measuring\n    if (!mergedMeasuring) {\n      return;\n    }\n    if (which === KeyCode.UP || which === KeyCode.DOWN) {\n      // Control arrow function\n      var optionLen = mergedOptions.length;\n      var offset = which === KeyCode.UP ? -1 : 1;\n      var newActiveIndex = (activeIndex + offset + optionLen) % optionLen;\n      setActiveIndex(newActiveIndex);\n      event.preventDefault();\n    } else if (which === KeyCode.ESC) {\n      stopMeasure();\n    } else if (which === KeyCode.ENTER) {\n      // Measure hit\n      event.preventDefault();\n      if (!mergedOptions.length) {\n        stopMeasure();\n        return;\n      }\n      var _option = mergedOptions[activeIndex];\n      selectOption(_option);\n    }\n  };\n\n  /**\n   * When to start measure:\n   * 1. When user press `prefix`\n   * 2. When measureText !== prevMeasureText\n   *  - If measure hit\n   *  - If measuring\n   *\n   * When to stop measure:\n   * 1. Selection is out of range\n   * 2. Contains `space`\n   * 3. ESC or select one\n   */\n  var onInternalKeyUp = function onInternalKeyUp(event) {\n    var key = event.key,\n      which = event.which;\n    var target = event.target;\n    var selectionStartText = getBeforeSelectionText(target);\n    var _getLastMeasureIndex = getLastMeasureIndex(selectionStartText, mergedPrefix),\n      measureIndex = _getLastMeasureIndex.location,\n      nextMeasurePrefix = _getLastMeasureIndex.prefix;\n\n    // If the client implements an onKeyUp handler, call it\n    onKeyUp === null || onKeyUp === void 0 || onKeyUp(event);\n\n    // Skip if match the white key list\n    if ([KeyCode.ESC, KeyCode.UP, KeyCode.DOWN, KeyCode.ENTER].indexOf(which) !== -1) {\n      return;\n    }\n    if (measureIndex !== -1) {\n      var nextMeasureText = selectionStartText.slice(measureIndex + nextMeasurePrefix.length);\n      var validateMeasure = validateSearch(nextMeasureText, split);\n      var matchOption = !!getOptions(nextMeasureText).length;\n      if (validateMeasure) {\n        if (key === nextMeasurePrefix || key === 'Shift' || mergedMeasuring || nextMeasureText !== mergedMeasureText && matchOption) {\n          startMeasure(nextMeasureText, nextMeasurePrefix, measureIndex);\n        }\n      } else if (mergedMeasuring) {\n        // Stop if measureText is invalidate\n        stopMeasure();\n      }\n\n      /**\n       * We will trigger `onSearch` to developer since they may use for async update.\n       * If met `space` means user finished searching.\n       */\n      if (onSearch && validateMeasure) {\n        onSearch(nextMeasureText, nextMeasurePrefix);\n      }\n    } else if (mergedMeasuring) {\n      stopMeasure();\n    }\n  };\n  var onInternalPressEnter = function onInternalPressEnter(event) {\n    if (!mergedMeasuring && onPressEnter) {\n      onPressEnter(event);\n    }\n  };\n\n  // ============================ Focus Blur ============================\n  var focusRef = useRef();\n  var onInternalFocus = function onInternalFocus(event) {\n    window.clearTimeout(focusRef.current);\n    if (!isFocus && event && onFocus) {\n      onFocus(event);\n    }\n    setIsFocus(true);\n  };\n  var onInternalBlur = function onInternalBlur(event) {\n    focusRef.current = window.setTimeout(function () {\n      setIsFocus(false);\n      stopMeasure();\n      onBlur === null || onBlur === void 0 || onBlur(event);\n    }, 0);\n  };\n  var onDropdownFocus = function onDropdownFocus() {\n    onInternalFocus();\n  };\n  var onDropdownBlur = function onDropdownBlur() {\n    onInternalBlur();\n  };\n\n  // ============================== Render ==============================\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(prefixCls, className),\n    style: style\n  }, /*#__PURE__*/React.createElement(TextArea, _extends({\n    ref: textareaRef,\n    value: mergedValue\n  }, restProps, {\n    rows: rows,\n    onChange: onInternalChange,\n    onKeyDown: onInternalKeyDown,\n    onKeyUp: onInternalKeyUp,\n    onPressEnter: onInternalPressEnter,\n    onFocus: onInternalFocus,\n    onBlur: onInternalBlur\n  })), mergedMeasuring && /*#__PURE__*/React.createElement(\"div\", {\n    ref: measureRef,\n    className: \"\".concat(prefixCls, \"-measure\")\n  }, mergedValue.slice(0, mergedMeasureLocation), /*#__PURE__*/React.createElement(MentionsContext.Provider, {\n    value: {\n      notFoundContent: notFoundContent,\n      activeIndex: activeIndex,\n      setActiveIndex: setActiveIndex,\n      selectOption: selectOption,\n      onFocus: onDropdownFocus,\n      onBlur: onDropdownBlur\n    }\n  }, /*#__PURE__*/React.createElement(KeywordTrigger, {\n    prefixCls: prefixCls,\n    transitionName: transitionName,\n    placement: placement,\n    direction: direction,\n    options: mergedOptions,\n    visible: true,\n    getPopupContainer: getPopupContainer,\n    dropdownClassName: dropdownClassName\n  }, /*#__PURE__*/React.createElement(\"span\", null, mergedMeasurePrefix))), mergedValue.slice(mergedMeasureLocation + mergedMeasurePrefix.length)));\n});\nvar Mentions = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var suffix = _ref3.suffix,\n    _ref3$prefixCls = _ref3.prefixCls,\n    prefixCls = _ref3$prefixCls === void 0 ? 'rc-mentions' : _ref3$prefixCls,\n    defaultValue = _ref3.defaultValue,\n    customValue = _ref3.value,\n    allowClear = _ref3.allowClear,\n    onChange = _ref3.onChange,\n    classes = _ref3.classNames,\n    className = _ref3.className,\n    disabled = _ref3.disabled,\n    rest = _objectWithoutProperties(_ref3, _excluded2);\n  // ============================== Value ===============================\n  var _useMergedState3 = useMergedState('', {\n      defaultValue: defaultValue,\n      value: customValue\n    }),\n    _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n    mergedValue = _useMergedState4[0],\n    setMergedValue = _useMergedState4[1];\n\n  // ============================== Change ==============================\n  var triggerChange = function triggerChange(currentValue) {\n    setMergedValue(currentValue);\n    onChange === null || onChange === void 0 || onChange(currentValue);\n  };\n\n  // ============================== Reset ===============================\n  var handleReset = function handleReset() {\n    triggerChange('');\n  };\n  return /*#__PURE__*/React.createElement(BaseInput, {\n    suffix: suffix,\n    prefixCls: prefixCls,\n    value: mergedValue,\n    allowClear: allowClear,\n    handleReset: handleReset,\n    className: className,\n    classNames: classes,\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(InternalMentions, _extends({\n    className: classes === null || classes === void 0 ? void 0 : classes.mentions,\n    prefixCls: prefixCls,\n    ref: ref,\n    onChange: triggerChange\n  }, rest)));\n});\nMentions.Option = Option;\nexport default Mentions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}